BUILDING  WINNING ALGORITHMIC  TRADING  SYSTEMS www.rasabourse.com The Wiley Trading series features books by traders who have survived the market’s ever changing temperament and have prospered—some by reinventing systems, others by getting back to basics. Whether a novice trader, professional, or some - where in between, t hese books will prov ide the advice an d strate gies nee ded to prosper today and well into the future. For more on this series, visit our Web site at www.WileyTradin g.com. Founded in 1807, John Wiley & Sons is the oldest independent publishing com- pany in the United States. With offi  ces in North America, Europe, Australia, and Asia, Wiley is globally committed to developin g and marketin g print and electronic products and services for our customers’ professional and personal knowledge and understan ding. www.rasabourse.com BUILDING  WINNING  ALGORITHMIC TRADING  SYSTEMS A Trader’s Journey from Data Mining to Monte Carlo Simulation to Live Trading Kevin J. Davey www.rasabourse.comCover Desi gn: Wiley Cover Image: © iStockphoto/Emilia_Szymane k Copyright © 2014 by Kevin J. Davey. All rights reserved . Published b y John Wile y & Sons, Inc., Hoboken, New Jerse y. Published simultaneously in Canada . No part of this publication ma y be reproduced, stored in a retrieval s ystem, or transmitted in an y form or b y any means, electronic, mechanical, photocopying, recording, scanning, or otherwise, except as permitted un- der Section 107 or 108 of the 1976 United States Copyright Act, without either the prior written permission of the Publisher, or aut horization t hrough payment o f the appropriate per-copy fee to t he Copyrig ht Clear- ance Center, Inc., 222 Rosewood Drive, Danvers, MA 01923, (978) 750-8400, fax (978) 646-8600, or on the Web at www .copyright.com. Requests to the Publisher for permission should be addressed to the Permissions Department, John Wile y & Sons, Inc., 111 River Street, Hoboken, NJ 07030, (201) 748-6011, fax (201) 748-6008, or on line at http://www .wi ley.com/go/permissions . Limit of Liabilit y/Disclaimer of Warrant y: While the publisher and author have used their best eff  orts in preparing this book, they make no representations or warranties with respect to the accuracy or completeness of the contents of this book and specifi  call y disclaim an y implied warranties of merchantabilit y or fi  tness for a particular purpose. No warrant y may be created or extended b y sales representatives or written sales materials. The advice and strate gies contained herein may not be suitable for your situation. You should consult with a professional where appropriate. Neither the publisher nor author shall be liable for an y loss of profi  t or an y other commercial dama ges, includin g but not limited to special, incidental, consequential, or other dama ges. For general information on our other products and services or for technical support, please contact our Customer Care Department within the United States at (800) 762-2974, outside the United States a t (317) 572-3993, or fax (317) 572-4002 . Wiley pu blishes in a variety o f print an d electronic formats an d by print-on- deman d. Some materia l included with standard print versions of this book ma y not be included in e-books or in print-on-demand. If this book refers to media such as a CD or DVD that is not included in the version you purchased, you ma y download this materia l at http:// booksupport.wi ley.com. For more in formation a bout Wi ley pro ducts, visit www .wi ley.com. Davey, Kevin, 1966 - Building a lgorit hmic tra ding systems, + website : a trader’s journey from data mining to Monte Carlo simulation to live trading / Kevin Davey . 1 online resource. — (Wiley trading ) Includes index . ISBN 978-1-118-77891-3 (p df) — ISBN 978-1-118-77888-3 (epu b) — ISBN 978-1-118-77898-2 (p bk.) 1. Futures. 2. Port folio management. 3. Investment ana lysis. 4. Monte Car lo met hod. 5. Electronic tradin g of securities. I. Title. HG6024.A 3 332. 64′2028567 — dc23 2014014899 Printe d in the United States o f Americ a 10 9 8 7 6 5 4 3 2 1 www.rasabourse.comT o Amy, Owen, Kathryn, Andrew, and Guardian Angel Anthony— My love, my children, my life www.rasabourse.comwww.rasabourse.comviiCONTENTS Ackno wled gments ix About the Author xi Introduction 1 PART I A T RADER ’S JOURNEY  7 CHAPTER 1 The Birth of a Trader 9 CHAPTER 2 Enou gh Is Enou gh 15 CHAPTER 3 W orld Cu p Cham pionshi p of Futures Tradin g® Trium ph 2 3 CHAPTER 4 Makin g the Leap—Transitionin g to Full Time 33 PART II Y OUR TRADING  SYSTEM  41 CHAPTER 5 T estin g and Evaluatin g a Tradin g System 43 CHAPTER 6 Preliminary Analysis 5 3 CHAPTER 7 Detailed Anal ysis 61 CHAPTER 8 Desi gning and Developin g Systems 71 PART III DEVELOPING  A STRATEGY  77 CHAPTER 9 Strate gy Development—Goals and Objectives 79 CHAPTER 10 T radin g Idea 83 www.rasabourse.comviii CONTENT SCHAPTER 11 Let’s  Talk about  Data 93 CHAPTER 12 Limited Test ing 103 CHAPTER 13 In-Dept h Test ing/Wa lk-Forwar d Ana lysis 115 CHAPTER 14 Monte Carlo Anal ysis and Incubation 129 CHAPTER 15 Diversifi  cation 133 CHAPTER 16 Position Sizing and Money Management 13 9 CHAPTER 17 Documenting the Process 147 PART IV CREATING  A SYSTEM  153 CHAPTER 18 Goals, Initial and Walk-Forward Testin g 155 CHAPTER 19 Monte Carlo Testin g and Incubation 163 PART V CONSIDERATIONS  BEFORE  GOING  LIVE 1 75 CHAPTER 20 Account and Position Sizin g 177 CHAPTER 21 Tradin g Psycholo gy 18 7 CHAPTER 22 Other Considerations before Goin g Live 195 PART VI MONITORING  A LIVE STRATEGY  2 03 CHAPTER 23 The Ins and Outs of Monitorin g a Live Strate gy 205 CHAPTER 24 Real Time 219 PART VII CAUTIONARY  TALES 2 33 CHAPTER 25 Delusions of Grandeur 235 Conclusion 243 APPE NDIX A Monkey Tradin g Example, TradeStation Easy Language Code 247 APPE NDIX B Euro Ni ght Strate gy, TradeStation Easy Language Format 255 APPENDIX CEuro Day Strate gy, TradeStation Easy Language Format 259 About the Companion Web Site 263 Index 265 www.rasabourse.comix                                                                     ACKNOWLEDGMENTS There are many people without whom this book, and my tradin g career, would not have been possible. First on the list are m y Mom and Dad. The y stressed self‐reliance and taking responsibility for one’s actions. These are great traits for everyone to have, and they are really critical for traders. I owe my start to them. Of course, none of my success would have been possible without my great wife, Amy. Imagine a spouse who fully supported her husband as he walked away from a great career to become a trader, an endeavor where 90 percent of people fail. Her support has been 100 percent positive, and I cannot ima gine survivin g as a trader, and a person, without it. She is one in a million, and I’m lucky to have found her. Finall y, this book would not be possible without the man y traders and wannabe traders who have contacted me over the years. Realizin g my words actually helped individuals avoid the many unscrupulous people in this industry gives me great joy. I hope readin g this book helps you in the same way. Happy Tradin g! Kevin J. Davey May 2014 www.rasabourse.comwww.rasabourse.comxi                                                                    ABOUT THE AUTHOR Kevin Davey is a professional trader and a top‐performin g systems developer. He generated triple‐di git annual returns 148 percent, 107 percent, and 112 percent in three consecutive World Cup of Futures Trading Championships® using algorithmic tradin g systems . His web site, www .kjtradin gsystems.com, provides tradin g systems, tradin g signals, and mentorin g. He writes extensively in industry publications such as Futures Magazin e  and  Active Trader   and was featured as a “Market Master” in the book r The Universal Principles of Successful Trading   by Brent Penfold (Wiley, 2010). Active in social media, he has over 15,000   Twitter followers.  An aerospace en gineer and MBA by background, Davey has been an independent trader for over 20 years. Davey continues to trade full time and develop al gorithmic tradin g strate gies . www.rasabourse.comwww.rasabourse.com1                                                                   INTRODUCTION Iwanted to throw up. The bile in my stomach had reached an unsustainable level, but there was no bathroom near me. Speeding down the freeway at 75 miles per hour, with no exit in sight, I’d have to swallow hard and accept my fate. I really wanted to just curl up and die. Well, not exactly. I wanted to vomit fi  rst, then  curl up and die. Was it trichinosis from eating pork not cooked to shoe leather consistency, as my Mom always predicted would happen? Nope. An undercooked juicy red hambur ger laced with  E. coli?  Not exactl y. It was meat that was the culprit, but in the form of live cattle. Live cattle futures, to be exact. Live cattle, all 40,000 pounds of them, had led to my sudden ur ge to vomit. Specifi  cally, bovine spon giform encephalopathy, more commonl y known as mad cow disease. I didn’t have the disease, but m y ill‐fated speculative investment did. This was at the end of December 2003, a month that had started with great per - sonal and professional promise. I recentl y had been promoted to vice president of quality assurance at Argo‐T ech, the midsize aerospace fi  rm I was lucky enough to be part of, before it was bou ght out by a soulless mammoth corporation. I also had been honored as a “40 Under 40” recipient from Crain’s Cleveland Business   magazine—s recognized as one of Cleveland, Ohio’s, up‐and‐comin g business stars under the a ge of 40. My futures tradin g account was doin g pretty well, to the point where I fel t confi dent I knew w hat I was doing (many times t hat feeling is soon followed by a slap in the face by the market, but I di gress). Finally, my fi  rst child was on the way in a few months. All thin gs considered, I was on a roll. Then disaster struc k. Three times. Quic kly. On December 12, 2003, my beautiful and amazin g wife Amy and I had our fi  rs t son, Anthony. He was two months premature and was stillborn. The joy of plannin g www.rasabourse.com2INTRODUCT IONfor the arriva l of our fi rstborn su ddenly and tragica lly became p lanning for a fu- neral and burial. It is nearly impossible to understand the gut‐wrenching pain that comes wit h losing a child, unti l it happens to you. I certain ly was not prepare d for it. Dreams were destroye d that day, life suddenly became un fair, hope an d joy seeme d a distant memor y. Needless to sa y, Am y and I were both mentall y, physicall y, and emotionally devastated. Less t han a wee k later, on Decem ber 17, t he secon d calamity hit. My father passe d away on his 75t h birthday. Ironica lly, after three open‐ heart bypass surgeries over t he previous 30 years, it was not his clo gged arteries that got him, but cancer—a nasty cancer t hat is common to c himney sweepers. T hat ma de sense, I suppose, since he was a fi refi ghter, an d in his prime c hased many raccoons out o f chimneys, as t he co‐ owner o f a pest contro l company. A fter watc hing him lying in bed while life slowly left his body, my head be gan spinnin g like a top. T o say I could not think strai ght was an un derstatement. With two such life‐changing events within a week, you probably would guess tha t I would not be tradin g or takin g up any other type of mental and emotional task. But you’d be wrong. I was still trading. Looking back on it now , I was completely crazy to trade. Yet I did. On December 23, about an hour or so before the close, on a whim I decided that I should bu y live cattle futures. I’m sure I had m y reasons, but I am equally sure that those reasons were contrived by my mind in order to justify the trade. I wasn’t in my ri ght mind at all. I had no business tradin g. I’m sure you know how this stor y ends. After the close on December 23, the U.S. Department of Agriculture announced that a case of mad cow disease was found in the United States. The impact on the market would be terribly ne gative. Since I was long cattle futures, and the market was certainly headed for a free fall, my account was in for a slow death, temporarily slowed only by the daily limits in the futures markets. I could only lose $600 per day per contract, at least until the exchan ge ex- FIGURE 0.1       M ad Cow Disease Causes Live Catt le Futures to Co llapse Mad cow disease announced after the close www.rasabourse.com3INTRODUC TIONpanded the daily downside limit. For my account size, havin g a “locked limit” down even wit h one contract was extreme ly pain ful. A wee k later, a fter three days o f a locked limit down mar ket—w here I cou ld not exit at any price—I was fi nally able to liquidate, wit h a $5,400 loss. This was about seven times the maximum loss I had expected, and as a percenta ge of my account, it was brutal. Not the end of the world, but it really made me wonder. Was t he past mont h just t he start o f a pro longe d losing strea k, both in tra ding an d in life? What was I doing tra ding any how, a fter all the recent emotiona l hits to my psyc he? And tradin g on a whim, a hunch? When was I going to stop such destructive behavior? Could I stop suc h destructive behavior an d fi nally turn into a winning tra der? Cou ld this series o f unfortunate events provi de the impetus to rise from t he ashes, to turn my trading aroun d? So many questions—ones I had no answer for. As it turns out, as bad as this trade was, mad cow disease probably saved my trad - ing life. This book documents t hat tra ding story, warts an d all. Along t he way, I go t better and better at developing mechanical trading systems, and later in the book I show you the process I use to develop winnin g algorithmic tradin g systems. ■Who Can Beneﬁ  t from Thi s Book? Regardless of the type of trader you are, or your experience level with tradin g, I think you’ll fi  nd something in this book that resonates for you. For be ginner traders, I hope this book is an eye‐opener for you. I can’t, and I won’t, fi  ll your head with thou ghts of tradin g profi  ts rainin g down from the sky. Anyone who tells you trading is easy is fl  at‐out lying to you. Sure, you can make lots of money tradin g, but you also need to be prepared for a lot of losin g, a lot o f drawdowns, and a lot of risk. Whenever someone tells me tradin g is a piece of cake, I always suspect that they are half‐baked. My story, as painful as it is at times, is a realistic journey for many retail traders. Of course, as I tell all be ginners, read wha t I have written, but then read books b y other traders, too. Keep an open mind to everything. After a lot of reading, you’ll be able to make solid judgment calls on wha t is correct, what is BS, and what you like and don’t like. The amount of misinforma - tion a bout tra ding is sta ggering, so a ll beginners must be wary. For intermediate or sli ghtly experienced but stru ggling traders, maybe your failures up until this point aren’t a result of psycholo gy or confi  dence. Many trading books nowa days put a lot of emp hasis on t he menta l aspect, but all the mental preparation in the world won’t help you if you are developin g strate gies incorrectly. If you’ve ever lost money after you started tradin g a strate gy right after optimizin g it, t hen you pro bably rea lize you were doing somet hing wron g. The process detailed in this book should be ri ght up your alley, since it will steer you in the ri ght direction. www.rasabourse.com4INTRODUCTIO N For expert tra ders, most o f what I present here you ’ll have a lready seen before in some fashion. Certain ly, there are many great tra ding books that discuss many o f the issues an d problems t hat I address here. But t here is a lways somet hing new to learn, a diff erent approach to tr y, and a di ff erent wa y to think. You probabl y fi  nd man y items in this book that are diff  erent from your current method, and you’ll likel y benefi  t from incorporatin g these new ideas in your tradin g. Although the book is designe d aroun d algorit hmic or mec hanica l trading, w hich is what I primari ly do, discretionary tra ders can benefi t from t he concepts detailed in this book. Maybe there are parts of your discretionary approach that can be sta - tistica lly teste d. For examp le, let’s say your discretionary entry consists o f a moving average crossover, com bined with your intuition. It mig ht be impossi ble to test your intuition, but a moving average crossover can be wa lk‐forwar d teste d and gent ly optimized. Or perhaps you want to evaluate breakeven or movin g stops for your exit. T here are many wrong ways to test t his, but on ly a few correct ways. You ’ll learn a correct way in this book. Therefore, utilizing the concepts in this book, you can improve your discretionary approach a great deal, all because you’ll know how to properly design and test a trading system. Whether it is a 100 percent mechanical strate gy, or a part mechanical and part discretionary system, puttin g actual perfor- mance numbers to entries and exits can only give you confi  dence and make for a better trading approach. I have or ganized Building Winning Algorithmic Trading S ystems  into seven parts. In all seven sections of the book, you’ll see me use certain terms interchan geably: Strateg y or trading s ystem —the approach used to trade. This can be ri gid rules, general guidelines and principles, or fl  at‐out random guessin g. The net result is your strategy or trading system. Mechanical or rule‐based trading or algorithmic tradin g —a style of tradin g in which all the rules are defi  ned 100 percent. There is no discretion involved, no decisions to be made by the trader. Hybrid or mixed trading s ystem —a style of tradin g that includes aspects of al gorith- mic tradin g, alon g with discretionary tradin g. An example would be a mechani- cal system that gives entry and exit signals, but gives the trader the option to accept or reject the si gnal. In Part I, I walk you throu gh my tradin g history. I think my early ups and downs— mostly downs—are pretty typical of new or be ginnin g traders. I paid “tuition ” to the mar ket for many years. But I was a ble to persevere, winnin g the Wor ld Cup Championship of Futures Tradin g® in 2006, and fi  nishin g second in 2005 and 2007. After those successes, I reached the point all part‐time, hobb y shop, retail traders dream o f: I was a ble to leave a promisin g career an d live the dream o f trading full time. In the second part of this book, I tell you how I currently do thin gs. From evaluat - ing tradin g systems to desi gning new tradin g systems, I lay out my process. It is not www.rasabourse.com5INTRODUC TIONperfect, an d it is ever evo lving, but it contains crucia l information t hat I wis h I had when I starte d out. Even i f you just follow bits an d pieces o f what I do, you s hould be able to save t housan ds in mar ket tuition . In Parts III‐VII, I build a tra ding system, from concept to live tra ding. It is a good tradin g system, but by no means the Holy Grail (which, by the way, does not exist). I also discuss in this section what I think is the closest one can get to the Holy Grail— diversi fi cation. Fina lly, I discuss how I monitor my strategies in rea l time, wit h a real‐time diary o f my tra ding progress t hrough a num ber of mont hs. I hope that by readin g my story, you’ll be able to avoid my mistakes and learn from them. Trust me because, as you ’ll see, I ’ve ma de a ton o f them. www.rasabourse.comwww.rasabourse.com                                                 P A R T  I A T rader ’s Journey www.rasabourse.comwww.rasabourse.com9     It was 1989, and I was California dreamin’. Actually I wasn’t dreaming, I was al- ready in California, livin g a youn g single man’s dream. A year or so out of colle ge, I was residin g in sunny Manhattan Beach, California, with a small apartment three blocks from the soft white sand so wonderful that they used it to help create Waikiki Beach in Hawaii. I had graduated the year before, summa cum laude, with a bach - elor’s degree in aerospace engineering from the University of Michigan, a top‐tier engineerin g school. Then I had turned my back on Massachusetts Institute of T ech- nology (MIT), California Institute of T echnolo gy (Cal T ech), Stanford University, Purdue University, and Michigan, all of whom had accepted me in their aerospace master’s de gree pro gram. I turned down those great schools to live and work in sunny California, a lifelon g dream. I still remember the precise moment I made that fateful decision. On a bitterly cold winter’s day in Ann Arbor, Michi gan, I was walkin g down South University Avenue to one of my fi  nal‐semester classes. The wind was blowin g so hard in my face that I actuall y leaned into the wind to see if it would keep me up. At that point, fall- ing face‐fi  rst onto the ice‐covered sidewalk would not have been much worse than feeling the stin ging wind in my face. W hat seeme d like a gale‐force win d kept me uprig ht, and then I knew—I did not want, or nee d, to live w here it was co ld in the winter w hen aerospace engineering gra duates like me were fl ocking to jo bs in sunny southern Ca lifornia. M y mind was ma de up. Sun an d sand it was. A few wee ks after graduation, I pac ked up my belongings, an d with my sister Karen as my driving companion, drove cross‐country to warm an d sunny Los Ange les.             CHAPTER   1 The Birt h of a Trader www.rasabourse.com10 THE BIR TH OF A TRADER One year later, I was sett led in. I had a close group o f friends, most o f them Midwestern transplants like me. We’d while away the weekends playing beach volleyball, usually cappin g the day off   with a few drinks at a local pub. I loved beach living and all the entertainment it provi ded. Drivin g aroun d the beach cities in my little red T‐roof sports car, life was pretty good. But somethin g was missin g. I cou ldn’t put my fi nger on it, but I knew t his wasn ’t the life for me. We ll, beach life certain ly agree d with me, but my c hoice o f career was t he wrong one. Sure, designing future fi  ghter airplanes and workin g on secret government projects was fulfi lling to a degree. But I just didn’t feel like it was my future. I cou ld not see my - self doing t hat kind of work for even 5 years, muc h less a career o f 30 or 40 years. I needed a jolt to wa ke me up. T hat jolt came in t he form o f junk mail that appeare d in my mailbox one day, and it chan ged everythin g. The junk mail booklet was from Ken Ro berts, a futures an d commo dities tra der. Or at least that is how he presented himself. Looking back on it, he was defi  nitely more of a salesman than a trader. With a nice, folks y smile and a cowbo y hat, Ken laid out the riches that awaited anyone brave enough to trade futures, or commodities, as they were more commonly referred to back then. He had a compellin g story in that little booklet of his, and I’ll admit I was quickly hooked. Looking at a chart of sugar, as shown in Figure   1.1   , seeing all the potential profi  t just waitin g for me, how could I not be? At that point, words like drawdown, risk o f ruin,  and emotional control   were not in myl vocabulary. But  massive profi  ts, eas y mone y,  and  simple trading  suddenly were! And with a money‐back guarantee, how could I go wron g? It was a risk‐free entry pass into a world of unlimited profi  t potential—or so my naive self‐thou ght. So I sent a chec k and dreamed that night about all the riches that would soon be fl  owing my way. A few weeks later, I received the full tradin g course. It was a hefty manual, full o f charts with profi  table examples. Initiall y, I was dul y impressed. But then I started to FIGURE 1.1   S ugar Skyrocketin g = Unlimited Profi  ts? 46-point rise in sugar in 5 months = $51,520 profit per contract www.rasabourse.com11THE BIR TH OF A TRADERlook a little closer at t he details. Turns out t he whole course was primari ly based on the 1‐2‐3 head and shoulders pattern. As most traders and investors know , this pat- tern is a classic chart pattern, as shown in Figure   1.2   . It is easy to fi  nd on just abou t any chart you look at—you can fi  nd a profi  table example or two on most any chart, any instrument, and an y time frame. The problem is that the head and shoulders pattern gives a lot of false signals and usually looks good only in hindsi ght. Of course, I did not know that at fi  rst. I only knew I could look at a chart, pick out the head and shoulders pattern, and see how well it worked. I eventually found out I was missin g two key pieces of the puzzle. First, when you look at a chart with a head and shoulders or an y other pattern in it, it is eas y to see the winning trades because you are looking at both the pattern and the outcome o f that pattern. If you try hidin g the outcome of a pattern, it becomes much more dif - fi  cult to fi  nd the good patterns. The second key I was missing is that the existence of a pattern, by itself, doesn’ t necessarily mean a trade should be taken. If you take every sin gle head and shoulders trade you see, you will soon be broke, as shown in Fi gure   1.3   . Of course, the naive wannabe trader in me was oblivious to this fact. After a month of dutifully followin g and paper tradin g all the head and shoulders signals, and fi nding most o f them to be unpro fi table, I sent a ll my tra ding recor ds, along with the manual, back for a refund. True to his word, Mr. Roberts refunded m y mone y. My dream of tradin g riches was shattered, at least temporarily. On the bri ght side, I now saw futures as t he way to go—I just rea lized head and shoulders patterns were not going to be the way. Once I abandoned the get‐rich‐quick idea with the 1‐2‐3 head and shoulders patterns, I did what man y scientifi  c, numbers‐oriented people do: I looked to mat hematica l formu las to help me in my decision ma king. And I started where many people do: movin g avera ges.    FIGURE 1.2   Good Head and Shoulders Pattern or Just a False Signal? Shoulder Shoulder Signal to sell shortHead www.rasabourse.com12 THE BIR TH OF A TRADER ■ My Movin g Avera ge Debacle I’m sure every trader or investor has seen or used movin g avera ges at some poin t in their trading career. Moving averages are a great way to see the general market direction, simplifyin g sometimes chaotic price action. But it comes at a price—la g. Movin g avera ges will always la g whatever their calculation is based on, which can be a major problem. There are many ways to trade with movin g avera ges. In the simplest method, you simply buy when the price is above the movin g avera ge, and sell (or sell short) when price is below the moving average. This scheme works very well during prolonged trends, but gets absolutely hammered durin g tradin g range price action (see Fi gure   1.4   ). Early market technician pioneers rectifi  ed this by employing two, or even three, movin g avera ges. By usin g more movin g avera ges, the idea was to fi  lter out some o f the tradin g range whipsaw trades, and leave the lon g‐term, profi  table trend trades. FIGURE 1.3       Many Head and Shoulders Look Good but Eventually Fail Head and shoulders failed Shoulder Shoulder Signal to sell shortHead FIGURE 1.4 Great in Tren ds, Moving Averages Fai l in Tra ding Ranges Dual moving average crossover system prone to whipsaw lossesDual moving average works great in trends www.rasabourse.com13THE BIR TH OF A TRADER After m y unsuccessful fora y into futures with chart patterns, I was struck b y the apparent awesomeness an d simp licity o f the trip le moving average. Loo king at a chart, it was easy to see t he pro fi table trades, w hile the unpro fi table whipsaw tra des were muc h harder to detect (see Figure   1.5   ). During t he whipsaw perio ds, the mov - ing average lines were very c lose toget her, an d seeing crosses o f lines was excee dingly diffi  cult. Obviously, I had learned little from my head and shoulders experience, where w hat I saw on t he chart was deceiving me. I quic kly became a convert to t he whole moving average concept, an d after a few quick success ful tests (I did not un derstan d the nee d for testing over hundreds of trades at t his point, so 10 or 20 tra des, compute d by hand, were goo d enoug h for me!), I decided to fund my fi rst account. Even t hough I had recent ly purc hased a condo in expensive sout hern Ca lifornia, w hich took most o f my savings, I was a ble to scrape toget her $5,000 to open an account. Natura lly, I was nervous beyon d belief. This was my nest egg, at t he mercy o f moving averages. In retrospect, t he insanity o f this is obvious, but at the time profi  ts were all I could see. I decided that my trip le moving average system wou ld wor k perfectly wit h live hogs, as t he contract was ca lled back then. I don’t reca ll if this was t he resu lt of test- ing, w here hogs looked the best, or i f it was based on margin requirements, wit h hogs requiring re latively sma ll margin. I suspect t he latter. I liked the lower vo latility of ho gs, too, especially when compared to other a gricultural products like soybeans and pork bellies. With my trust y calculator, t he daily newspaper, an d a sheet o f paper wit h fi ve columns on it, every mornin g before work I’d record the date, closin g price, and calculate the 4‐, 9‐, an d 13‐day movin g avera ges. Then, once I got to wor k, I’d call my broker and place an y necessar y trades. The fi  rst few days and weeks of my fi  rst tradin g system went fairly well. I los t more t han I ma de, an d I learne d fi rsthand about s lippage, broker’s errors, an d the FIGURE 1. 5       T r i ple Moving Average Crossovers Can Be Deceiving Trade locations are hard to see with many moving average crossovers www.rasabourse.com14THE BIRTH OF A TRADERgeneral ineffi   ciency of phoning in orders. But I was surviving, which I thought was the most important t hing. Then disaster struc k. I was long hogs, an d one mornin g, I was up $400. I was feeling great—t his was my tic ket to ric hes! At lunch, I spent a half‐hour tryin g to convince my ultra‐conservative and risk‐averse en gineerin g coworker Dave that speculatin g in commodities was easy for a technical‐minded person. Just a few cal- culations, some simp le mat h (no ca lculus require d), and poof! Money wou ld just a dd up in my account. He wasn ’t buying it, an d I won dered why. After lunch, I found out why. I checked ho g prices ri ght after lunch. I went from up $400 to down $800. A $1,200 swing in an hour or so. Twenty‐ fi ve percent o f my account vaporize d, just like that. I was num b. And I still had the position open since my system hadn’t given me a c lose signa l yet. A few days later, and a few quick whipsaw losers after the bi g loss, I totaled the damage: $1,500 in losses—30 percent o f my account. Never in my wi ldest dreams had I expected that outcome. Panic set in. I stopped trading temporarily. Thank goodness I avoided the ur ge to double or triple my size to aven ge my losses (such misguided dalliances would come later in my trading journey). I took the weekend to re group, and fi  gure out my next steps. Clearly, I mistak - enly thou ght, after a handful of trades, it was obvious that my triple movin g avera ge system was no good. If that system was terrible, my money‐losing‐addled mind rea - soned, then the opposite system would be the answer, ri ght? Sort of like the episode of  Seinfeld  where George Costanza fl  ourishes when he begins to do the exact oppo-d site of what he has always done before. It was a eureka  moment for me—if my fi  rst system was so bad, then the opposite system had to be just as good! Plus, I did not even need to test or evaluate this plan. All I had to do was add $1,500 to my initial account balance, instead of subtract it (for some reason, commission and slippa ge losses somehow became money makers in my twisted reasonin g, but that is another story). Sunday ni ght I went to sleep, in my mind thinking I had made $1,500 with my reverse trading system, when in ac - tuality I had lost $1,500 with the ori ginal system. I was excited and happy. Monday mornin g, I was ready to jump in with both feet. Fast‐forward a few weeks, and hogs fi  nally hit a great trend. It was a trend that a triple movin g avera ge system picked up perfectly. If only I were tradin g the ori ginal method! Of course, wit h the “opposite ” method, big tren ds were a killer, an d that is exactly what the market provided me—a hu ge losin g trade. After that losin g trade, my account was now down $3,000, a 60 percent account loss brou ght on by the triple movin g avera ge and reverse trip le movin g avera ge systems. I had had enou gh. I raised the white fl  a g, called it quits for a while, and decided I needed more education. www.rasabourse.com15                                                       CHAPTER   2 Enoug h Is Enoug h Before I continue with my saga of losing money trading futures, you might be ask - ing yourself, “Why was it so tough for this guy? I see ads every day for futures and forex trading, and it seems like any half‐brained nitwit can make money easily. Why is this Kevin guy such a loser?” Good question, but let me ask it a di ff erent way: “As - suming trading is that easy—that you can spend fi  ve minutes a day entering orders on your computer, while relaxing on a white sand Caribbean beach—why isn’t the person selling you this miraculous system for $99 doing the same thing? Why is he spending his time practically giving away his secrets, instead of just trading his own ever‐growing mountain of money? ” The answer should not surprise you: trading is tough, even for the so‐called gu - rus, most of whom are not gurus in any sense of the word. I’d estimate that over 90 percent of the trading systems for sale are junk (and I am being generous here— the actual number might be closer to 99 percent), marketed by people who fi  gured out that selling to newbie traders was far easier, and far more lucrative, than actually trading. The statistics you hear about 80 or 90 percent of traders losing money is no lie, and the reason is that trading is really, really diffi   cult. I hope that by reading about my trading journey and later learning about my trading process, you will get a sense of how challen ging it is. At the same time, you’ll come to realize that success in trading is possible but that there aren’t any shortcuts. ■ Research After my quick and disastrous initial foray into futures tradin g, with my subsequen t 60 percent loss in account va lue, I was scare d to tra de again. I a lso rea lized there was much I did not know , and that if I wanted to succeed in the tradin g “wars,” I needed www.rasabourse.com16 ENOUGH IS ENOUGHto bring more weaponry t han just a simp le moving average crossover. So I delved into just a bout any tra ding book I cou ld fi nd. I rea d the classics like Reminiscences o f a Stock Operato r  (George H. Doran Company, 1923) and  r Market Wizards  (New Yor k In- stitute of Finance, 1989), and newer get‐rich‐quick books by authors who probably never even traded. But re gardless of the book, I kept an open mind and just soaked it all in. After readin g probably at least a dozen books, I was very confused. Here is some o f what I learne d: ■   Stop‐losses are a must. Stop‐losses are only for losin g traders. ■   Entries are a ll that matter. Exits are a ll that matter. ■   Aggressive money mana gement is the key to riches. A ggressive money mana ge- ment leads to account failure. ■   Trend followin g is the best way to trade. Trend followin g is dead. I could go on and on, but you get the idea. For every tradin g “principle” espoused in one book, another book would claim the exact opposite was true. Which was right? Which was wrong? My head was swimming. But I kept on reading, gather - ing more information. Eventually, I concluded that all the books were ri ght, and all the books were wron g. For example, for certain styles of tradin g, stop‐losses were a great idea. But, for other methods, stop‐losses would only stop you from making money. A li ght bulb went on over my head with this concept: there is no one ri ght way to trade. What is important is to properl y evaluate the wa y I wanted to trade, whatever that might entail. After this “aha” moment, I went out and bou ght a database of daily futures prices and got myself some pro grammin g software. Rather than use an expensive piece of trading software (in the early 1990s, trading software was not very popular and it was relatively expensive), I decided to create my own back-testin g software, usin g Microsoft Excel and Visual Basic. I’ll spare you the details, but suffi   ce it to sa y that I had no trouble developing terrifi  c‐looking trading systems. Creating nice‐looking equity curves turns out to be a trivial task when you ne glect commissions and slippa ge. It is also easy to do when your system has 10 variables and you run 1 million iterations with various combinations of those variables. T ypical newbie mistakes, and I was repeatin g each one of them over and over. The only thin g that saved me was that the resu lts were so good, and profi ts were so astronomica lly high, even I did not believe them. I assumed it was bad data or m y software was fault y, but that wasn’t the root cause. The main problem was that I was testin g incorrectly. Because I felt my homema de systems were just “too good to be true, ” I luckily did not put any money into live tradin g these “Holy Grail” systems. Thank goodness I did not. Instead, I decided to abandon my testin g and head off   in a diff  erent direction. This was a ll because o f a book that sai d I cou ld not lose in tra ding. Naivet é at its fi nest! www.rasabourse.com17ENOUGH IS ENOUG H ■ You Can’t Lose—Or Can You? The book that temporari ly too k me away from met hodically testin g trading systems was You Can ’t Lose Tra ding Commo dities  (R. F. Wiest, 1988), by Robert Wiest. At t he time I rea d it in t he ear ly 1990 ’s, the book was a lready over fi ve years o ld, and I remem ber its being prominent ly displayed in a local bookstore. I assume d this mean t it must be a legitimate money maker to still be around after fi  ve years. This book was all about scale tradin g. The concept is that you fi  nd a commodity that is tradin g near a multiyear low , fi  nd a fundamental reason for it to go up in the near future, and then buy on a scale down and sell with a small profi  t. Here’s an example: let’s sa y whea t is currentl y at a 10‐ year low of 300 cents per bushel. You also hear forecasts the next wheat crop is going to be much smaller because of bad weather. Your analysis indicates that over the next 6 months, wheat is likely to go up. So you buy wheat at 300 cents, hoping to sell it at 305 cents ($250 profi  t per contract). If the price falls to 290 cents, you buy a second contract, hoping to sell that at 295 cents. You continue to add to your position every 10 cents down, with a profi  t tar get 5 cents above the correspondin g entry. Ideally, the price will fall a bit, allowin g you to buy three or more contracts, before it rises to 305, letting you exit with a profi  t on each contract. Then, if the price fell a gain, you’d just repeat the process, scalin g in and scalin g out. The author claimed somethin g like 90 to 95 percent wins with this method, which is entirely possible. But winning percentage is really meaningless. What matters is the return on account, and the drawdown. And, when done correctly, scale tradin g produces fairly low rates of return (10 to 20 percent), with fairly hi gh drawdowns (20 percent or more). This is because you need a lot of capital to keep buying on the way down. If you don’t have enou gh capital, you won’t be able to continue buyin g. Then you won’t be able to cash in on the lucrative oscillations in price. Eventually, i f the situation gets dire enou gh, you’ll be hit with a mar gin call, and your scale tradin g will likel y abruptl y end. Even with the drawbacks in the approach, scale trading appealed to me on an in - experienced trader level. All I had to do was fi  nd commodities near multiyear lows and set up scales to trade them. I knew I would not be satisfi  ed with onl y 10 to 20 percent return, so I had to make some adjustments, the main one being trading with a much smaller than recommended account size. This worked great the fi  rst year I did it. I ended the year with about 90 percent annual return, all from scale tradin g. They say early success in an y fi eld leads to eventua l disaster, an d that is w hat hap- pene d to me wit h scale trading. A fter a 90 percent annua l return t hat fi rst year, I con- cluded I had this tradin g thing all fi  gured out. Losses would be small and infrequent, but the cas h register wou ld keep rin ging as I cas hed in sca le‐tra ding winner a fter winner. O f course, t he mar ket slapped me aroun d, and slapped me hard, for thinking this way. I don’t even recall which commodity was the source of pain—it mi ght have been wheat, corn, cotton, or coff  ee—but one of m y second‐ year scales went terribl y www.rasabourse.com18 ENOUG H IS ENOUGHbad. I lost all my fi rst year ’s pro fi ts, an d most o f what was left in my account. For me, the book title  You Can’t Lose Tradin g Commodities  should have been “When You Ignore Simp le Directions, You Can Lose a T on Tra ding Commo dities! ” Nee dless to say, I was done wit h scale trading. ■ Averag ing Down—A dding to Losers Althou gh I abandoned the scale‐tradin g approach, I was intri gued with the idea o f adding to my position as t he price went against me. W hen this occurre d, which was frequent ly, I cou ld buy even more at a c heaper price! T hen, w hen I was inevita bly proven to be correct in my mar ket ana lysis, I wou ld gain even more pro fi t. I had al- ready done the same thin g with mutual funds throu gh automatic investments; I’d buy more s hares as t he price fell, getting a better deal on the asset. The whole approac h soun ded too goo d to be true, an d of course it was. A dding to a losin g position works with mutual funds because (1) over time, mutual funds almost always go up eventually, and (2) mutual funds are not leveraged. With futures like wheat (my personal favorite for the addin g‐to‐losers strate gy), the price doesn’ t necessarily have to go up over a 5‐ or 10‐year period. Price could stay depressed for a long time, leaving you with a pile of open, losing trades. Plus, for every wheat con - tract you purchase, you need extra mar gin, and eventually even small price moves become hu ge swin gs in your equity. That is what happened to me. The year was 1998. For some crazy reason, I was convinced that wheat was due for an increase. In mid‐1998, wheat was at a fi  ve‐year low (see Fi gure   2.1   ). Based primarily on that fact, alon g with some cursory fundamental analysis, I decid - ed that wheat was on its way up to mid‐1996 highs. So I bought wheat. The price wen t down. I bou ght more wheat. The price went down some more. This went on from May to September, and every time I bou ght another contract, I du g myself deeper in a hole. FIGURE 2.1   In 1998 , Wheat Was at a Five‐Year Low Wheat at a five-year low www.rasabourse.com19ENOUGH IS ENOUG H If the price of wheat kept fallin g, I knew it wouldn’t be lon g before the mar gin calls would start arrivin g. Psyc hologically, I cou ldn’t accept t hat, so instea d I’d run to t he bank at lunch once or twice a wee k, and have $1,000 to $5,000 wire d to my tra ding account. Some how, I t hought this was a better option t han getting a dreaded margin call. I did this so many times—skippin g lunch, speedin g to the bank, speedin g back to work—that I had my own personal wire transfer lady at the bank. Her name was Cookie, an d in those many trips to wire money, I learne d a lot about her family, her grandkids, and her life. I even gave her little gifts and toys for her gran dkids. At t his point, alarm bells that should have been screechin g were silent—wasn’t it stran ge that I thought this constant wiring o f money to a drowning tra ding account was a goo d idea? Luckily, starting in t he beginning o f Septem ber 1998, t he price o f wheat began to re bound. No more wire trans fers! In fact, by mid‐Octo ber, I was getting c lose to breakeven. I started buyin g more contracts on the way up, further levera ging myself. I was convince d, though, that the low was in, an d if that were true, s houldn’t I be buying? All told, I was down about $20,000 on the trade now , which was huge con - siderin g my account size. But the price was up, and I was lookin g to be kin g. Then came October 13, 1998 (see Figure   2.2   ). I remember October 13, 1998, for good and bad reasons. I was in Seattle on business, and after the market closed, I saw that wheat had gone up 6 points! Plus, my hometown baseball team, the Cleveland Indians, were in the American League Championship Series a gainst the dreaded New York Yankees. I watched Game 6 from my hotel room, and in the fi  fth innin g, Jim Thome of the Indians hit a grand slam. Things were looking up, I thought. My Indians are going to win, and wheat is going up. Somehow , my mind linked the fate of wheat and the Indians to gether. Of course, you can guess how this story ends. The next innin g, the Yankees scored three runs, and the Indians lost and were therefore eliminated from the postseason. Wheat also slowly and surely fell in price, and with the extra contracts I bou ght durin g the previous up le g, even a small correction was a killer. By the be ginnin g of FIGURE 2.2   My Last Gasp with Avera ging Down in Wheat Capitulation, exit long tradeI bought heavily, as price dropped www.rasabourse.com20 ENOUGH IS ENOUGHDecem ber, I was down a bout $70,000 on t hat tra de alone an d out o f funds I cou ld wire to my account. Coo kie wou ld have to get toys for her grandkids from someone other than me, because I was done tra ding. At least for a year or two. ■ The Wild Man Emer ges After my averaging down approac h misera bly failed, I spent t he next coup le of years doing only minor tradin g, focusin g on rebuildin g my tradin g funds. When I had enou gh spare ca pital, I turne d to w hat I ca ll the “wild man ” approach. Wit h this approach, I did not nee d to test or eva luate any i dea before tra ding rea l money wit h it. If I got a brilliant idea that co ff ee should go down, I’d sell it. If OPEC was discussing stricter quotas, I’d buy crude oil. No real rhyme or reason to my method—just crazy tradin g based on whatever rumor I heard or w hatever t hought fl oate d into my brain. I trie d to keep losses sma ll and winners big, but for some reason doing t hings t he other way aroun d was psyc hologica lly muc h easier. P lus, I sti ll emp loyed some tric ks from my ear lier trading, such as adding to losers. I’m sure my broker liked me, but my account equity did not. My account treaded water with this haphazard approach, but after a while I knew there was no future in it. Yet I still followed this approach, if you can call it that, until the fateful mad cow trade I discussed earlier. That trade and all the circumstances surroundin g it were a cold slap in the face. I desperately needed to trade di ff erently. ■ Time to Evaluate As 2004 started, I was still licking my wounds from the live cattle/mad cow debacle. I took a lon g, hard look at my tradin g, and I did not like what I saw: ■   Movin g avera ge crossover system—lost money. ■   Reverse movin g avera ge crossover system—lost money. ■   T ested thousands of systems—results too good to be true, never traded. ■   Scale tradin g—lost money. ■   A v e r a ging down—lost money. ■   Wild man approach—lost mone y. Almost no matter w hat I did, I lost money at it. T he deceivin g part was t hat for a while many of these methods would work, giving me an extra boost of irrational confi  dence before the inevitable fall. The extra confi  dence reall y just made the re - sulting crash tougher, both emotiona lly and fi nancia lly. Yet when I looked at my history, I saw the one bri ght spot: I did have success developin g, but not live tradin g, mechanical tradin g algorithms. The problem was www.rasabourse.com21ENOUGH IS ENOUG Hthat I did not know i f it was because I actua lly had good systems, or i f good resu lts were t he resu lt of a fl awed testin g process ( bad data, overoptimization, bad program- ming, etc.). I decided in ear ly 2004 t hat this was my c hance to become consistent ly profi table—I had to develop an d test mec hanica l algorithms. Most of the fi  rst half of 2004 was gettin g thin gs in place—investi gating tradin g ideas, lookin g at software options, determinin g how to do walk‐forward testin g manua lly. For my strategy, I decided to go wit h a simp le X day close breakout; that is, i f the close to day is t he highest c lose o f the last X bars, t hen buy at t he open of the next bar. For short entries, it was vice versa. For exits, I employed a simp le stop based on average true range, a fi xed dollar stop, a moving stop as profi ts accumu lated, and a tig htening stop t hat app lied only when a big open pro fi t occurre d. It was a pretty simp le system, but my initia l resu lts showed it wor ked well. Nothin g earth shatterin g about this strate gy’s entries or exits—I am sure this approac h was been app lied by many peop le before. It is just a simp le tren d‐ following approach, and as long as some sustained trends develop, the system overall will make mone y. Even though up until this point I had used back‐test software I had developed myself, I decided that I did not fully trust the results. I obtained a copy of Trade - Station software, which at the time was probabl y the best and most popular (man y people say it still is the best, and I still use it as my primary tool, but there are many other excellent back‐test pro grams available on the market today, too). In addition to makin g the testin g easier, I had much more faith in the results. The only problem was that I wanted to utilize walk‐forward testing (discussed in great detail later), and TradeStation at the time did not support that feature. So I was rele gated to run - ning optimizations on TradeStation, then computin g results and manually perform- ing a walk‐forward analysis. It was tedious work, but at the same time it gave me a solid sense of how walk‐forward testin g actually worked (I su ggest your fi  rst walk‐ forward test be done manually to increase your understandin g.) By the last quarter of 2004, I had a system I felt was ready to trade. I stuck my toe in the water, makin g a few trades with the system, and found that the results matched the back test pretty well. Full‐size tradin g of my new system would be gin in 2005. As 2004 ended, after more than 10 painful years of trying di ff erent ap - proaches, and eventually failin g with most, I fi  nally saw the proverbial li ght at the end of the tunne l. Thankfully, it wasn ’t a train comin g at me! I had a teste d method that worked with real money, and I wanted to shout from the mountaintop, “I am a good trader!” Since I live in Ohio, where mountains are a rarity, I did the next best thin g: I entere d a pu blic, wor ldwide trading contest. Actua lly, I had entere d the contest in 2004, but I used a pseudo mechanical, mostl y discretionar y system that did well for a while, but eventually fell apart. But this time, I’d be armed with a good mechanical approac h and hopefully not em barrass myse lf. Wit h that fateful decision, my tra ding adventure continued . www.rasabourse.comwww.rasabourse.com23 Based on the work I had completed in 2004, I thought I had a viable trading strategy. Of course, I wanted to share my “success” with the world but at the same time not give away the strategy. So I did the next best thing: I entered a public trading contest. For those of you who have never heard of it, the World Cup Championship o f Futures Trading, sponsored by Robbins Trading Company, is the premier worldwide, real money, year‐long futures trading contest. It attracts some of the best and bright- est traders from around the globe, all matching wits and pitting strategies against each other. It is a hi gh‐pressure contest, with results constantly posted for all to see (back in the old days, resu lts were pu blished mont hly in tra ding magazines; now t hey are updated dail y on the World Cup web site: www .worldcupchampionships.com). In 1987, legendary tra der Larry Wi lliams turne d $10,000 into over $1.1 mi llion in that contest. That gives you an idea of the caliber of traders who competed. Once I had my mind set on enterin g the tradin g contest, I had to make sure my system was good enou gh. Loo king at the per formance o f past winners, I conc luded that I had a reasonable chance of fi  nishin g in the top three contestants, as lon g as I had an annual return of 100 percent or hi gher. That was actually my goal; it wasn’t                                                        CHAPTER   3 World Cup Championship of pp Futures Trading pp ® Triumph www.rasabourse.com24 WORLD CUP CHAMPIONSHIP OF FUTURES TRADIN G® TRIUMPHto win t he contest, since I rea lized that at t he upper en d of performance, luck would play a ro le. I cou ld not count on luck to win t he contest; a ll I cou ld do was set m yself up to be near t he top. T o ac hieve 100 percent return over t he course o f a year, I knew I had to accept a very lar ge maximum drawdown. I decided I would allow around 75 percent maximum drawdown, which would be ridiculous for an y normal trader’s account. But, as I’ll discuss in great detail later, your goals and expectations s hould be based on t he situation at hand. For a tra ding contest w here the only success criterion was return on account, a llowing a large drawdown ma kes sense. If, however, the contest were based on return and risk (say the winnin g con- testant wou ld have t he highest Ca lmar ratio), I wou ld have approac hed the contes t completely di ff erently. This will be discussed in detail later, but for now realize the goals and objectives I set at t he outset dictate d every su bsequent step in t he trading develo pment process. As previous ly mentione d, I had developed a decent tra ding strategy in 2004. I t actually would have been good enough to fi  nish in second or third place in the 2004 contest, but, of course, I wasn’t read y to enter at that point. However, I was read y for 2005 with the following system: Entry Buy next bar after 48 bar hi gh close (vice versa for short), as lon g as the 30‐bar RSI was greater than 50 (less than 50 for short trades). Exit Calculate sto p based on: Fixed dollar value ($1,000) Y * avera ge true ran ge from entry Z * avera ge true ran ge from entry (profi  t tar get) Other Rules (based on my psychology, I felt I needed these ) If last trade was a loser, wait 5 bars before enterin g next trade (minimizes whipsaws). If last trade was a winner, wait 20 bars before enterin g next trade (be patient after wins). The system utilized daily bars for all tradin g signals, which was perfect for some - one wit h a full‐time jo b, like me. Eac h night, I cou ld simp ly review my c harts, p lace any orders for the next da y, and then not worr y about the intrada y variations. It was the ideal setup, as my time to check on my positions durin g the day was limited. For mar kets to tra de, I had a basket of nine futures t hat I looked at: ■   Corn ■   Cotton www.rasabourse.com25WORLD CUP CHAMPIONSHIP OF FU TURES TRADING® TRIUMP H ■   Copper ■   G old ■   S ugar ■   5‐ or 10‐ year Treasur y notes ■   Coff  ee ■   Japanese yen ■   N ikkei Index I selected these for their past per formance, t heir re lative ly low margin require - ments, and their general lack of correlation to each other. Lookin g back on this, though, I rea lize I ma de two pretty big roo kie mista kes. First, w hen I teste d my system, I tested over 20 to 25 di ff erent instruments. Then, upon seeing the actual performance, I simp ly selected the best per formers. In ot her wor ds, I optimize d based on market! That is a big no‐no for good strategy development. For my second mistake, I did not run any detailed correlation studies when selectin g the portfolio. Rather, I simply guessed at what I thou ght the correlation should be (“Corn and the Nikkei Index are probably not correlated, so I can trade both.”). At the time, this seemed reasonable, but my experience since that time has tau ght me that cor - relations sometimes are diff  erent than what common sense dictates , and should always be examined in a portfolio situation. Even then, it is important to realize that even noncorrelated instruments can become correlated durin g market panics. Thankfully, in spite of my rookie development mistakes, my tradin g approach still succeeded. Since m y capital was limited (I started each year with a $15,000 account), I could only trade one contract of each instrument. Occasionally, I had to skip a si gnal here and there, if I did not have enough available margin. At all times, I tried to trade as “fully loaded” as I could, usin g up as much purchasin g power as I could while still avoidin g margin calls. My plan was to take every si gnal and follow the system as bes t I could, within the constraints of my available capital. Here is how I performed, and some of my thou ghts, in each of the years 2005 through 2007. ■ 2005 My equity chart for 2005 is shown in Fi gure   3.1   . After the fi  rst month of 2005, I was slightly down. Hu h? I was going to ta ke over t he trading world with this strate gy, and yet I was losin g money? It seems like this always happens to me—as soon as I star t tradin g a strate gy, it starts losin g money. I was mentally crushed. I was down only www.rasabourse.com26 WORLD CUP CHAMPI ONSHIP OF FUTU RES TRADIN G® TRIUMPH 4 to 5 percent, but still it is always nice to be gin the year with a ban g. Thankfully, by mid‐April thin gs were lookin g up. I was now up over 30 percent for the year, which would translate into a 120 percent return for the year. I was on fi  re! Everything was workin g accordin g to plan. Of course, just like an y Holl ywood movie, the stor y has to have a dark period. For me, that was a four‐month drawdown from mid‐April to mid‐August. Not only did it last a lon g time, but it also was severe—over 40 percent drawdown. At the lowest point, I had pretty much given up winnin g the contest or even comin g close to winning. But I stuck to my plan. I was still trading the system as best I could, bu t I had to skip a few trades because of mar gin concerns. That summer was defi  nitely a “bummer da y ’round here” for m y contest account. Thin gs started to improve in mid‐June, and althou gh it would take a few months to reach a new equity hi gh, by mid‐December I had almost tripled my account. A coup le of nice tren ds in Japanese yen an d copper in Septem ber 2005, an d a co f- fee trend in November reall y helped the account take off  . That is reall y how trend tradin g works—you can have months of fl  at to down performance, but catchin g a coup le of tren ds can ma ke your w hole year. T he pro blem, o f course, is t hat if you miss the trend trade—let’s say you give up before the trend shows itself because of the numerous false breakout losses, or you don’t have enou gh money in your account to ta ke every tra ding signal—your per formance wi ll be dismal. Because  FIGURE  3.1My Equit y Chart, 2005 Wor ld Cup Contest Account 2005 Results Contest position Second place Return Max Drawdown Return/Drawdown148% 42% 3.5 www.rasabourse.com27WORLD CUP CHAMPIONSHIP OF FU TURES TRADING® TRIUMP Hof this, trend tradin g is not for everyone, as it can be so psycholo gically diffi   cult to follow. When I hit my pea k equity in mi d‐Decem ber 2005, I knew I was in goo d shape for the contest, for eit her secon d or third place. First place was out o f the question, as the contest leader, Ed Twardus, was up over 250 percent for the year. With m y con- fi  dence ridin g high, I did violate my system toward the end of the year, when I added on to a losing position in co ff ee. At the time, I was aiming for a 200 percent return, and apparent ly old habits die hard, since I was resorting to averaging down once again (will I ever learn?). So the last two weeks of December I gave back a chunk o f equity. Lesson learne d again: don’t add to losers! ■2006 After my success in 2005, I rea lized that I had a goo d strategy, an d if I tra ded it cor - rectly, without emotion, I’d probably do okay in 2006. The problem with a public tradin g contest, of course, is that it is embarrassin g when one month you are in the top three fi  nishers, and the next month you are out of the top three. Worse yet is when you fi  nd yourself ri ght behind the lead trader. When that happens, it is very enticin g to take a few fl  yer trades to catch that person. I tried that back in 2004, in an ill‐fated attempt to catch eventual winner Kurt Sakaeda. Not that I had any chance, by the way: Kurt fi  nished the year up 929 percent, a terrifi  c performance. Yet he always remained very humble about his performance (a great characteristic for a trader). As tradin g in 2006 be gan, I had hi gh hopes, a solid plan, and a clear head. My performance in 2006 is shown in Fi gure   3.2   . Unlike 2005, the fi  rst month of 2006 was great for me. I was up about 30 percent, and I felt great about my chances. O f course, whenever I feel great about my tradin g, a drawdown is ri ght around the corner. That happened in February and March and brou ght me back down to break - even. A couple of losing trades in yen and 10‐year Treasury notes helped bring me back down to earth . But in the midst of this drawdown, in mid‐Februar y, I would enter the trade tha t changed everythin g for me: I went lon g copper, as shown in Fi gure   3.3   . I held tha t one trade (actually two separate trades, after accountin g for rollover) from February 17, 2006, to Ma y 1, 2006, an d it pro duced a net pro fi t of $28,875 per contract. I t was one of those once‐in‐a‐blue‐moon‐t ype trades, where the market just takes off  , with me holdin g on for the ride. My account value on May 1 was $45,122, so tha t meant t hat one copper tra de was responsi ble for over 95 percent o f my profi t for the year. At the be ginnin g of May 2006, bein g up 200 percent already in the contest gave me a eup horic feeling. Litt le did I know t hat was my pea k for the year, an d the rest www.rasabourse.com28 WORLD CUP CHAMPI ONSHIP OF FUTU RES TRADIN G® TRIUMPHof the year would be a slow downhill slide. Durin g the rest of 2006, I still traded the system as planned, and I still traded onl y one contract for each trade. I probabl y should have traded larger size, since my account had tripled, but part of me was scared that I’d give back my profi  t. That turned out to be a good decision, since most of the next seven months were net losers . T oward the end of the contest , I also had to contend with Michael Cook , a worthy opponent in second place. Althou gh I knew the guidelines about jus t focusin g on your own performance and not worryin g about the other traders, I  FIGURE  3.2My First‐P lace Equity C hart, 2006 Wor ld Cup Contest Account 2006 Results Contest position First place Return Max Drawdown Return/Drawdown107% 40% 2.7 FIGURE  3.3       Copper S kyrocketed, and I Was Long $28,875 profit in 2.5 months BuySell www.rasabourse.com29WORLD CUP CHAMPIONSHIP OF FU TURES TRADING® TRIUMP Hhad heard how good a trader he was, and I was scared of fallin g behind him—so scare d, in fact, t hat I s hut my tra ding down at t he start o f Decem ber. Part o f this was warrante d (just look at the previous six mont hs of poor per formance), but part o f it was because I t hought I’d make Mic hael beat me, instea d of me losing to him . The ironic thin g about my ceasin g tradin g in the month of December, to preserve my eventua l victory, is t hat that is not how I remem ber tra ding t he contest years later. In my min d, I stuc k to t he system t he whole year an d traded per t he plan up until the last day. I’m sure in public webinars and writin gs I have said the same thing—t hat I never stoppe d trading just to stay in fi rst p lace. Yet t hat is exact ly what I did! And that disturbs me now . No, not t hat I cease d trading, but that I remem ber a diff erent reality. When that happens in trading, it is usually a bad thing. A good trader will remember thin gs as they actually occurred, not as they fondly, but incorrectly, remem bered. Even with the six‐month drawdown at the end , I was still able to fi  nish in fi  rs t place in the contest. I felt validated—all those years of stru ggle had fi  nally paid off  . Now the question was: could I repeat that performance in 2007? ■2007 After fi  nishing in second place in 2005 and fi  rst place in 2006, I somehow felt tha t I had broken throu gh, and now tradin g would be easier for me. Of course, the lesson I learned was that tradin g is never easy, and it is always a stru ggle. An enjoy - able struggle, sure, but a struggle nonetheless. As 2007 began, I began the contes t with hi gh hopes. Also, I decided to trade two contest accounts (one crashed and burned), and try some little modifi  cations to my core strate gy. After all, I was still a bit spooked by the last six months of 2006, wondering how long my original system would suff  er. Unfortunately, just like 2005, I started out in the wron g direction. My 2007 performance is shown in Figure   3.4   . Losing trades in just about every instrumen t plagued my eff  orts, and by the end of March I was starin g at a 50 percent drawdown. By mi d‐May, due to some nice tra des in oran ge juice an d lean hogs (mar kets I a dded as part of m y modifi  cations), I was back to breakeven, where I’d remain for the next few months. In late summer an d fall 2007, nice tren ds developed in Swiss franc an d 30‐ year T‐bonds, and I rode them accordin g to my system’s rules. By the end o f the year, I was up over 100 percent a gain, which was good enou gh for second place. Mic hael Coo k, the tra der I had been watc hing in my rearview mirror the last part of 2006, raced past me in 2007, finishin g the year up a whoppin g 250 percent. www.rasabourse.com30WORLD CUP CHAMPI ONSHIP OF FUTU RES TRADIN G® TRIUMPH  ■ Reﬂ ections on the Contest After fi  nishin g fi  rst or second three years strai ght in the World Cup of Futures Trading Championship, each time with over 100 percent return, I felt pretty good about my tradin g. T o me, it did not prove I was a good trader, but rather it rein - forced for me the importance of settin g goals and objectives. Since I had devel - oped my trading system to give me a chance to win the contest, I now realized that without goals and objectives established up front, the contest could just be considered gamblin g. As you will see later in the book, goals and objectives are a key part of what I do. After my second‐place fi  nish in 2005, I wanted to let my informal mentor, marke t wizard Dr. Van Tharp, know of m y success. I felt a bond to Van, as I had taken man y of his home stu dy courses an d read most o f his books. He was t he closest t hing to a mentor I had ever had. I was prou d of myse lf, and I wante d to thank him. He was proud of m y success, to be sure, but he also said this: “And although Kevin has been tra ding and learnin g for 15 years, most peop le [who] win in tra ding contests are doing some very dangerous t hings wit h position sizing. So notice your reactions. Are you impressed with the people [who] win competitions? Or is your gut reaction to learn more about how to trade eff  ectively in any mar ket—an d just stay in t he game! ”  FIGURE  3.4My Equity C hart, 2007 Wor ld Cup Contest Account 2007 Results Contest position Second place Return Max Drawdown Return/Drawdown112% 50% 2.2 www.rasabourse.com31WORLD CUP CHAMPIONSHIP OF FU TURES TRADING® TRIUMP H It took me a lon g time to understand what Van meant by this comment, with my fi rst reaction being anger (“how cou ld someone not be impresse d with my success? ”). Eventua lly, though, I rea lized the wis dom in Van ’s wor ds. The impressive t hing is not winnin g a contest— luck, recklessness, an d a host o f other things can in fl uence the fi  nal results. The impressive thin g is to trade the contest eff  ectively. For me, that meant followin g my system, the one developed specifi  cally to avera ge abou t 100 percent annua l return. So don’t be impresse d with the performance itse lf. I’m certain ly not. W hat I am impresse d with is my discipline in seeing a goa l, chasing it, and realizin g it. That, to me, is the real success. www.rasabourse.comwww.rasabourse.com33 It is the dream of every part‐time, retail trader—one who loves all aspects of trading— to trade for a living, full time. At least that was always my goal, to live the dream. Trader Gar y Smith wrote a book with just that title:  Live the Dream by Profi  tably Day Trad - ing Stoc k Future s  (Advanced Trading Seminars, 1995). The dream, of course, is whipping s the markets every day with your amazing strategies, taking as much money out of the market as you need (Want a new car? Simple—just double the size of your next trade!), spending your ample free time playing with your kids or doing volunteer work, or the typical stereotypical behavior: lounging on the beach, margarita in your hand, as bikini‐ clad women (or hunky guys, if that is your preference) stroll by on your private island. The problem is that the dream is rarely, if ever, reality. The truth is that trading full time, as I tell many people, is in my opinion “the toughest way to make easy money. ” But that does not mean it cannot be done; it just means it is incredibl y diffi  cult. An y- thing great worth attaining is always di ffi  cult, right? After about 15 years of part‐time tradin g, quite a lot of unsuccessful tradin g, I had 3 consecutive years o f contest‐winnin g performances. As 2007 en ded, I began to serious ly consider tradin g as a full‐time profession. After all, if I could not succeed at it, after all I had been throu gh and all I had accomplished, who actually could? So in early 2008, I decided to take the plunge, and trade full time for a living. I thought I had it fi gured all out when I started tradin g full time. Boy was I wron g! I jumped into full‐time tradin g doin g some thin gs, some thin gs wron g, and many thin gs I’d do diff  erently if I had to do it over.    Making the Leap— Transitioning tog Full Time                                                         CHAPTER   4 www.rasabourse.com34MAKIN G THE LEAP— TRAN SITIONIN G TO FULL TIME ■ Conﬁ dence Even t hough you nee d many t hings to succee d at tra ding (capita l, strate gies, computers, etc.), se lf‐confi dence wi ll infl uence your long‐term success in full‐time tra ding more than most ot her things. It too k me a long time to fi gure out t hat most o f my tra ding success an d failure wasn ’t due to having t he fastest computer or having t he Ho ly Grai l of strategies. Rather, the confi  dence in my trading abilities, the confi  dence in my strate gy development, the confi  dence in my never failin g optimism in the face of harsh drawdowns would help me survive as a trader. Obviousl y, confi  dence alone will no t get you there—regardless of what some trading gurus might say—but at some point, you’ll need confi  dence to weather a trading storm. Be it a major drawdown, many failed strate gies, or an inability to develop new approaches, sooner or later confi  dence in your abilities will be required to get you through the tough times. After three years of trading contest–winning success, I felt I had confi  dence to succeed. After all, staring each day at three trading trophies (Figure   4.1   ) helped me feel like I was invincible. What I Did Ri ght I had enou gh confi  dence to think I could succeed at full‐time tradin g. What I D id Wron g I probably had too much confi  dence when I be gan tradin g for a livin g. After all, win - ning a tradin g contest is nice, but did it really mean I could trade full time? Now , I o f course realize this. Back then, I equated contest success with full‐time success. Tha t was a dan gerous way of thinkin g. ■ Capital I’m sure you’ve heard the stories of people who started with $1,000 and parlayed that into a lucrative full‐time tradin g career. I’m equally sure that for every one o f those people, there are probabl y 999 who started with that amount and failed. After FIGURE 4.1 My Contest Trophies www.rasabourse.com35MAKING THE LEAP— TRANSI TIONING TO FULL TIMEall, as I’ll demonstrate in a later chapter, bein g undercapitalized is the easiest road to ruin, w hether or not you have a great tra ding strate gy. Even a breakeven strate gy will lead to ruin i f your bankroll is sma ller than your opponent ’s. The exce llent book Chances Are … Adventures in Probabilit y  by Michael and Ellen Kaplan (Viking Penguin, y 2006) describes this ver y well: Let’s ima gine some Buddhists opened a casino. Unwillin g to take unfair advantage of anyone, the management o ff ers a game at completely fair odds: fl ip a coin against t he bank and win a dollar on heads, lose a dollar on tai ls. What wi ll happen over time? Wi ll the game go on forever or wi ll one p layer eventua lly clean out t he other? One way to visua lize this is to imagine t he separate moment w hen the gam bler is down to his last dollar. Wou ld you agree t hat his chance of avoidin g ruin is exceedin gly small? Now increase the amount you imagine in his poc ket an d correspon dingly reduce t he bank’s capita l; at what point do you think than gambler’s chance of bein g ruined equals the bank’s? Yes: when their capital is equal. Strict calculation confi  rms two grim facts: the game will necessarily end with the ruin of one party—and that party will be the one who started with the smaller capital. So even when life is fair, it isn’t. Your chances in this world are proportional to the depth of your pockets—the house wins by virtue of bein g the house. Of course, you mi ght protest, “But I have an ed ge, therefore I’ll win in the lon g run.”   While that is true, remember your edge is likely small, and it probably will not last forever. Over time, it will likely re gress to breakeven, and that means your account size becomes critical. Can you outlast your opponents? What I Did Ri ght I started full‐time tradin g with a low‐six‐fi  gure account, althou gh I kept some o f that out of tradin g accounts, eff  ectively “in reserve.” I felt I was reasonably well capitalized. What I Did Wron g Based on my startin g capita l, I had to ma ke 50 to 100 percent annua l returns just to pay livin g expenses, taxes, and sli ghtly increase my tradin g account. Wow! Lookin g back on that , I realize I was insane and started with about 10 times less than I should have. Anot her full‐time tra der friend once to ld me t hat ever y success ful trader he knew started with $2 to $3 million before embarkin g on full‐time tradin g. As crazy as that amount sounds (I would have scoff  ed at it six years a go when I started full www.rasabourse.com36MAKING THE LEAP—TRANSITIONING TO FULL TIMEtime), I now believe it is reasona ble. After all, you want your tra ding account to grow over time, an d you want to draw living expenses from it, an d at the same time you need to survive t he inevita ble drawdowns. It is near ly impossi ble to accomp lish all three on a shoestrin g‐sized account. ■ Living Expenses When I starte d full-time tra ding in 2008, I was fortunate enoug h to have t hree to fi ve years o f living expenses save d up. T hat savings was not part o f retirement, an d was not part o f my tra ding capita l. I think those are t he key issues to living expenses when em barking on full‐time tra ding. Trading is stress ful enou gh without worryin g about w here your next mea l or mortgage payment is coming from. You nee d to feel secure t hat your expenses are covere d, even i f you hit a drawdown rig ht from t he start (which always seems to be the case for me!). What I Did Ri ght Due to years of savin g money, and a lucrative chan ge‐of‐ownership a greement I had at work, I could easily cover living expenses for quite a while, even with a growing family. Knowin g that allowed me to focus on my tradin g 100 percent. What I D id Wron g Nothin g. I think havin g three to fi  ve years of livin g expenses in reserve was a great decision. ■ Famil y Support I am probably in the minority, but I had (and still have) a loving spouse who was totally on board with my dream of tradin g full time. For us, this meant my giving up an upper mana gement position in the aerospace industry, where the sky—no pun intended— was the limit. But she realized that my heart just was not in giving up my soul to a ruthless corporation, that I was destined for better thin gs. My children also suppor t my tra ding, and since t hey are youn g, it is rea lly the only “job” they have ever seen me do. The y understand when it is pla ytime, and when Dad has to work. It does seem to them—and to me, too—that it is a lot of the latter and not enou gh of the former. What I Did Ri ght I marrie d the right person, someone w ho understoo d and supporte d my tra ding 100 percent. Now , after six years of full‐time tradin g, she is still fully committed to my journe y, and so are m y three children. www.rasabourse.com37MAKING THE LEAP— TRANSI TIONING TO FULL TIME What I Did Wrong I pretty much nailed this ri ght on. I shudder to think how much more di ffi  cult full ‐ time tra ding wou ld be wit hout a supportive spouse an d family . ■ Home Ofﬁ  ce Setu p T o save on expenses, I decided to tra de right out o f my house, in a dedicated home offi  ce. The distractions are many, especially with three young children now running aroun d. Sometimes my wor k gets buried in a pi le of crayon drawings, an d sometimes an overea ger child will accidentally close a spreadsheet without savin g it fi  rst. Plus, my o ldest even p laced a few mini S&P tra des on my open tra ding p latform. At least his trades made money! Overall, though, I can’t complain, when rush hour traffi   c for me is merely needin g to dod ge a few Le gos on the stairs. What I Did Ri ght I created a dedicated offi   ce for my tradin g business. What I Did Wron g I probably should have established fi  rmer boundaries, such as no touchin g Dad’s computer. But most of the time, intruding children are no problem. ■ Trading Strateg ies When I started full‐time tradin g, I had about three to fi  ve strate gies I felt comfortable going live with. Unfortunately, I did not have any extra strate gies waitin g in limbo, ready for trading when some of my fi  rst group of strategies lost their performance edge. Back then, I naively thou ght I could trade the same strate gies forever. Now I realize tha t some strate gies burn bri ght, like stars in the sky, for a lon g time. Others, thou gh, are more like shooting stars—you need to stop trading them before they crash to earth. What I Did Ri ght I had multiple strate gies to tra de. Even from t he beginnin g, I knew it was a bad idea to rel y on just one particular method. What I Did Wrong If I were startin g full-time tra ding today, I’d make sure for every strate gy I too k live, I had at least one good strate gy ready to take its place. Plus, I’d make sure I had a lon g list of potential strate gies to test and evaluate. www.rasabourse.com38MAKING THE LEAP—TRANSITIONING TO FULL TIME ■ Brokers Just like any ot her aspect o f trading (computers, Internet connections, strategies, etc.), it is crucia l that you have a backup for your broker. I don’t mean having a backup phone num ber for the trade desk (which you defi nitely should have handy, by the way). I mean having mu ltiple accounts at mu ltiple brokers, i deally having dif- ferent clearing fi  rms. Brokers do fail from time to time (I was a victim of Refco’s bankruptcy and of PFG Best’s corrupt owner), and by havin g multiple accounts, you can still trade even if one broker goes down. Since I trade multiple strategies, it also makes bookkeeping a bit easier, since many times I’ll dedicate one strategy to one specifi  c account. What I Did Ri ght I had multiple brokers, which used multiple clearing fi  rms. So I think I was pretty smart in this regard. What I Did Wron g I’ve experienced two broker failures over the past 15 years, and some warning signs were evident with each of them—warnin g signs I missed or i gnored. I assumed the system would make me whole, and that indeed happened in the Refco case. But I am still waiting for most of my money from the PFG Best case. That really irks me, which you can see fi  rsthand by seein g my interview on Fox Business Channel ( go to www .foxbusiness.com and search for “dave y” and you’ll see m y interview). ■ Free Tim e Ahh, the days of workin g with the evenin gs free. That was life in the corporate world, for the most part. But now , working full time at home, I feel the need to check the markets at all times of day and ni ght. Tradin g ideas pop into my head, and imme - diately I run downstairs to pro gram and test them. Now most of my wakin g life is thinkin g about, or workin g on, tradin g. I have become too one‐dimensional in my pursuit o f making a living full‐time tra ding. I t hink my wi fe believes t hat my tra ding computer is actuall y now part of me, since I seem to be attached to it so much. Of course, for many peop le who leave a jo b and start tra ding, the opposite cou ld be true. A ll the free time, wit h no boss an d no ru les, lead many wou ld‐be traders to a life of laziness. It is sometimes hard to stay motivated and continue developin g new trading strate gies, especia lly when your tra ding account is in a drawdown. Motiva- tion can rea lly be an issue, an d while that mig ht not hurt per formance to day, it can aff  ect performance down the road. www.rasabourse.com39MAKING THE LEAP— TRANSI TIONING TO FULL TIME What I Did Right I have a lways been disciplined enou gh to keep wor king and never stop tryin g to im - prove my tra ding. What I Did Wrong I pro bably spen d too muc h time wor king on tra ding, an d I’ll bet many o f these extra hours are not the least bit productive. A trader, like an y other self‐directed worker, needs balance. I nee d to wor k on that. ■ Taking the Plunge Once I had all the fore going items in place, at least to a point that I thou ght was ac - cepta ble at t he time, I was rea dy to ta ke the plunge. I too k that full‐time p lunge in May 2008, and I haven’t looked back since. Has it been eas y? No wa y! Has it been fun? Defi  nitely! Would I do it again if I had the chance? Of course, although I’d natu - rally be smarter the second time around. The main point here is that I had a goal, thought throu gh all the details of it, and eventually took the gamble. If I—someone with no trading knowledge until I started reading some books and then trading—can do it, I think most people can. If your heart is in it, as mine alwa ys has been, the road to trading success is much easier. If you fi  nd all the talk of developing strategies to be burdensome, my su ggestion to you is: walk away—tradin g probably is not for you. As I look at my tradin g day, years after going full time, I fi  nd that most of my trad - ing activity is not in placing trades or examining account statements. Rather, most o f my day‐to‐day routine consists of developin g strate gies, lookin g for ideas, thinkin g about tradin g, and, of course, testin g and evaluatin g potential strate gies. Most of the rest of this book focuses on just that—how I evaluate, design, and test trading strate gies. www.rasabourse.comwww.rasabourse.com Your T radin g System                                                  P A R T  I I www.rasabourse.comwww.rasabourse.com43 If you are going to design tra ding systems, it is critica l that you know how to eva lu- ate the per formance metrics o f a tra ding system. T his is not a lways as easy as it sounds. T o show you what I mean, take a look at Figure   5.1   . This equity curve is for a futures tra ding system, typica l of what you mig ht pro duce i f you teste d strategies yourse lf, or one you mig ht fi nd publicly avai lable on t he Internet. T his curve was produced with TradeStation so ftware, but resu lts from ot her popu lar programs, suc h as Mu ltiCharts an d NinjaTra der, are basically the same. A ll good trading so ftware gives you a variety o f important (an d, in my opinion, many unimportant) metrics to review an d examine. Most o f the time, t he equity curve an d performance report bring up more questions t han they answer. Are t he resu lts goo d or bad? Are t he re- sults believable? Do t he resu lts have any pre dictive va lue? Fina lly, how do you sepa- rate the wheat from the chaff  ? I’ll answer these questions and more in this cha pter. The fi rst point to rea lize an d understan d when looking at per formance reports, equity curves, or tra de data is t he old adage “if it is too good to be true, it pro bably is.” As a general rule, future performance of a tradin g system is almost never as good as its historical performance. In fact, the better a tradin g system tests historically, the less likely it is to per form t hat we ll in the future. O f course, t here are exceptions to this rule, and after developin g tradin g strate gies for a while, these exceptions become easier to fi  nd.              CHAPTER   5 T esting and Evaluating ag Trading Systemgg www.rasabourse.com44 TESTING AND EVAL UATING A TRADIN G SYSTEM Why do historical test results usually look better than future results? Some of i t has to do with survivorship bias, meanin g only the good historical tradin g systems are typicall y shown. Wh y would a vendor sell a s ystem with poor historical performance? Why would you trade a poor system that you created yourself? The simple answer is that in both cases the bad results would be discarded, leavin g only the remainin g good results. It is also possible that the historical test results are indeed valid and that the system developer has uncovered a true ed ge in the market. Over time, thou gh, this ed ge may disappear, either due to others fi  nding it, market changes, or a host of di ff eren t reasons. The tradin g system will then revert to the mean, which would be a break - even strate gy before commissions and tradin g costs. Historical test results also can look better than future results due to the method of the historical testin g. Most people test and evaluate systems incorrectly. Later in the book, you’ll learn one correct wa y to test and evaluate s ystems, but for now jus t realize that the stan dard accepte d way o f testing is wrong. T his faulty testing leads to overoptimistic resu lts an d trading systems t hat are sure to disappoint t he end user. Of course, experience d traders know how to test systems. T he question is: w hen looking at historica l resu lts, how do you know w hat to believe? Figure   5.2    depicts w hat I ca ll a “BS” meter for per formance resu lts. It gives you an idea of who, if anyone, you can trust wit h provi ding you tra ding resu lts. At the very top o f the sca le—t he group wit h the most BS to s ling—are tra ding system ven dors. I put t his group at t he top, even t hough I have been part o f this  FIGURE 5.1 Trading System Results—Is This Believable? –1000001000020000Equity($)30000Equity Curve Line - @ES 5 min(06/02/09 16:35 – 06/09/09 11:20) Legend Trades Peaks Created with TradeStation. ©TradeStation Technologies, Inc. All rights reserved.100 200 300 Trade Number400 500 600 700 800 900 www.rasabourse.com45TESTING AND EVALUA TING A TRADING SYS TEMgroup (although I trade my systems with my own money, unlike most in this group). In general, any performance information you receive from someone wantin g to sell you si gnals, a black box system, a subscription, tradin g room, and so on should n ot be trusted. An excellent general rule is: don’t believe any of it. This approach is extreme, I realize, but given the probability of a vendor’s sellin g a great trading system, as opposed to a vendor’s selling you a good‐looking but actually terrible system, this is sound advice. You will save a lot of money by avoidin g anyone off  erin g you a fantastic tradin g system. Anyone off  erin g a great tradin g system for only a little money just doesn’t pass my “smell” test—the vendor should be trading i t himself, rakin g in the bi g bucks, not hawkin g the system on the Internet for pennies. That is why tradin g system vendors top the BS list. Since trading system vendors typically provide worthless junk, you may be in - clined to go the “do‐it‐yourself ” (DIY) route. For the DIYers out there, there are dozens of tradin g platforms that will help you analyze, test, and optimize any type of trading system you want to create. On the surface, this seems to be a great way to go, relyin g just on yourself, your ideas, and the tradin g software. The problem, to be discussed in great detail later, is that developin g tradin g systems is not as easy as the software vendors would lead you to believe. In fact, new developers following the approach su ggested by the software will inevitably create an overoptimized, curve‐fi  t trading system. Suc h a system wi ll produce a great back test, but wi ll almost never perform well in the real‐time future. So novice DIY develo pers rank just below trad- ing system ven dors on t he BS sca le. If buying from a vendor is fraught with hazard, and novice DIYers not much bet - ter, what options are left? If you are convinced that you have to have someone else provi de you wit h a tra ding system or signa ls, using a broker‐supp lied system or a Commodity Trading Advisor (CTA) system is a much better approach. Let’s take a quick look at what they off  er, and the advantages and disadvantages.  FIGURE 5.2       BS Meter for Tra ding System Resu lts www.rasabourse.com46 TESTING AND EVALUATING A TRADING SYSTEM Many futures brokers now off  er what they call “Broker Assist” or “Follow the Signals”–type services. Two groups that off  er these services are Striker Securities (www .stri ker.com) an d Wor ld Cup Advisor (www .wor ldcupadvisor.com). (Fu ll disclosure: I have in the past, or plan in the future, to o ff er si gnals throu gh these two brokers. Based on m y personal experience, I believe the y are reputable.) For a monthly fee, you can “follow” tradin g signals from a si gnal provider. The si gnals provi der wi ll typica lly have an account at t he broker an d will be placing live tra des. So the resu lts shown are typica lly actua l resu lts, a  huge  step a bove t he nonsense mos t tradin g system vendors show as “real. ” Of course, just because t he resu lts provi ded by these services are from a tra ded account, it does not mean you wi ll get t he same resu lts. Even rea l resu lts should be treate d as hypothetical. In fact, my genera l rule is that un less the resu lts actua lly hap- pened in your account, you must  treat the results as hypothetical. As you well know , hypothetical leaves t he door open for a lot of variation in actua l resu lts, w hich you should be prepared for. That is one disadvantage of the broker services. Another possible disadvanta ge of a broker‐supplied si gnal service is that some - thing can go wrong with either the developer providing the signals to the broker or the broker itself. For example, if the developer uses a discretionary approach to trade, a personal crisis mi ght throw his/her tradin g off  , and a tradin g approach that was once good now becomes bad. On the broker side, a quick and sudden fraud, à la the PFG Best corruption and bankruptcy in 2012, mi ght put your ac - count at risk . If you choose to follow a CTA, it is reassuring to know that the group is audited by re gulators and accountin g fi  rms and that tradin g results shown are by‐and‐lar ge accurate. Of course, some unethical bad apples alwa ys slip into the bunch, and the y may produce stellar results for many years, before being destroyed in an explosion of fraud and deceit. Bernie Madoff   and his fi  rm, while not a CTA, is a good example of a trusted investment company actually bein g a complete fraud. If you can’t believe trading system vendors, with inexperienced DIY trading system developers not bein g much better, and brokers and CTAs bein g much bet - ter but not without risk, what can you do? What is the low group on the BS totem pole? My opinion is that an experienced DIY tradin g system developer is the leas t suscepti ble to BS or ot herwise inva lid performance reports. I c laim t his for a few reasons. First, an experienced developer knows his tradin g back‐test software and knows all the wa ys to fool it. He knows to avoid these software limitations, where many tra ding system ven dors active ly see k out t hese limitations an d use t hem to produce their faulty, extremely good‐lookin g performance reports. A second reason an experienced developer, creatin g his own systems, is lowest on the BS sca le, is t hat he is in c harge of the process. He can e liminate many potentia l issues, such as faulty or missin g market data, incorrect forward‐lookin g rules, and www.rasabourse.com47TESTING AND EVALUA TING A TRADING SYS TEMoveroptimization an d curve fi tting. Bein g in c harge of the comp lete process is an enormous responsi bility, but an experience d developer wi ll be quic k to fi x issues, since he ultimate ly is so lely responsi ble for his resu lts. Of course, just developing trading systems for many years does not ma ke one an expert. The ke y is to develop s ystems and then verif y the performance in real time. Over the course of a few years, a good developer will get better and better at pro - ducing historica l resu lts for tra ding systems t hat have a better an d better c hance o f holding up in t he future. Certain ly, when done correct ly, an experience d DIY devel- oper can be pretty low on the BS scale. At this point, a few rea ders are pro bably asking, “Why even bother testing? A ll it does is prove somet hing wor ked in the past. It has no bearing on future per formance. ” This is an argument t hat has some va lidity, up to a point. It is defi nitely true t hat “past performance is not indicative of future results,” which is why the U.S. government requires t his disclaimer w hen discussing tra ding system per formance. But does i t therefore mean that historical testing has n o  validity? I don’t think so. Here is a case in point. Let’s say you want to build a model of the sun risin g. Every day for a month, you get up before dawn, and wait for the sun to appear. Every day, it rises in the east. So, you build you model, run it for tomorrow , and it “predicts” the sun will rise in the east. Will it? Who knows for certain? Some stran ge axis switch - ing or earth rotation reversing could occur overnight, and the sun could rise in the north, south, or west. Hi ghly unlikely, yes, but so was the fl  ash crash of 2010 or the fi  nancial crisis of 2008. Outlier and unex pected events can and do ha ppen. If such a calamity occurs, does it mean that the model is useless and never should have been built? No, but certainly you’d have to now take into accoun t that the world you modeled has chan ged dramatically. It is the same for tradin g systems. Completely new market conditions could render your trading strategy useless tomorrow , or next week or next month, or ma ybe not at all. But I contend that havin g a model based on history is much better than completely guessin g. With guessing, you are likely to be looking the wrong way when the sun rises tomorrow mornin g. In evaluatin g tradin g systems and their performance report and equity curves, i t is important to distinguish  how  the results were obtained. There are four main ways w to produce results: ■   Historical back testin g ■   Out‐o f‐samp le testin g ■   Walk‐forward testin g ■   Real‐time testin g Each of these is discussed in turn next. www.rasabourse.com48 TESTING AND EVAL UATING A TRADIN G SYSTEM ■ Historical Back Test ing Historica l back testin g is the most common met hod of testin g. It is a lso the easiest to perform, an d the easiest to a buse an d misuse. T he developer simp ly enters t he star t date an d the end date (usua lly today’s date), inc ludes an y parameters to optimize, and then lets the strategy engine do all the calculations. T he end resu lt will be the best set of parameters for that period of time, which can then be used in real live tradin g. Unfortunately, there is a major problem when performing a back test in this manner. Assuming that the results are not due to overoptimization—too many rules, too man y parameters, and/or too man y parameter values—the historical results are by definition going to look great. After all, those results come from optimizing! There is virtually no chance that the results in the future will be close to the optimized results. The results are just too “tuned” to the data used in the test. A great example of this is shown in Fi gure   5.3   . Lookin g at just the optimized results of a simple tradin g system, it looks like this is a viable system. But this is be - cause what you see was optimized. Take any other set of parameters and the system will look worse. Goin g forward, which result do you think is more likely—the one optimized good result or the many poor results? I hope the answer is crystal clear: the poor results are a truer refl  ection of the actual system performance. The deceiv- ing part in all this is that sometimes these systems perform well for a time after FIGURE 5.3Optimize d Resu lts Frequent ly Fall Apart a fter T estin g After optimization, results frequently fall apart Not optimizedOptimized 010000 100 200 300 Trade Number Created with TradeStation. ©TradeStation Technologies , Inc. All rights reserved.400 500LegendEquity Curve Line - @GC 90 min.(01/02/11 19:30 – 11/12/13 10:30) Trades Peaks –100002000030000400005000060000700008000090000100000110000120000130000140000150000160000 www.rasabourse.com49TESTING AND EVALUA TING A TRADING SYS TEMoptimizin g. In general, thou gh, the more optimization that is done, the less likely the system wi ll work well going forwar d. ■Out-o f-Sample Testing Only the most inexperience d and naive developers test an d optimize t heir tra ding system over t he whole historica l data set. I f that has been your approac h up unti l now , this statement may make you mad. But odds are that your real‐time tradin g results have not been goo d, or at least not consistent ly goo d. Muc h of that can be at- tributed to eva luating t he strategy ’s per formance on t he same data it was optimize d on. It is just not a very goo d practice. Trust me, I know—I use d to do it a ll the time before the market told me, via takin g money out of my account, that I was doin g things incorrect ly! Some developers get aroun d this by inc luding an out‐o f‐samp le perio d. This is shown in Fi gure   5.4   . An out‐of‐sample period will be 10 to 20 percent of the data reserved for review after optimization. Typically, the data left for out‐of‐sample test - ing will be the most recent data. I have, however, seen people apply it to data before their optimization data. The theor y behind that alternative approach is that the op- timization should include the most recent data, so the strategy is “tuned” to curren t market conditions. FIGURE 5.4  Out‐of‐Sample T estin g Results Out-of-sample results Actual real-time performance would be closer to out-of-sample results—not as good as optimized results Optimized results www.rasabourse.com50TESTING AND EVAL UATING A TRADIN G SYSTEM Conducting a test wit h out‐o f‐samp le data is a magnitu de or two better t han op - timizing over all the data, especially if the out‐of‐sample period has a signifi  can t number of trades in it. I f the optimize d resu lts look good with the out‐o f‐samp le data, t here is muc h more con fi dence in t he optimize d resu lts. It wi ll likely per form better in real time . One problem with the out‐of‐sample approach is that the optimized parameters are set forever. So, for examp le, if you optimize your tra ding system an d get va lues X, Y , an d Z as t he best inputs to your system, t hose inputs s hould never c hange. But, perhaps due to chan ging market conditions, you do want the ability to chan ge your input parameters, or at least c heck them on an ongoing basis. In t his manner, t he out‐o f‐samp le test i dea can be taken one step further. The resu lting ana lysis, wa lk‐ forwar d analysis, is muc h better, an d muc h closer to rea lity. ■ Walk-Forwar d Ana lysis Walk‐forward analysis is much more cumbersome than traditional back tests, bu t the results are usually worth the e ff ort. Walk‐forward analysis can be done by hand, in conjunction with tradin g software optimization. This was the method I used to be a top fi  nisher in the World Cup contest, and I encourage you to try it by hand a few times to fully understand the process. After that, many tradin g software packa ges now include walk‐forward anal ysis in their available tools. The idea behind walk‐forward analysis is simple: the performance results and the optimized results are based on two diff  erent data sets. This can be seen in Fi gure   5.5   . FIGURE 5.5 Walk‐Forwar d Analysis In sample #12001 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 Walk-forward #1 Walk-forward #2 Walk-forward #3 Walk-forward #4 Walk-forward #5 Walk-forward #6 Walk-forward #7 Walk-forward #8 Walk-forward #9 Walk-forward (out-of-sample period: 1 year) Walk-forward periods then combined into one continuous equity curve In sample #2 In sample #3 In sample #4 In sample #5 In sample #6 In sample #7 In sample #8 In sample #9 In-sample period: 4 years www.rasabourse.com51TESTING AND EVALUA TING A TRADING SYS TEMWalk‐forward analysis is simply the a ggregate of many out‐of‐sample periods, stitched together. Results of walk‐forward analysis, when done correctly, can be much closer to reality than a simple optimized test. A sample of this is given in Fi gure   5.6   , which shows that the walk‐forward analysis, and the live results are pretty comparable. There is no dramatic shift in performance between live and walk ‐ forward results . Walk‐forward analysis is a great tool when there are a lot of historical data to analyze. It is m y recommended method. But in cases where there is not much historical data, the best approach may be to test and evaluate the tradin g system in real time. ■Real-Time Anal ysis Some very success ful traders esc hew all forms o f back testin g due to in herent con - fl  icts and issues in such testin g. These folks simply test strate gies in real time, possibly even with real money. The obvious advanta ge to such a method is that fi  ttin g rules to past data an d using hindsight bias is just not possi ble. One big disadvanta ge is that you can only gather data at market speed. It is impossible to gather statistics over many years until you have tested in real time for man y years. Most people do not have the  FIGURE 5.6  W alk‐Forwar d T esting Resu lts Walk-forward test results –1000001000020000Equity($)3000040000 Real-time resultsEquity Curve Line - @ECZ13 60 min.(01/02/09 08:00 – 11/12/13 15:00) Legend Trades Peaks Created with TradeStation. ©TradeStation Technologies , Inc. All rights reserved.100 200 300 Trade Number400 500 www.rasabourse.com52TESTING AND EVAL UATIN G A TRADIN G SYSTEMpatience to wait for suc h a test to comp lete. Anot her disadvantage is t hat anytime t he strate gy is chan ged, the clock goes back to zero, and the evaluation starts fresh. This can rea lly pro long the test perio d. For t he reasons cite d, most peop le do not consi der rea l‐time testin g, even wit h its advanta ges, as a viable solution. In the tradin g system development method shown later in this book, however, real‐time analysis is used and provides useful verifi  cation of a tra ding system. www.rasabourse.com53Now that we have examined the primary ways to test a trading strategy and produce a tradin g performance report, I’ll share with you what I think is important in these reports. A typical summary performance report is shown in Fi gure   6.1   . A complete TradeStation‐produced performance report spans at least seven pa ges and includes hundreds of calculated parameters, trade lists, and performance graphs. The amount of information supplied is frankly overwhelming. Most of the results, it turns out, are not all that important when time comes to evaluate the tradin g system. Maybe a performance metric for “drawdown—coeffi   cient of variation” matters to some people but certainly not to me. As with most aspects of tradin g, I try to keep my performance report analysis simple. A few numbers are t ypicall y all that I need to conduct a cursor y review of an y trading system. Once I fi  nd something I like, then I will delve deeper. First, a few ground rules are in order. The performance report should be based either on live data or on a walk‐forward test. Optimized back tests should not even be anal yzed, as their results are bogus and misleading. Next, there should be multiple years of data, with a multitude of trades. A good rule of thumb is 5 to 10 years of data, and 30 to 100 trades for each tradin g rule in the system. Third, I usually review performance reports without position sizin g applied. As you review many performance reports, it will be important to compare “apples to app les.” If you look at one per formance report based on sing le‐contract tra des an d try to compare it to anot her report t hat uses mu ltiple‐ contract‐position sizing, a fair comparison is a ll but impossi ble. Plus, a bad strategy can be made to look appea ling by position sizing. T o keep it simp le, I look at position sizing on ly after I feel confi dent the strategy is via ble trading one contract at a time. Finally, accurate assumptions for commission an d slippage must be inc luded in the report. Many times I see per formance reports wit hout t hese va lues a dd- ed in, wit h the fl ippant response from t he creator, “Those costs can be added in  Preliminary Ana lysis                                                       CHAPTER   6 www.rasabourse.com54PRELIMINARY ANALY SIS later, no pro blem.” Not inc luding commissions an d slippage, beyon d being highly unethical—if not immora l—due to t he way t hese costs impact a tra ding system, suggests that the developer doesn’t really understand proper strate gy develop - ment. It can easi ly be shown how testin g without commissions an d slippage leads one to se lect tra ding systems t hat tra de more o ften, wit h lower average pro fi t per trade. For example, if you optimize based on net profi  t or somethin g similar, the optimizer will usually give you a best set of parameters that make you trade too much. Here is an examp le: FIGURE  6.1Samp le Per formance Report www.rasabourse.com55PRELIMINARY ANALYSIS Without S lippage or Comm ission Parameter Settin g 1: Gross pro fi t/tra de = $25, 1,000 tra des, gross pro fi t = $25,000 Parameter Setting 2: Gross pro fi t/tra de = $50, 300 tra des, gross pro fi t = $15,000 The optimizer will select Settin g 1 as superior. With $25 Slippage and Commission Parameter Setting 1: Net pro fi t/tra de = $0, 1,000 tra des, gross pro fi t = $0 Parameter Settin g 2: Net profi  t/trade = $25, 300 trades, net profi  t = $7,500 The optimizer wi ll now se lect Setting 2 as superior. Which approac h is better? We ll, in t he fi rst scenario, suc h a system in t he rea l world will churn the avera ge trader until his account is depleted. It is defi  nitely no t as simp le as “you can a dd commissions an d slippage in later.” The secon d scenario, however, pro duces a resu lt that is far more rea listic an d believable. So, a ll other things being equa l, optimizing wit h slippage an d commissions is an approac h muc h closer to reality and should always be used. With these basic ground rules in place, the first number I look at is the total net profit. This seems self‐evident, since if there is no profit, wh y bother looking at the report any further? It may be that the net profit shown is no t worthwhile, either due to the time period involved or the drawdown that has to be endured, but there should be profit nonetheless. In m y experience, with a walk‐forward back test, the annual net profit should be $5,000 per year per contract minimum, preferably $10,000 or more. Any amount less than this will likely not be worthwhile on a risk‐adjusted basis or will not have enou gh trades to be significant. Profi  t factor is the next number I review . Obviously, hi gher numbers are better here. Many people say that only profi  t factors greater than 2.0 are acceptable, bu t I don’t share this view . T o me, anything over 1.0 has at least some merit, so I don’ t discard an y systems between 1.0 and 2.0 just based on this number. I do fi  nd that profi  t factors below 1.5 generally have a hard time makin g it throu gh the rest of the steps in the development process, though. I always review total number of trades to ensure that enou gh trades are bein g taken during the test perio d. If, for examp le, the report contains on ly 5 tra des, just how valid can the results actually be? I generally use a rou gh guide of 30 to 100 trades minimum per strate gy rule. So, for example, if I have four strate gy rules, I’d like to see at least 120 to 400 tra des in t he report. O bvious ly, the more tra des the better . Avera ge trade net profi  t is the next performance number I look at. Since this number is a fter commissions an d slippage, it is a great an d easy way to compare tra d- ing systems. I generally like to see $50 or more per trade avera ge, based on tradin g one contract. For avera ge trade values less than $50, the system mi ght still be viable, www.rasabourse.com56PRELIMINARY ANALY SISbut the closer you ri de to t hat $0 breakeven line, t he less leeway you a llow for er - rors, mista kes, slight changes in per formance, an d the like. The next num ber I review is avera ge losing trade, which I com bine wit h the aver - age trade net profi  t to calculate expectancy. There is a lot of confusion about expec- tancy and how to calculate it, so I will explain it here. Many traders calculate expectancy in this way: Expectancy = avera ge $ winners * win % + avera ge $ losers * lose % = average tra de where average $ losers is a negative num ber Note t hat this is a lso the average tra de net pro fi t. So ca lculating an expectancy us - ing this equation does not provide any additional information beyond what is already known wit h the average tra de net pro fi t. An alternative expectancy can be calculated as follows: Expectancy = (avera ge $ winners * win % + avera ge $ losers * lose %)/ (−avera ge $ losers) This metric is useful since it is a risk‐adjusted value. It basicall y states for ever y dollar you risk, what is your expected return? So with an expectancy of 0.2, you’d expect to receive 20 cents in gains for every $1 you put at risk. This expectancy has been heavily touted by tradin g psycholo gist and educator Dr. Van Tharp, so to avoid future confusion, I will refer to this calculation as “Tharp Expectancy.”  T o me, it is much more valuable than the fi  rst method of calculatin g expectancy. For the Tharp Expectancy, I generally look for values greater than 0.1. Anythin g below this threshold will be di ffi  cult to trade and likely will demand too much ris k for too little reward. The next numbers I look at in the performance report are total slippa ge and total commission. If the numbers are $0, I immediately discard the report and ignore all other results I may have seen. There is no such thin g as cost‐free tradin g, so any per formance report s howin g that is bogus. In genera l, I nee d to see $5 per round turn trade per contract for commissions. That is a typical value char ged by a discount broker, after all exchan ge fees, National Futures Association fees, and so on are a dded in. Commissions can be less than this, especia lly if you do a lot of volume or if you are an exchan ge member, but the $5 fi  gure is appropriate for most retail traders. T otal slippage is an even more critica l num ber than tota l commission. Many developers, especiall y those who have never traded before, consistentl y underesti - mate the amount of slippa ge experienced in the real world. I defi  ne slippa ge as the www.rasabourse.com57PRELIMINARY ANALYSISdiff  erence between what the software strate gy back‐test en gine gives for fi  lls and what your actua l fi lls are. For examp le, many strate gy engines assume buy fi lls at the bid, when in real tradin g you’ll buy at the ask. The di ff erence is what I consider slippage. Base d on my experience, I assume t he followin g slippage values for heavily traded markets : ■   M a rket or ders: 1 to 2 tic ks slippage per roun d turn. ■   Stop or ders: 1 to 2 tic ks slippage per roun d turn. ■   Limit or ders: 0 tic ks slippage. The tric ky part is t hat a typica l trading strategy wi ll have some mix o f mar ket, limit, and stop orders. In that case, if you can apply only one slippa ge value to each trade, what should it be? I fi nd being conservative in t his situation helps. I wi ll genera lly app ly 1.5 to 2.0 tic ks of slippage per roun d turn tra de for these mixe d‐ order‐type strategies. I fi nd this genera lly a bit pessimistic, but it is better t han un - derestimating the slippage costs and being disappointed with real‐world results. The fi  nal number I look at in the performance report is maximum drawdown. I have no set criteria for a drawdown limit , but if I see a $10 ,000 maximum drawdown for a strategy that produces only $15,000 net profi  t, alarm bells go o ff . In the bac k of my mind, I look at the drawdown knowin g that I can expect to see an even lar ger drawdown at some point durin g live tradin g. If I can’t handle the drawdown, I’ll discard the system immediately. Otherwise, I know that high risk, low rewards will be tossed out durin g later steps, so I don’t eliminate the strate gy just yet. There are ar guably other important numbers in the performance report, to be certain. Many people, for example, put a lot of faith in winning percentage, or Sharpe ratio, or one of the hundreds of other metrics. The fact is that all metrics are important to an extent, and the developer should tr y to fi  nd ones he or she is comfortable with. Ultimately, any metrics relied upon should prove themselves by leadin g to successful real‐time strate gies. Once I am done reviewin g the performance report, I generally take a look a t some of the trade graphs. I am interested in one chart in particular: the closed trade equity graph. If you are a visual learner, just lookin g at an equity curve— either a c losed trade equity curve or a daily equity curve (s hown in Fi gure   6.2   )— might tell you all you need to know . Here are the main thin gs I look for in an equit y chart. The fi rst t hing I look for in an equity curve is t he slope. I f the chart is not stea dily going from lower left to upper ri ght, it may not be a very good strate gy. The problem is that the chart can be distorted by the scalin g used. So it is also important to look at the end equit y, and then divide that by the num ber of years in t he curve. T hat wi ll give you an annual avera ge profi  t and a good indication of whether the strate gy is a t all worthwhile. www.rasabourse.com58PRELIMINARY ANALY SIS After the slope, I like to look for fl at perio ds. Flat perio ds are o bvious ly better than perio ds of drawdown, but many perio ds, punctuate d by rapi d rises, s hould be cause for concern. Suc h an equity curve suggests t hat the strategy may have caug ht only a few goo d trades, possi bly because o f curve fi tting or overoptimization. F lat perio ds cou ld also be cause d by government intervention, for examp le the Unite d States quantitative easing programs (QE, QE2, QE3) in t he 2009–2013 time frame. In this case, it mig ht be okay to assume t hat per formance wi ll improve w hen gov- ernment intervention en ds. Of course, w hen, if ever, wi ll some sort o f governmen t intervention en d, and who can pre dict it? The third major item I look for is drawdown perio ds. How severe are t he draw- downs, an d how long does t he strategy ta ke to recover from t hese drawdowns? Answers to t hese questions wi ll give you an i dea of what to expect i f you tra de this strategy for rea l. Draw downs in t he future may be more severe, an d may last longer—your position sizin g and money mana gement s hould assume t hat both of these things will happen— but you can at least get a sense o f what to expect. The absence o f any drawdowns on t he equity curve s hould also be cause for concern. I know of no real system, except for money deposited in a savin gs account, that has on ly a sma ll or no drawdown. A gain, t he curve has to “look” realistic. Rewar d with no ris k is not rea listic. A fi  nal item I review on equit y charts is the “fuzziness” of the curve. This cannot be seen on a closed equit y chart, but it can be seen on a dail y equit y chart. The fuzzier the curve, t he more t he daily resu lts jump aroun d, moving up an d down s hort term,  FIGURE 6.2 Sample Equity Curve –1000001000020000Equity($)3000040000Equity Curve Detailed - @ECZ13 60 min.(01/02/09 08:00 – 11/12/13 15:00) Legend Equity Curve Created with TradeStation. ©TradeStation Technologies , Inc. All rights reserved.12/15/09 11/29/10 11/10/11 10/24/12 10/8/13 2/6/2009 10:00:00 AM – 11/12/2013 3:00:00 PM www.rasabourse.com59PRELIMINARY ANALYSISeven if the lon ger‐term trend is up. Curves that are very fuzzy are harder to trade, harder to position size, an d harder to emotiona lly deal with. Think about it: i f System A gains $200 on day 1, loses $200 on day 2, an d gains $75 on day 3, is t hat pre ferable to System B, w hich gains a stea dy $25 per day? Bot h have t he same en d resu lt, but the fuzziness of System A makes it less appealin g than System B. Obviously, just lookin g at an equity curve is by no means a very scientific or very rigorous way to eva luate a tra ding system. But it can be use ful for pre limi- nary ana lysis. T here is no nee d to look at per formance report details if you do not like the look of the equity curve. In those cases, you can save a lot of time by spen ding a few secon ds staring at t he equity curve an d then rejecting a system you do not like. The discussion t hus far has focuse d on simp le, quic k num bers an d met hods to evaluate the performance of a tradin g system. Such analysis is useful in the early stages o f development, w here most strategies are jun k, and a fast, cursory review can eliminate them, freeing up more time for you as the developer to create new systems. But, eventuall y, you will need to do in‐depth anal ysis of performance results. That is a whole di ff erent animal. www.rasabourse.comwww.rasabourse.com61    As the development of a tradin g strate gy pro gresses, the analysis also pro gresses, and the performance hurdles a strate gy must meet to be considered viable get more stringent. My primary method of analysis at the later stages is Monte Carlo analysis. But before I explain how I run the anal ysis and what I look for in results, I’ll fi  rst briefl  y describe the process. ■ What Is Monte Carlo Ana lysis? Monte Carlo analysis, or simulation, sounds like a dauntin g topic, but actually it is not. With the Monte Carlo spreadsheet I created, which you can download for free (www .wiley.com/ go/algotradin gsystems), the analysis is pretty simple. But what is it actuall y? Think about the individual trades in your strategy. These trades taken sequentially, in the order they occurred, yield the strate gy equity curve. But what if the order o f those was diff  erent? Could the drawdown become more severe? Could the end e q- uity be di ff erent? These are the questions Monte Carlo analysis can answer. In its simplest form, you can think of it this way: First, get a number of little pieces o f paper, one for eac h trade in your strategy. T hen, write down one tra de result on each piece of paper. Once you have all trades accounted for, put all the pieces in a hat. Randomly choose one. That is your fi  rst trade. Record it, addin g it to your initia l equity, an d then put t he piece o f paper back in the hat (this is re ferred to as random samplin g with replacement). Then, pick another piece of paper, record its value, and add it to the existin g equity curve you are buildin g. If you do this for a num ber of trades, you ’ll have a possi ble equity curve. I f you perform the whole anal ysis man y, man y times, you’ll have a famil y of equit y curves. Each one represents a possible way that trades in your strate gy could have occurred.  Detai led Analysis                                                          CHAPTER   7 www.rasabourse.com62DETAILED ANALY SISUsing t he family of possi ble curves, you can get statistics a bout your tra ding system. These statistics can help you evaluate a strategy, determine a position sizing ap - proac h, and give you rea listic scenarios for w hat you mi ght face if you actua lly trade the strate gy live. O f course, t his all assumes t hat the historica lly derive d trades wi ll be the same as the trades in the future. If your historical trades are based on fl  awed development, future results will be garbage. Obvious ly, there are some potentia lly serious drawbacks to t his ana lysis. First, the ana lysis assumes t hat the trades in your per formance report are t he only possi ble trades that can happen. This is obviously false, since when you start tradin g live, any result is possible for a particu lar tra de. But, i f the distribution (overa ll mean an d standard deviation) o f the tra des is accurate, t hen the Monte Car lo approac h can yield meaning ful resu lts. A second drawback is that this analysis assumes that each trade is independent o f the previous tra de, a con dition common ly referred to as seria l or auto corre lation. For most trading strategies, this is not an issue. However, if you have a strategy in which the trade results depend on each other, simple Monte Carlo anal ysis is not appropriate. An example of such a situation would be if the trade B signal is depen- dent on the outcome of the previous trade A. You ideally should check for it before using the Monte Carlo analysis. One method for checkin g for serial correlation is the Durbin Watson statistic. Although it is beyond the scope of this book, you can fi  nd details, examples, and spreadsheets on this calculation on the Internet. If you fi  nd that your trades do exhibit serial correlation, the simple Monte Carlo analysis may not be appropriate to use. In such cases, you could try to use a Monte Carlo simulation that included serial correlation eff  ects, or you could gather statistics from a method called “start trade analysis” or “movin g start analysis.” In this analysis, you simulate the start of trading at each trade, and gather the statistics for return and drawdown. For example, if you have 10 trades,  i , i + 1, … i + 9  in your sample, you’d fi  rst create an equity curve startin g with trade i . From the resultin g curve, you could get the drawdown  d id . Then, start the equity curve at trade  i + 1 . This curve would give you the drawdown  d id+1 . If you continue throu gh all the trades, you can analyze the set of drawdowns  d.  This method ma y be a bit more cumbersome than Monte Carlo, but it is a better way to analyze the data when you have serial correc - tion, since trade sequence will be mostl y preserved. Assumin g you can live wit h the drawbacks listed, Monte Car lo can help you an - swer the followin g questions: ■   What is my risk of ruin for a given account size? ■   What are t he chances o f my system ’s having a maximum drawdown o f X percent? ■   What kind of annual return can I expect from this tradin g system? ■   I s  the risk I am ta king to tra de this strate gy appropriate for the return I am receivin g? www.rasabourse.com63DETAILED ANALYSIS Each of these questions will be addressed in the discussion that follows. T o sim - plify the narrative, I wi ll assume t he rea der is usin g my Monte Car lo sprea dsheet. Any Monte Car lo simu lator avai lable to t he public should be able to give t he same results, althou gh some of the terminolo gy and assumptions used may be diff  erent. Therefore, whether you use the simulator or not, the discussion will still be useful for you. ■Inputs to Monte Carlo Simulator There are on ly a few require d inputs to per form Monte Car lo simu lation. T hese are listed below, an d are s hown in Figure   7.1   . Base Starting Equity .  This is the startin g amount of your account, in dollars. Stop Trading if Equity Drops Below $.  T his is t he amount o f capita l below w hich you will cease tradin g. For example, if you enter $3,500 here, once your equity, on a closed‐trade basis, drops below $3,500, you will not be permitted to trade anymore. Your account will be considered “ruined.” At a minimum, this value must be greater than the initial mar gin for one contract of the instrument your system is tradin g. In the precedin g example, you could trade only products that had an initial margin below $3,500. If you wanted to trade a higher‐margin instrument, such as gold (currently at $8,800 initial mar gin), you would have to increase this minimum amount. As a rule, I never recommend tradin g with FIGURE 7.1       Monte Carlo Simulator In puts www.rasabourse.com64DETAILED ANALY SISonly enoug h capita l to just meet t he margin requirement, but for this simu la- tion, the assum ption is acce ptable. # Trades, 1 Year .  This is simp ly the num ber of trades that your s ystem ta kes in a one‐year perio d. My simu lator is designed to tra de for on ly one year, so eac h equity curve generated will consist of this number of trades. That is, of course, assumin g the ruin point is not hit fi  rst. Individual Trade Results.  T his column o f data contains a ll the trade data, one tra de per row . A ll trades should be based on t he same re ference point, t hat is, per contract, per day, and so on. You cannot mix some trades that were based on one contract wit h trades that had multiple contracts. ■ Limitations o f the Simulator T o keep thin gs simple, the simulator makes a few assumptions. First, it is assumed that one contract is traded for each trade. There is no position sizing built into the simulator. Second, the simulator assumes one year of tradin g. Both of these assump- tions can be chan ged in the Excel macro code by anyone who understands macro programming language. In the discussion that follows, a “run” or iteration is defi  ned as the generation o f one sin gle equity curve. In a “simulation,” there will be a number of runs—in the simulator discussed, this is 2,500 runs. T o generate statistics, such as risk of ruin or median return, the results of a simulation (2,500 individual runs) are used. ■ Simulator Out put Once the simulator runs, a table of output values and corresponding curves will be generated, as depicted in Fi gure   7.2   . Followin g is an explanation of each output val- ue, how to interpret it, and what values I consider appropriate for a tradable s ystem. Starting Equity This is the size of your account at the start of the Monte Carlo anal ysis. All rates o f return are ca lculated based on t his num ber, and risk of ruin an d maximum draw- down are both heavily infl  uenced by it. The simulator uses a ran ge of diff  erent start - ing equities in order to generate the table and the output curves. Risk of Ruin This statistic tells you the chances (probabilit y) that within a year’s time, your account will be wiped out (i.e., fall below the “Stop Tradin g if Equity Drops www.rasabourse.com65DETAILED ANALYSISBelow $”). For example, if the risk of ruin is 12 percent, that means within the first year of tradin g the system, you have a 12 percent chance of havin g to cease tradin g. Risk of ruin is an extremely important statistic, especially for traders with small accounts. The risk of ruin can be si gnifi  cant for small accounts, even if the system is a winnin g system! Here is an example that should make that clear: Let’s say you have a very good day trading system. It trades two times a day. Win - ning trades are $200 after all costs, 50 percent of the time. When it loses the other 50 percent of the time, it loses $175 net. Per day, on average, you’d make $25 a day. In a year, you’d make $6,300 per contract. If you traded this with a $10,000 account, alwa ys with one contract, you’d make a 63 percent annual return, with somewhere around 15 percent maximum drawdown. By most measures that is really good. Now , let’s sa y you take this positive expectanc y system and trade it with a small account, $5,000 an d under. Let ’s say your broker allows $500 day tra ding mar gin, so that is your “ruin” point—if your account drops below $500, you are ruined and you quit tradin g. In one year o f trading, how likely are you to be ruine d (drop below $500 an d cease tradin g)? The results, depicted in Fi gure   7.3   , mi ght surprise you. The question is: where do you feel most comfortable bein g on this curve? The person wit h $1,500 is pro bably panic king after eac h loss, since he doesn’t have muc h wiggle room. But the trader with $5,000—still a small account, only 3.3 times the fi  rst trader’s account—is 20 times less likel y to be ruined.   FIGURE 7.2       Monte Carlo Simulator Out puts INPUTS Base Starting Equity $ Stop Trading if Equity Drops Below $ # Trades, 1 Y ear System Name5,000 3,000 99 Euro DayMonte Carlo Simulator RESULTS Start Equity $5,000 $7 ,811 $8,049 $8,136 $7 ,968 $8,268 $8,093$8,093 $7 ,943 $8,280 $8,143 $8,04913% 4% 1% 0% 0% 0% 0% 0% 0% 0% 0%28.0% 23.7% 20.7% 18.5% 16.6% 14.2%15.5% 13.1% 12.1% 11 .6% 11 .0% 46%50%55%58%65%72%83%91%108%129%156% 94% 96% 97% 97% 97% 97% 97% 97% 97% 97% 4.084.334.534.284.504.604.984.855.105.455.65 86% $6,250 $7 ,500 $8,750 $10,000 $11,250 $12,500 $13,750 $15,000 $16,250 $17 ,500RuinMedian DrawdownMedian $ Prof Median Return Return/DD Prob > 0 Annual Rate of ReturnAnnual Rate of Return/DrawdownReturn/DrawdownAnnual Rate of Return180% 160% 140% 120% 100% 80% 60% 40% 20% 0% $0 $5,000 $10,000 $15,000 $20,000 Start Equity$00.001. 0 02.003.004.005.006.00 $5,000 $10,000 $15,000 $20,000 Start EquityIndividual Trade Results Profit/Loss $107 .50 $207 .50 $807 .50 $520.00 $270.00 $45.00 $920.00 $1,032.50 ($292.50) ($292.50) $157 .50 $320.00 $282.50 ($42.50) ($292.50) $432.50($292.50) ($292.50)($292.50)Results www.rasabourse.com66DETAILED ANALY SIS The conclusion is that being underfunded can be disastrous,  even with a winning system.  So I pay a lot of attention to the risk‐of‐ruin number that the simulator outputs. Any value above 10 percent means, for me, that I am tryin g to trade the system with too little capital, and that I should increase the amount of capital to ge t below 10 percent. Obviously, systems with 0 to 1 percent probability of ruin are the best, but as with anythin g in tradin g, it is a trade‐off   with rate of return. In my experience, I have found that simulation results with less than 10 percent risk of ruin are fairly safe, while still providin g an acceptable rate of return. Median Dr awdown This statistic can be a bit confusin g at fi  rst. It is actually the median value of the maxi - mum drawdown. Are you confused yet? Perhaps breakin g it into pieces will help. First, the maximum drawdown is the maximum percentage drop in account size from an equit y peak. It should alwa ys be measured from the previous equit y peak. Figure   7.4    gives an example of three di ff erent drawdowns: Draw down 1: $5,000 drawdown, a fter pea k equit y of $20,000 = $5,000/ $20,000 = 25 percent drawdown Drawdown 2: $10,000 drawdown, after peak equit y of $30,000 = $10,000/ $30,000 = 33 percent drawdown Drawdown 3: $15,000 drawdown, after peak equit y of $60,000 = $15,000/ $60,000 = 25 percent drawdown    FIGURE 7. 3  Account Size an d Risk of Ruin 0% $0 $1,000 $2,000 $3,000 $4,000 $5,000 $6,000Risk of Ruin Start EquityChances of Ruin in One Y ear 5%10%15%20%25%30%35%40%45%50% www.rasabourse.com67DETAILED ANALYSIS  In this example, the maximum percentage drawdown occurs during drawdown 2 and is 33 percent. It is interesting to note that it is the maximum percentage drawdown, not the absolute dollar maximum drawdown (drawdown 3, in dollar amounts, is higher than drawdown 2). For every simulation run, there will be a corresponding maximum percentage drawdown. Over a great number of simulation runs, there will be a distribu - tion of maximum drawdowns, varying from 0 percent (no drawdown at all, a hopelessl y pie‐in‐the‐sk y case), to 100 percent (a complete ruin from the pea k equity point, down to $0 equity). This distribution will have a median value, which means that 50 percent of the drawdown values exceed the median, and 50 percent are below it. Therefore, in the term “median maximum drawdown, ” the wor d maximum  re fers to t he largest drawdown in a particu lar simu lation run, and median  re fers to t he midpoint o f maximum drawdowns over a large num ber of simulation runs. There is no ma gic in se lectin g the me dian maximum drawdown to be the outpu t value for the simu lation. It cou ld easily be the 30 percent, 60 percent, 90 percent, and so on, percentile value, too. I chose the median value just to use for com parison purposes to ot her systems. I f I instea d wante d a worst‐case va lue, I cou ld have use d the 95t h percenti le value of drawdown, meaning on ly 5 percent o f maximum draw- downs are worse than this value.  FIGURE 7.4 Maximum Drawdown Ex plained Drawdown 2 is the largest percentage drawdown, even though it is not the largest dollar drawdown Drawdown 1 $5,000, 25% 12/07/12 1/26/13 3/17/13 05/06/13 06/25/13 Date 08/14/13 10/03/13 11/22/13 01/11/14 Account Equity Drawdown 2 $10,000, 33% Drawdown 3 $15,000, 25% $5,000 $15,000 $25,000 $35,000 $45,000 $55,000 $65,000 www.rasabourse.com68DETAILED ANALYSIS Based on my own persona l preference, I genera lly accept up to a 40 percent me - dian maximum drawdown. T hat is, wit hin 1 year I have a 50 percent c hance o f reac h- ing a 40 percent maximum drawdown. T his may be too extreme for most peop le, but it suits m y objectives and m y personalit y. One thin g to keep in mind with maximum drawdown is that traders, especially new traders, have a tendency to greatly overestimate their ability to withstand a drawdown. Base d on my conversations wit h various tra ders, I have found that traders can genera lly handle half the maximum drawdown t hey think they can handle. For instance, if a trader decides before tradin g a system that he can handle a 30 percent maximum drawdown, w hen rea l money is on t he line, he will start to panic, an d likely quit or c hange t he system, at t he 15 percent drawdown point. I have coine d a phrase for this phenomenon: “half of what you t hink it is. ” Just remember to keep this in mind when you establish your personal maximum allowable drawdown. Median $ Profi  t, Median Return As with the drawdown , over a full simulation of 2 ,500 runs , there will be a distribution of results. This distribution is used to calculate the median profi  t and median return. Median $ profi  t is simply the fi  nal equity minus the initial equity, after one year’s worth of trades. Over the course of 2,500 runs, a median level can be calculated. This is the median $ profi  t. The median return is calculated in a similar fashion, althou gh it is the fi  nal equity divided by the initial equity, in order to get it into percenta ge terms. For my personal trading, I have no set goal for median $ profi  t. I do like to see median returns above 50 percent, especiall y since I stated earlier that I would allow u p to 40 percent median drawdown values. It would not be wise of me to set the return threshold at 20 percent with a 40 percent drawdown. T o keep me aware of this relationship between risk and reward, I also calculate the return/ drawdown ratio . Return/Drawdown Of all the statistics produced b y the Monte Carlo anal ysis, I feel this number is the most important. It is re ferred to in fi nancia l literature as t he Calmar ratio w hen it is calculated over a three‐year period. Since I am only simulatin g one year of perfor- mance, the simulator result is not exactl y a Calmar ratio. The spreadsheet‐produced number is simp ly the me dian annua l percenta ge return divided by the me dian maxi - mum percenta ge drawdown. One wa y to think about this ratio is “it takes Y risk to make X.” In this case, Y is the drawdown, an d X is t he pro fit return. O bvious ly, high values o f this ratio are better. I generally look for return/drawdown ratios above 2.0, althou gh I will www.rasabourse.com69DETAILED ANALYSISaccept lower va lues in specia l circumstances. In my experience, I find that ratios above 2.0 wi ll usua lly pro duce accepta ble resu lts in t he rea l world of trading live. Prob > 0 This gives you the probability, expressed as a percenta ge, that the system will make money in the fi  rst year of tradin g. For example, if Prob > 0 equals 89 percent, tha t means you wi ll have an 89 percent c hance o f showing pro fi t in t he fi rst year. O f course, t his is a ll based on your historica l test resu lts, so i f they are not accurate, t his result will not be either. ■ Summary Now t hat we have discusse d the per formance report, equity curve, an d Monte Car lo simulator , we can summarize the uses of all the values and threshold values for ac- ceptabilit y (Table   7.1   ). TABLE 7.1     Important Per formance Parameters Paramete r Sourc e Utilized Dur ingThreshold T otal net pro fit Per formance repor t Initia l review ∼$10K per year per contrac t Profit factor Performance re port Initial review >1.0 OK , >1.5 idea l Average tra de net pro fitPerformance repor t Initial review >$50 per contrac t Tharp Expectanc y Performance repor t Initial review >0.10 Slippa ge and commissionPerformance re port Initial review Discard if $0 , otherwise $5 commission 1–2 ticks slippage per roun d turn Maximum drawdown Per formance repor t Initial review Should be muc h smaller than total net pro fit Equit y curve slope Equit y curv e Initial review Ideally rises at 45‐de gree an gle Equit y curve flat perio ds Equit y curv e Initial review Short in duratio n Equit y curve drawdown, depth and duratio nEquity curv e Initia l review Proportiona l to overa ll curve Equit y curve fuzzines s Equit y curv e Initial review Small is idea l Risk of ruin Monte Carlo simu lation D etailed review<10% Median maximum drawdownMonte Carlo simulation D etailed review<40% Median % return Monte Car lo simu lation Detai led review >40% Return/drawdown ratio Monte Carlo simulation D etailed review>2.0 www.rasabourse.comwww.rasabourse.com71   With the vast multitude of tradin g system software packa ges now available, designing your own tradin g system has never been easier. Of course, the popularity of packages such as TradeStation, NinjaTrader, and MultiCharts is both a blessin g and a curse. These simple‐to‐use software pro grams make turnin g ideas into strategies easier than ever before. What used to take weeks to accomplish in Microsoft Excel or in a hardcore pro grammin g language (such as C, C++, Visual Basic, or, for those older pro grammers out there, Fortran) now takes minutes or even seconds. Life is certainly easier in that respect. The downside to this modern software—besides the fact that many people are testin g millions of tradin g ideas every day and will likely discover any “ed ge” you fi  nd, eventually rendering it useless—is that trading software makes it too easy. Simply look a chart, insert a strate gy—possibly one of the many standard strate gies that come with the software—and you can quickl y analyze and optimize to your heart’s content. Unfortunatel y, it is this simplicit y that is also the Achilles’ heel of the software. It is near ly impossi ble to create a via ble strategy in t he simp listic manner t hat tra ding software pro ducts descri be. Taking the easy way may in deed give you a strategy wit h a terri fi c‐looking back test, but w hen the strategy starts running live, a ll statistics turn bad. Perhaps this has happene d to you, as it did to me in m y earlier development days. I was a dept at pro ducing back tests t hat looked like the left side of Figure 5.3, only to turn t hem loose on t he live mar ket an d experience t he rig ht side of the equit y curve, w hich inevita bly lost mone y.            Designing and Developing Systems   gggg                                                       CHAPTER 8 www.rasabourse.com72DESIGNIN G AND DEVEL OPING SYSTEMS Anot her drawback to the simp licity o f ease o f use o f these “retail” trading so ft- ware packages is that many professional traders can’t or won’t use them. That should give pause to every retai l trader who thinks the well‐known, commercia lly avai lable package is t he best. T he fact is t hat many pro fessiona ls are typica lly usin g far more sophisticated pro grammin g and analysis tools, such as R, Python, Matlab, and so on. Or they are developin g their own platforms, from the ground up, usin g open source code avai lable on t he Internet. I ’m not trying to imp ly that on ly pro fessiona l soft- ware too ls are goo d; rather, I am trying to a lert tra ders to t he fact that there are limi- tations and shortcomin gs to all tradin g software. If somethin g does not provide the capability you nee d, either from an ana lysis, strategy development, or automation point o f view , c hances are very goo d that anot her, likely more expensive, so ftware tool out t here does provi de it. Over the years, I’ve pro gressed from evaluatin g systems by hand to analyzin g them via sprea dsheet, to creating strategy eva luators in Fortran (t he engineer in me) an d Visual Basic, to primarily using TradeStation and NinjaTrader today. Along the way, I made many mistakes developin g tradin g systems and had to pay the market “tuition” in the form of trading losses. Eventually, I fi  nally got smart in how I developed trad - ing systems. Now , I follow a multistep approach, as shown in Fi gure   8.1   . At each point of the process, there is a “ gate”—criteria that a strate gy must satisfy in order to advance to the next step. For strategies that fail along the way, small adjustments can be made to the strate gy when appropriate. In most cases, however, it is better to place the strate gy on the scrap heap and just move on to the next idea. Why? Many times, when a strategy doesn’t work the fi  rst time through the process, changes to it may inadvertently introduce curve fi  ttin g, hindsi ght bias, or one of a million other strate gy no‐nos. The deceivin g part is that the back test will look better—possibly a great deal better. But remember that the goal is not to create a superb back test; rather, the goal is to create a back test that will refl  ect the future performance o f FIGURE  8.1My Strategy Deve lopment Process Trading Idea Monte Carlo SimulationIncubation Full-Size, Real-Money OperationLimited Feasibility TestingWalk-Forward Testing and Optimization Diversification, Position Sizing It takes approx 100−200 trading ideas to yield 1 tradable system www.rasabourse.com73DESIGNING AND DEVELOPING SYS TEMSthe strate gy. Waterboardin g or otherwise torturin g your strate gy until it gives great results is not a success ful approach. Back in the old days, before I developed the process I now use, I did what mos t other people do: I picked a mar ket, se lected a bar interva l and time period, put a few rules in a strate gy, and then optimized. Whatever turned out to be best is wha t I started to trade with live. The ma gic of the computer, with its ability to quickly do millions o f iterations, uncovere d what I was sure wou ld be ric hes. Boy, was I ever disappointe d! Those early failures led me to a more involved, robust, and ideally trouble‐free development process. I can ’t take credit for any o f the individual concepts—certain ly, many tra ders before me long ago developed most o f the steps o f my process. One great c lassic re ference on system development is t he “bible” of system design: The Evaluation and Optimization of Trading Strategie s , by Robert Pardo (John Wiley and Sons, 1992). I have simp ly tailored all I have learne d and read to create somet hing that feels right to me, and by and large it has yielded good results in real time. That is not to say it is an easy process for strate gies to pass. When I fi  rst started using the basic process I use today (I have enhanced and refi  ned it over the years, and if anythin g it is more strin gent today than it was a few years a go), it probably too k me about 100 to 200 tradin g ideas for entries and exits before I found somethin g worth trading. With time and experience, that number has dropped signifi  cantly, bu t comin g up with tradable strate gies is not an easy task. Traders that are new to usin g walk‐forward analysis, Monte Carlo analysis, and the like frequently are frustrated by the di ffi  culty of discovering a strategy. My an- swer to that dilemma usually is: “But that is how it is supposed to be!”  Think abou t it for a second—if it were easy to fi  nd a strate gy, don’t you think others would have already found it and exploited it? There are thousands of traders and researchers out there every day lookin g for ed ges, minin g data, and runnin g tests. I guarantee you that all the easy strate gies either no lon ger work or have been lon g ago discovered. My good trader friend, who is a Commodity Trading Advisor (CTA), once told me that if he fi  nds one new strate gy a year to trade, he is a happy camper. He should be, since even one strate gy, with proper money mana gement, can make you rich. But to get that one strategy per year takes a lot of work. I frequently think of the strate gy development process as a factory. At the receivin g door of the factory are your tra ding ideas an d strate gies, t he raw materia l you constant ly nee d to run the factory. Your analysis tools, back‐test software, and walk‐forward al gorithms are the machines in the factory. You, of course, are the skilled labor runnin g the machines, monitorin g the qua lity of the pro duct. T he output usua lly fi lls a big garbage bin right outside your factory, unfortunately. But what isn’t thrown away as garbage is pure gold: your tradable strate gy. The factory metap hor is appropriate because strate gy development is tou gh work. Factory workers are amon g the tou ghest people I know of, and that is how you need www.rasabourse.com74DESIGNING AND DEVELOPING SYSTEM Sto be to develop strategies. I am a lways amaze d by educators out t here w ho gloss over strate gy development. Instea d, they focus on suc h nonsense as getting in touc h with your feelings or writin g everyt hing down in a journa l. Don ’t get me wron g— those items have their time and place in tradin g, but they are no substitute for havin g a strate gy with an ed ge. If you don’t have a good strate gy, all the journalin g in the world will not save you. As an aside, it is ironic, thou gh, that many times “soft” skills such as psyc hology or journa ling wi ll be indispensa ble to a tra der wit h an e dge. You really do nee d both to succee d. Since strate gy development is a factory, you need to keep the factory runnin g at all times. Here are some tips t hat I use or have use d to keep t hings humming a long: ■   Any time you see a tra ding idea that intrigues you, write it down. Keep a list of ideas you want to test. ■   L o ok for ideas anyw here. Tra ding books, magazines, an d Internet forums are a ll good sources o f raw i deas. I wou ld not recommen d taking an i dea as presente d and trading it exactly as is, though. I’d look to modify it fi  rst, and put your own unique spin on it. ■   No idea is too silly, too stupid, or too dumb. The only dumb ideas are the ones you never test. ■   If you make a big mistake in your coding, test it anyway. I’m a big proponen t of “accidental” mistakes. Maybe they are really serendipitous creations of your subconscious. It sounds craz y, I realize, but I have successfull y traded, with real money, more than one of my programming mistakes. ■   If thin gs are going bad, try the opposite. Buy when you think you should sell, and vice versa. Maybe something interesting will develop from your opposite idea. ■   If you are a goal setter, try to test one to fi  ve strate gies per week, at a minimum. It may take six months to a year of rigorous testing, but eventually you’ll fi  nd somethin g. ■   If you run out of ideas, pull up random charts and just stare at them. You can even add an indicator or two. After starin g a while, but not thinkin g, walk away from those c harts an d revisit t hem a few days or a wee k later. T hen start to t hink: do you see anythin g in the relationship of the indicator to the chart or in the char t itself? Write down what you see, pro gram it, and test it. ■   Find other traders at rou ghly the same skill level as you. Off  er to swap ideas or strate gies. Take what these traders have, and then build strate gies around their idea. I do this frequent ly with some o f my fellow Wor ld Cup C hampions hip of Futures Tradin g winners. www.rasabourse.com75DESIGNING AND DEVELOPING SYS TEMS ■   Change your criteria. May be you are being too restrictive in w hat you consi der accepta ble. Open t he door a bit to strate gies that meet most, but not a ll, of your criteria. You can a lways ti ghten t he criteria once your factory starts pro - ducing. If you loosen your criteria, don’t necessari ly trade the fi rst strate gy that passes. The point of that really is to give you more experience and confi  dence in developin g “passin g” systems. Then, ti ghten the criteria slowly, and ideally by then you ’ll be able to improve your systems to meet t he tighter c hallenge. Keep repeating t his, an d eventua lly you ’ll have a strategy t hat meets your original criteria. ■ Isn’t It A ll Just Optimizing? After readin g the next few chapters about my process, you mi ght wonder to your - self, “Isn’t strategy development just a ll about optimizing? ” That is a fair question, and in a way, all strate gy development is. If you start out with 10 million strate gies to test, chances are good that at least a few will make it throu gh whatever performance hurdles you put in place, and emerge after incubation as a potential winning strategy. At that point, a few possibilities emer ge regardin g the strate gy: ■   You have a true edge, and you will be profi  table trading it for at least a little while, until the ed ge disappears. ■   You have overoptimized and overfi  t the strategy to pass all the tests, but you have nothin g that will really work in real time (this happens a lot to inexperienced develo pers). ■   You have tested so many strate gies that sooner or later one was bound to pass all your tests. You think this strate gy has an ed ge, but it really doesn’t. It is just ran - dom chance that you tried this particular strategy. Like a blind squirrel fi  nding a nut once in a while, you simply got lucky! Obviously, you are looking for strategies that fi  t into scenario 1. My process will help you avoid strate gies in scenario 2 (althou gh you can stretch the guidelines I give and end up overoptimizin g). Scenario 3 is, in my mind, the scary alternative. With this scenario, you think you have an ed ge, but you really just got incredibly lucky. You’ll never know for sure if this scenario applies. You could trade successfull y for years wit h a lucky strate gy, or you cou ld lose money from day 1. You just never know what will ha ppen. My advice to avoid scenario 3—fi  ndin g a “lucky” strate gy: ■   Have a lo gical basis for your strate gy. Think about your entries and exits and how they can give you an ed ge. Use your brain to exploit what you see in the market. www.rasabourse.com76DESIGNIN G AND DEVEL OPING SYSTEM S ■   Keep t hings as simp le as possi ble. Typica lly, more ru les an d conditions lead to a greater c hance t hat the strategy wi ll not wor k in the future. ■   D o n’t just stic k random in dicators toget her unti l you fi nd somet hing that actua lly works. If you do enou gh of these tests, you will eventually fi  nd somethin g, but i t is probably just a lucky catch. There are products out there that use this technique, and they can be very use ful if used correct ly. Just don’t expect t he computer to do all your strategy t hinking for you. ■   Gent ly optimize w hatever you do. Sometimes I liken the strategy development process to fi shing. I f you want to catch a cat fi sh, one way wou ld be to get a huge net, capture t housan ds of fi sh, and then just pic k your cat fi sh out o f the pile of fi sh stuck in the net. T hat wou ld be com- parable to ran domly testing a mi llion strategies, an d fi nding a few seeming ly grea t ones. A better way mi ght be to think about what catfi  sh like, and tailor your bait and fi  shing method to what you think might catch one. This is akin to developing an edge and then creatin g rules to exploit that ed ge. All thin gs bein g equal, your chances o f long‐term success are probably better with the latter method. In the chapters that follow , I detail the process I currently use to design and de - velop tradin g systems. Feel free to follow this exact process yourself, or just extrac t bits and pieces that appl y to your situation. In either case, your development skills will improve by following what works for me. www.rasabourse.com Devel oping a Strategy                                                  P A R T  I I I www.rasabourse.comwww.rasabourse.com79 Strategy Development–Goalsgy and Objectives  p             CHAPTER   9 When you go on a lon g trip in your car, do you have a map or global positionin g system to guide you? Or do you just “win g it” and hope to fi  nd your destina- tion by reading signs and going on instinct? Most people, of course, would have a map. It makes the journey so much easier. And it is the same with developin g a trad - ing system. You should know where you want to end up before you even start. It all starts with goals. You’ve probably heard it a million times durin g your life: if you want to accom - plish somethin g, you must have goals. Unfortunately, after hearin g it so many times, many people just list goals to say they did it, or list va gue goals that have no way o f being measured or realized. T o develop a good trading system, you absolutely need goals. T o do that, I employ the SMART technique (Fi gure   9.1   ). SMART is a little mnemonic trick to assist in remem bering a ll the important parts o f a goa l. Here is how I app ly it to tra ding: Specifi  c.  The goal must be specifi  c, not va gue. For example, it is not enou gh to say, “I want a tra ding system t hat ma kes me a lot of money ” or “I want a tra ding system that has no risk.” Such va gue goals, besides bein g unrealistic, are just too general. How will you even know when you reach such a nebulous goal? The simp le fact is t hat you won ’t know i f you ever reac h it. Measurable .  How will you know you’ve created a tradin g system that meets your goals unless the goal can be measured? That is the second key to a solid goal. www.rasabourse.com80STRATEGY DEVELOPMEN T—GOALS AND OBJEC TIVESAt the end of the development process, you want to have a tradin g system with certain performance metrics, and compare them to the goals you set at the outset. It is a very simple concept, but you’d be amazed how many people develop goals that aren’t measurable, such as “I want to create a tradin g system that makes my family proud.” An admirable quality in a tradin g system, to be sure, but how do you measure this? Maybe if your teenage kids walk alongside you in a public place, rather than 10 feet in front or behind you, you’ll know they are proud of you. But what if you don’t have teena gers? Attainable.  The “A” in SMART stands for attainable. There is absolutely no sense in sayin g, “I need to develop a tradin g system that will provide 500 percent an - nual return with less than 2 percent maximum drawdown.”  That is not realit y. You need to strive for a goal that is attainable. Otherwise, you will just become disappointed over and over, since you will be unable to create a tradin g system that meets such lofty goals. In the end, most people with unrealistic goals end up cutting corners by cheating in order to reach their goal. They’ll produce an ultra‐optimized back test, curve fi  t to the extreme, that shows them reachin g their unrea listic goals. But as I ’ve sai d before, “If it seems too good to be true, it probabl y is.” Relevant.  If you set goals for developin g a tradin g system that aren’t relevant to the topic at hand, the whole goal exercise wi ll be a waste o f time. For examp le, let’s say you hate creatin g tradin g systems and hate the whole development process. Is it even worthwhile for you to pursue creatin g tradin g systems? Meanin g, is the whole process even wort hwhile to you? I f not, you should probably just quit ri ght now . T o be successful in this fi  eld, your heart and mind must be fully committed. Trust me, there are thousands of professional traders committed  FIGURE 9.1SMART Goals Specific Measurable Attainable Relevant Time bound www.rasabourse.com81STRATEGY DEVELOPMEN T—GOALS AND OB JECTIVESto the cause. In a fi  ght between committed traders and noncommitted traders, who do you think will win? Time bound.  Creating a tra ding system ta kes time an d consumes your free an d working time, so having a time‐ based aspect to t he goal is a great i dea. It mi ght be a certain amount of time you give yourself to create a strate gy or a time limit for how lon g you’ll spend evaluatin g a sin gle idea. The idea will be to keep the process movin g at all times. As you’ll fi  nd out, it gets really di ffi  cult to fi  nd time and motivation to test new strategy i deas, especia lly when the last 100 i deas all failed. Now t hat we have the framewor k for a goa l, let’s look at some examp les: “I will create a trading system that meets my performance objectives. ” Speci fi c? No. Measura ble? Not as written. Attaina ble? Possi bly. Re levant? Yes. Time bound? No. This kind of goal needs a lot of work. “I will create a trading system in six months that meets my performance objectives. ” Is this a SMART goal?  Yes and no. The fi  rst part is specifi  c and measurable (“create a tradin g system in six months”), but the phrase “meets performance objectives” is too va gue. It can’t be measured either. The be ginnin g of the goal is very attainable— six months of hard work should yield a decent trading system, with subsequen t systems developed even more quickly. It is also relevant and time bound. All in all i t is a good goal, except for the last few words. Let’s try to improve it. “I will create a trading s ystem in six months, one that trades the euro currenc y, returns an aver - age of 50 percent per year, with a maximum drawdown of 30 percent, a winning percentage of 45 percent or hi gher, and follows all the ste ps in a well‐de fi ned develo pment process. ” Bingo! That goal meets all the requirements of a SMART goal. You can easily compare any system you create to those goals. Once you have a SMART goal, and after you attempt to develop a few tradin g sys- tems, you mi ght fi  nd that what you felt were attainable goals are not that attainable. This usually hits people when they have annual returns and maximum drawdown listed in the goal. Sure, 100 percent annual returns is indeed possible (I am livin g proof!), but such returns are unrealistic if you also want a 10 percent maximum drawdown. Sometimes it is easy to see in advance that a goal is not attainable, but other times you’ll learn this only by runnin g throu gh the development process. In suc h cases, you ’ll want to turn your SMART goals into SMARTER goals. All that means is that after you try to reach the goal, if need be, you EVALUATE and REEVALUATE your goals. You adapt them to the situation at hand. This mi ght seem to some like giving up—i f your goal can’t be reac hed, just lower t he goal—but it can also improve your chances of succeedin g and fi  ndin g a good tradin g system. If you fi  nd yourself in a situation where your goals can never be met, you can either wal k away from t he process an d fi nd a new hobby or career, or you can eva luate an d adjust your goals to somethin g more relevant and attainable. www.rasabourse.com82STRATEGY DEVELOPMEN T—GOALS AND OBJEC TIVES Your goa l in developing a tra ding system s hould be only one or two sentences, enou gh to be SMART . But what about some of your wants and desires for a tradin g system? How do you handle them? They might not easily fi  t into your goal, but they are important nonetheless. Examples of this could be the market you trade, the time of da y you trade, or an y other feature you deem important. T o accommodate characteristics and traits I want in a trading system, but that are not important enou gh to include in the SMART goal, I create what I call a “wish list. ” It is as simple as it sounds; it is a checklist of features I want in my tradin g system. What kinds of items can be in a wish list? Figure   9.2    gives an example of a checklist I once created. This was for a mini S&P futures (symbol ES) strate gy I was tryin g to develop. They say that the strate gy must fi  t your personality, and tha t is what I was attempting to do here. By detailing my likes and dislikes, and having them written down, it was easy for me to sketch out what my tradin g system should look like . Of course, the longer the list of wishes, the tougher it will be to create a trading system. It will be ver y likel y that you will not be able to satisf y all your wishes. That’s okay, thou gh—just like everythin g in life is a compromise, so it is in tradin g development. Compromising on your wish list forces you to determine what is really important, and then just keep those items. Thin gs you thou ght were importan t maybe are not a ll that important. In t he end, though, the more wis hes you can mee t with your strate gy, the more likely you will trade it with confi  dence and resolution. This confi  dence and resolve, sooner or later, will reall y be of value to you. FIGURE  9.2Samp le Tra ding System “Wish List” Like/Dislike Trades e-minis only X% annual return, Y% max drawdown Calmar > Z, Sharpe > W No overnight exposure 2 or fewer indicators 100% mechanical (no discretionary trading) More than 2 trades per day Adds to losing positionsLIKES: DISLIKES:Does System Meet This? www.rasabourse.com83    Once you have fi  rmly established goals, you are ready to start developin g a trad - ing system. At the end of the process, you’ll have a trading system ready to test. To  get to that point, however, you fi  rst have to address the followin g topics: ■   Entry rules ■   E x it rules ■   Market selection ■   Time frame /bar size ■   P r ogrammin g ■   Data considerations The important points in each of these areas are discussed in the next two chapters. ■ How Will Y ou Enter a Market? Entry rules are the easiest part of desi gning a tradin g system for most people. Think of all the tradin g articles, advertisements, and information you have seen recently. What is usu- ally the focus? “80 percent winnin g signals!”  “Unique neural network entry techniques! ” “Never‐ fail indicators! ”  “A former roc ket scientist develops a foolproof technique for fi  ndin g winnin g stocks!”  The list goes on and on. Most traders are obsessed with getting the proper entry. Solve that problem, and everythin g else is a piece of cake, or so they think. The entr y lovers love to point to t he stoc k market and say, “Look what wou ld have happene d if you had bought Microso ft way back when.”  These folks tend to ignore t he drawdowns durin g the trade, as lon g as the entry was correct.  Trading Idea                                                       CHAPTER   10 www.rasabourse.com84TRADING IDEA There is an even more fundamenta l reason, I believe, for entries being t he focus of most tra ders. T he time before entry is rea lly the only time you feel in comp lete contro l. You te ll the mar ket, “Mr. Mar ket, you must do this, that, an d the other before I place a trade to enter. If you do not follow m y rules, Mr. Market, I will not enter a trade. I am in char ge here.” That feels nice, as opposed to the time spen t in a trade, where many times you hope and pray the market roller coaster will go your way! Entries, o f course, are just one piece o f the tra ding strategy puzz le. For ages, people have ar gued that entries were the most important aspect of a system, or tha t entries were t he least important part. Dr. Van T harp did a stu dy years ago wit h ran- dom entries, an d create d success ful trading systems by care fully designing t he exits. However, I ’m sure some peop le have a lso create d good systems wit h random exits. In my experience, the importance of the entry is directly related to the time you spend in a tra de. If you are a long‐term swing tra der, wit h trades lasting wee ks to months, you don’t need pinpoint accuracy on the entry. An entry a few days early or a few days late will probably not ruin the profi  tability of your strate gy. If you are scalping, however, then entry becomes very important. An entry o ff  by a tick or two could turn a winnin g system into a piece of garbage. Keep that in mind when you design your system. Know how exact your entry needs to be before you develop it. Many people have trouble developing entry ideas, and that is a shame because entry ideas are all around us. I have a very good trader friend who uses ma gazine covers as part of his decision process. When he sees a few ma gazine covers talkin g about the upcoming drought or the shortage of physical gold, for example, he knows this mi ght be a great time to enter the impacted markets—in the opposite direction, of course ! I provided some sources for entries in an earlier chapter, and I suggest you keep the list hand y when you run out of inspiration. The ke y, once you have this list of ideas , is to turn them into solid entries that can be back tested. This is where discre- tion has no place. An algorithmic strategy, by defi  nition, consists of an algorithm, a set of rules that defi  ne behavior. If your entry rules cannot be defi  ned ri gidly, then creatin g an al gorithmic system is not appropriate. Once you have your entry idea, you need to convert it to computer language. I f you do not know how to pro gram in your tradin g back‐test software, you will likely have to hire someone to do the wor k for you. Be fore you do that, it is best to put t he rule into what is called  pseudo code.   This is simply the entry instruction, given in plain English. Here is an example: If close this bar is the hi ghest close of last X bars, then buy next bar at market. Convertin g to a lan guage such as TradeStation’s Easy Lan guage would yield the followin g: If close = highest (c lose, X) t hen buy next bar at mar ket. www.rasabourse.com85TRADING IDEA Creatin g pseu do code is a rea lly important step, since it wi ll help you c larify your entry ru le, an d help you i dentify any important varia bles that you want to optimize (“X” in the prece ding examp le). A few pointers on creatin g a good entry: ■Keep it simple.   If you cannot explain the rule in plain English, you will have a tough time converting it to computer co de, and chances are t hat what you program may not be what you rea lly want. ■Limit the number of input parameters .  If you have two or t hree con ditions to your en- try, it is easy to have 5, 10, or even more parameters you feel should be optimize d. Remem ber, though, that for every parameter you optimize, t he more you run t he risk of overfi  ttin g your model. Keep it simple. I personally like to use only 1 or 2 optimiza ble parameters for my entries. ■Try to think diff  erently.   Movin g avera ge crossovers have been tested ad nauseum by professionals and amateurs alike. Try to develop an entry unlike any you’ve ever seen—one that very few others mi ght have tried. ■Use a single rule at fi  rst .  If you want an entry with multiple conditions, fi  rst start out with just one condition. Then, slowly add new conditions only if they si gnifi  cantly improve performance. You will likely fi  nd that many entry conditions you thou ght were important really were not. ■ How Will Y ou Exit a Market? Compared to entries, exits are the red‐headed stepchildren of tradin g strate gies. Most people, myself included from time to time, pay very little attention to exits. I suppose it has to do with the lack of control mentioned earlier, since durin g a trade Mr. Market is in control. It can also be uneas y for man y people to think of diff  eren t ways to escape a losing trade, since the whole point of trading is to have money mak - ing trades, ri ght? Exits, simply put, have a hu ge impact on overall profi  tability, and a trader really needs to spend a great deal of time preparing proper exits. Just as with entries, there are man y diff erent wa ys to exit. The most common wa ys are listed below: ■Stop and reverse. Your entry si gnal for a new position also becomes your exit si gnal for your existin g position. Many people like to be in the market at all times, and this met hod accomp lishes just t hat. ■T echnical‐based exits .  Support/resistance lines, movin g avera ges, candlestick patterns, an d the like can a ll be forme d into via ble exit ru les. The key wit h usin g such rules is to make sure the y coordinate with the entr y rules. Otherwise, exits could tri gger immediately after entries tri ggered. www.rasabourse.com86TRADING IDEA ■Breakeven sto ps.  Many peop le swear by a breakeven stop, w here as soon as practi- cal, you move t he stop‐ loss to a breakeven level. This may in deed be use ful for the psyc he of discretionary tra ders or for those o bsesse d with “winnin g,” who don’t want to see a winnin g trade turn into a loser. In my experience, thou gh, breakeven stops alwa ys seem to limit profi  t potential, since the y typicall y exit on a retracement, with the market then resumin g its earlier trend. ■Stop‐losses .  Some peop le swear  by  stop‐losses, and some people swear  y at  stop‐ losses. I look at it this way: if a stop‐loss, even one far away from your entry, si gnifi  cantly reduces your strategy ’s per formance, per haps your entry signa l is the real problem. Stop‐ losses, w hen coup led with good entries, can help prevent catastrop he. Can you imagine tra ding the mini S&P , wit hout a stop, rig ht before a terrorist attac k? True, you can get excessive slippa ge with stop‐losses, but barrin g a market shutdown, a t least you can get out, an d live to tra de anot her day. Stop‐ losses can be dollar based, chart based (i.e., exit near support/resistance), or based on parameters suc h as average true range. A simp le stop‐ loss can become very comp licated, indeed. ■Profi  t targets .  The old ada ge “let your profi  ts run” is a tried‐and‐true tradin g malapropism. But lettin g profi  ts run is not always the optimum way to trade. Sometimes it is better to hit a target, profi  t based or chart based, and then set up for the next entry si gnal. I tend to test with profi  t tar gets, but I also allow for a huge profi  t on the upper end. Many times, this becomes the best alternative. ■Trailing stops .  As the market rises in your favor, you keep a certain percenta ge of the profi  t. This really is a movin g stop‐loss, but instead of the stop leadin g to a loss, i t leads to a smaller profi  t. The one problem with trailing stops is that they can have many parameters that need optimization. The extra parameters ma y not be worth the eff  ort in live tradin g, althou gh they will certainly make a back test look better. ■ What Markets Will Y ou Trade? One of the toughest decisions you will make when designing your system is which market or markets to trade. There are really two schools of thou ght in this area, and I’ll descri be the advanta ges an d disadvanta ges of each. The fi  rst method is to desi gn a system for all markets. This would be a “one size fi  ts all” approach, where the rules for the system never chan ge as you move from marke t to mar ket. The parameters, t hough, cou ld be tune d (or not) for eac h mar ket. The advanta ge to this approach is that if one sin gle strate gy works well on all markets, then it likely has a hi gh degree of robustness. This may make the system less vulner- able to market chan ges, since the system has likely seen many types of diff  eren t markets across the tested history. The bi g disadvanta ge to such an approach is tha t development becomes infi  nitely more diffi   cult. Desi gning a system for one market is www.rasabourse.com87TRADING IDEAtough enou gh. If you now deman d that the system wor k for many mar kets, you wi ll struggle to fi nd an accepta ble strate gy. In suc h situations, developers typica lly do one of two t hings: (1) t hey re lax their acceptance criteria, or (2) t hey test on a ll markets, and then se lect the best 5 to 10 performers to tra de. Realize that both of these compromises, while likel y necessar y to create a multi - market system, are very bad. Relaxin g acceptance criteria will lead you to abandon the system ear ly, as you rea lize wit h real money t hat the strategy does not meet your initia l objectives. T esting on mu ltiple mar kets, an d then “cherry pic king” the best performers to trade, is just another, albeit sneaky, way of optimizin g. Creating a strategy for one particu lar mar ket is t he other popu lar approac h. One advantage to t his met hod is that it can be customize d to the characteristics o f the mar ket. For examp le, it is known t hat currencies ten d to tren d well, so may be a breakout‐type system is appropriate. Or, for the equity markets, a mean‐revertin g strate gy with a lon g bias mig ht be best. Anot her advantage is t hat, as mentione d earlier, it is a lways easier to create a system for one market than for multiple markets. That doesn’t mean it is a better system, thou gh; it just means it is easier to create. The disadvanta ge to creatin g a single‐market system is that when you create a system knowing the characteristics of the market, you are assumin g those characteristics will remain the same forever. While tha t may be true, what if it isn’t? How will your trend‐followin g currency system perform when currencies, for whatever reason, become mean‐reverting markets? As you can see, there are valid points for and a gainst each approach to marke t selection. I personall y have used both over the years. When I fi  nished fi  rst or second in the World Cup Championship of Futures Trading three straight years, I used a “one size fi  ts all” system, traded on rou ghly a half‐dozen to a dozen markets. That worked well. Currently, about half of the systems I trade are of this variety. I also like sin gle‐ market systems, not only because they are easier to create, but also because I can mix and match them for diversifi  cation. In any given year, some of these systems will underperform, some will be around breakeven, and some will outperform. Havin g a multitude of single‐market approaches makes this more manageable, especially when strate gies have to be retired. ■ What T ype of S ystem Do You Want? Whenever I be gin lookin g at a new strate gy, I almost always see if it can be made into a day‐tra ding strate gy. I defi ne “day tra ding” as in an d out o f a tra de, or mu ltiple trades, in a sin gle session. There are some nice benefi  ts to such a strate gy: ■   No overni ght risk from unexpected events, since you are fl  at. ■   R educed margin requirements, ma king it easier to tra de wit h large size (a lthough most people should not be doin g this, as the hi gher levera ge can lead to a greater chance of disaster ). www.rasabourse.com88TRADING IDEA ■   A  “working jo b”–type feeling. You fi re up t he computer in t he morning, tra de a while, make your daily nut, turn off   the computer, and go home and play with your kids the rest o f the day—a very satis fying way to live. Usuall y, when I start development, I select short time frame bars (one‐ to fi  ve ‐ minute), throw in the “set exit on close” statement to exit at the end of the da y, and jump into development. Nine times out of 10, thou gh, the strate gy fails. Re gardless o f the entry i dea (tren d, countertren d, whatever) an d exit sc heme ( fi xed stops, moving stops, breakeven stops, pro fi t targets, etc.), not hing ever seems to wor k consistent ly. Inevitably, if I like the strate gy idea, I’ll then open up the time frame to 60‐minute bars, 240‐minute bars, daily bars. I want to see i f my i dea has any va lidity at a ll. What almost a lways happens? Per formance gets better! May be the per formance sti ll doesn’t meet my goa ls, but the per formance on a daily chart is a lmost a lways better t han on a 1‐minute chart. I’ve seen it enou gh times to realize it is more than a coincidence. The question t hen becomes: w hy do I see t his behavior? Here ’s what I have come up wit h: ■   Number of trades and tradin g costs. Let’s say I have a daily bar strate gy that trades 1 time per month, or once every 20 bars. That will cost me roughly $25 in trading costs. If I go down to 1‐minute bars, the same strate gy might trade 10 times per day (once every 120 bars), leadin g to $250 in tradin g costs. That is a hu ge dif- ference in costs that must be overcome. Add in the fact that 1‐minute moves are smaller than daily moves, and it gets even harder. ■   There seems to be more randomness in the data as you go to smaller time frame bars. Look at a 1‐minute chart of the mini S&P futures (symbol ES) and mos t days it is just narrow ran ge noise. It is harder to fi  nd the true price path when the random noise level is high. Daily bars, as an alternative, seem to have more trends. Of course, where I see random noise in data could just be due to other biases I have fl  oatin g around in my brain. ■   Entry and exits become a much more important part of the s ystem when you have small stops and tar gets, as most day‐tradin g systems are set up to be. So I must have really great entries and exits, ones with very good edges. But the better the entry, the harder it is to fi  nd durin g development. Plus, miss the entry by a tick, and you may lose a good percenta ge of your pro fi t. If you are swin g trading with daily bars, a tick or two at entr y probabl y won’t mean as much, relative to overall size of an avera ge trade. ■   With tick charts or 1‐ to 5‐minute charts, think about who you are tradin g against. Many times, it is hi gh‐frequency tradin g fi  rms, which probably have better entries than you an d have a spee d advanta ge over you. I feel that the impact o f the pros is less noticeable at hi gher time frames, althou gh I realize many pros trade daily bars, too. www.rasabourse.com89TRADING IDEA ■   W i th most strate gies, as I mentione d before, I fi nd the fewer tra des there are, the better. T his cou ld be due to tra ding costs, but it a lso cou ld be due to a very bad reason: may be you t hink you have an e dge, but wit h fewer tra des, the sta- tistica l confi dence t hat you have an e dge is a lot lower. Put anot her way, i f I had 2 strate gies that avera ged a $50 profi  t per trade, and one had 100 trades over the past 10 years, and another had 1,000, I’d always pick the 1,000‐trade strate gy (so would every rationa l person). But t he rea lity is t hat the 100‐tra de strategies are a lot easier to fi nd—may be because t hey aren ’t really edges at a ll, but just tempo - rarily lucky strate gies? I really wis h that all my strategies were day‐tra ding‐type strategies. In actua lity, probably 9 out o f 10 are t he exact opposite. My best strategy over t he past four or fi ve years holds a position for weeks to months—defi  nitely not a day‐tradin g approach. ■ What Time Frame/Bar Size Will You Trade? Almost as important as the market you will trade is the time frame(s) you select. For most people who look at bar charts, this is simply the len gth of time for each bar. Of course, strate gies will perform radically diff  erently on diff  erent time frames, so it is best to select a time frame that meets your objectives. Do you want to be in and ou t quickly? Maybe a 1‐minute or a tick‐based chart is best. Do you prefer lon g‐term swing tradin g? If so, maybe a daily or even weekly time frame is what you need. The point is to select a time frame that matches your interest. One important factor to realize with time frame is that typically shorter time frames lead to more trades. If you have small transaction costs, with man y quick trades, this is terrifi  c—just witness the success of all the high‐frequency trading fi  rms. Even a small ed ge can yield bi g profi  ts when repeated enou gh times. But, for most of us retail traders, hi gher transactions costs are just part of the game, makin g quick strategies that much tougher to succeed with. When settlin g on a time size for a bar, an approach that many developers use is what I call time frame contraction and dilation.  The concept is to test a strate gy with a 10‐minute time frame. If it is successful, the thinking goes, then testing on a 9‐minute bar and an 11‐minute bar should also be profi  table. One minute either way s hould not destroy t he strate gy, and good performance in t hese contraction an d dilated periods su ggests robustness. I personall y have had little success with this approach, and I believe there are two reasons for it. First, by changing the time length of a bar, over t he course o f a day there are now a diff  erent number of bars to evaluate. In the precedin g example, changing a 10‐minute bar by 1 minute leads to 9 percent more bars or fewer bars. This can heavily infl uence t he per formance o f indicators you ma y emp loy. The other issue I have with this approach is that man y traders make their decisions on the close www.rasabourse.com90TRADIN G IDEAof a standard period bar. Think of all the people trading o ff  charts, most of them us - ing standard time periods of 5, 10, 15, or more minutes. If your system is trading a t a diff  erent time, your results can var y widel y from the results with a standard (i.e., 10‐minute) bar. Puttin g my personal objections aside, if you have success with 9‐, 10‐, and 11‐minute charts, then I’d a gree that your system has robustness in it. It would give me extra con fi dence. At t he same time, t hough, if 10‐minute per formance was goo d, but 9‐ an d 11‐minute per formances were aw ful, I wou ld not necessari ly throw ou t the baby with the bathwater. If you decide to test wit h tick charts, one important consi deration wit h bar size and time frame is t he amount o f historica l data avai lable. I discuss t he question “how much data to use ” in a later section, but for now rea lize that many data ven dors provide only six months of data. This can also be an issue with short time frame bars (1‐ to 5‐minute), w here or ders are triggere d intra bar. Tic k data are a lso importan t for specialty bars, such as point‐and‐fi  gure charts, Kase bars, Renko bars, and so on. The important point is that if you rel y on tick charts or tick data, think carefull y about the implications of limited historical data before you test. One fi  nal important consideration involves the daily settlement price and the daily last price traded, which is important if you are usin g daily bars. “What is the problem, ” you ask, “aren’t closing/settlement prices and the last price traded the same thing? ” In some markets, yes, and in some markets no. Plus, the meanin g of these terms has changed with the advent of 24‐hour tradin g. The gold market is a good example. Bac k in the days when gold was only pit traded (which may easily be part of your historical testin g period), the market closed at 1:30  p.m . Eastern time , and the last trade of the day was usually very close, but not necessarily identical to, the exchan ge published settlement price. Now , however, the gold market trades electronically, and it trades until 5:00  p.m . Eastern time. Unfortunately, the exchan ge settlement price is derived from the tradin g that occurs from 1:28 to 1:30  p .m.  You can ima gine how the price at 1:29 p.m. , the settlement time, can vary widely from the last price traded at 5:00 p.m . The price action on Wednesday, September 18, 2013, is a great example, as shown in Figure   10.1   . A Federal Reserve announcement at 2:00  p .m. ,  after the settlement price had been established, roiled the markets. The settlement price and the last traded price were dramaticall y diff erent! Data vendors di ff er on how the y treat settlement prices and last traded prices. As of the time of this writin g, TradeStation, for example, uses the exchan ge settlement as the closin g price for daily and weekly bars. For X minute bars, the close of the last bar of the day is also the last tra ded price. Kinetic k, a provi der for NinjaTra der, follows the same a pproach. Another popular data vendor, CQG, however, uses the last price traded as its dail y bar close. How can t his be a pro blem in your testin g? Well, say, for examp le, you are testin g with daily bars, and your strate gy uses the instruction “sell the bar at close.”   Your strate gy www.rasabourse.com91TRADING IDE A dutifull y executes the command at 4:59  p.m., and you are fi  lled. But later, when the exchange settlement price is applied to the data, the strategy will think you were fi  lled at the settlement price (which is now the daily bar closin g price), but you were actually fi  lled near the last traded price. This is just one of the wa ys back‐test results can fool you. ■How W ill You Program t he Strategy ? Once you have your basic entry an d exit ru les thought out; you have se lected a mar - ket, time frame, an d bar size to test; an d you have o btaine d the desire d amount o f historica l data, it is time to put toget her your strategy for testing. T he question for most peop le at t his point is “can I program t he strategy myse lf?”  The answer for a true do‐it‐yourse lfer is un doubtedly “yes.” But i f you have never programme d before in the language o f your strategy‐testing so ftware, you mig ht fi nd this to be a daunting task. Here are a few tips t hat mig ht help you out.  FIGURE 1 0.1  Don’t Assume t hat Sett lement Price = Last Price Tra ded www.rasabourse.com92TRADIN G IDEA If you are comp letely clueless a bout computer programming, an d you have no desire to learn how to do it, your programming tas ks are best left in t he hands of professiona ls. You can hire an expert at an hourly rate or even a team o f experts so that no one developer knows a ll your tra ding secrets. T he drawback here is t hat every time you need a code chan ge, even a small one, you will have to wait for the developer to do it, and you’ll likely be char ged extra for the privile ge. The extra time and cost associate d with changes, up dates, en hancements, an d the like can a dd up quickly. If you sti ll feel that a programmer is t he right choice, you can fi nd them a t various tradin g forums, or by contactin g your software vendor. An a lternative is to partner wit h a programming expert, i deally someone w ho will be intereste d in tra ding the fi nished project. You won ’t have to worry a bout your partner ’s stea ling your i dea, an d the collaboration can lead to far more pro fi table systems. I have done this before, usually as the pro grammin g expert, and it is really satisfying w hen it wor ks. The pro blem is in fi nding peop le you can trust enoug h to help you. My preferred and recommended approach is that you should pro gram everythin g by yourself. All the trading software packages out there have classes, books, online tutorials, and sample strate gies to help you develop your skills. By going this route, you will not have to worry about people stealin g your “secret sauce.” Plus, as you learn the programming aspect, you will get more familiar with the idiosyncrasies o f the back‐test en gine. This is really important when results look too good to be true. Once you know the software and pro grammin g well enou gh, you’ll never have to wonder if you have only fooled the back‐test engine but not the real world. www.rasabourse.com93    With the entry, exit, market, and time frame/bar len gth decided, now comes one of the most important, most underappreciated, yet least understood as- pects of testing: market data. People take data for granted, and that can be a big mistake. I’ve seen hu ge diff  erences in strate gy performance just due to diff  erent data sources. I’ll make the grand assumption that your data are clean, without bad data points, missing data, and so on. Of course, that is not the case at all, practically re- gardless of vendor. But most people understand that data may have errors; what most do not understand is the im pact behind the answers to these data‐related questions: ■   How much data should you use? ■   Should you use pit data or electronic data? ■   Should you use continuous contract data? ■   Did the advent of electronic tradin g impact market data? ■   How do you test with forei gn exchan ge (forex) data? Now , before you start testing, is the time to look at all these issues, and make some decisions. T o go back and retest with diff  erent a data structure typically means you wi ll be using tainte d data, an d that is not goo d. ■ How M uch? If you are like me, you’ve probabl y done the “e yeball” test more than a few times. You look at a c hart an d, knowin g your entry an d exit criteria, per form a quic k test of the past few da ys or weeks of data. After a few trades, if you see a lot of profi  t, you get excited and venture into more in‐depth testin g. If you have losses, you either abandon the strate gy or twea k it a bit and try a gain.  Let’s Talk about Data                                                          CHAPTER   11 www.rasabourse.com94LET ’S TALK ABOUT DAT A Hope fully, you rea lize the futility o f such a simp le test. Not enoug h trades, no t enou gh market con ditions, just not enou gh of anything to ma ke an in forme d decision— perio d. T o attain long‐term success, you must look at more data than this. So what is an acceptable amount of data? When I am asked this question, I almos t always repl y, “As much as possible.” More data provides more market conditions— more bull markets, more bear markets, more fl  at markets. It also provides more quie t perio ds and more vo latile perio ds. As you ma ke more tra des, an d your system remains profi table, it becomes less an d less likely that the resu lts were due to just c hance. Think of a coin fl  ip. If you fl  ip it once, chances are 50/50 that it will be heads. If you fl ip a coin 10 times, t he chances o f heads’ coming up at least once is quite goo d. Flip the coin 100 times, an d you are practica lly guarantee d that heads will appear at least once. More fl ips leads to more certainty, just as more tra des leads to more con fi dence. For daily bar systems, which tend to be swin g systems (trades lastin g days to weeks), I fi nd that 10 years o f data is a goo d compromise. It a llows your strategy to see many diff  erent market conditions and works well with walk‐forward testing (which requires some initialization time). For intraday or short‐term systems, I also like using 10 years of data. Practical considerations, thou gh, such as the introduction of electronic data, may make this a diffi   cult task. So, in many cases I will use only 5 years of data, realizin g that my results may not be as robust as a 10‐year tested system. For some people, 5 to 10 years of data is too lon g a time period to test, or the data are not available. In such cases, I recommend the followin g rules of thumb: for each rule and parameter you have in your strategy, have at least 30 to 100 trades. As an example, consider a strate gy with two entry conditions, and two exit conditions. For such a system, I’d like to see 120 to 400 trades. Anythin g less than this mi ght be ac - ceptable but also runs the risk of the strategy’s being “matched” or fi  tted to the data. The drawback to usin g as much data as possible is that it makes developmen t much tou gher. Let’s face it—at best, most tradin g systems out there are probably breakeven before commissions and slippage. This means the longer you test it, the more likely it is that gross profi  ts will revert back to zero. I’m sure you witnessed this before, when a strate gy has fantastic performance in a one‐, three‐, or six‐month period, only to give it all back in the next period. So, in the end, ask yourself if you want a lon g‐runnin g positive system, or do you want a great performer over a shor t perio d of time? T he former is muc h tougher to fi nd, and the latter is muc h more likely to lead to real‐time losses. ■ Pit or E lectron ic Data ? Back in the old days o f pit tra ding, knowin g what data to use was easy—just use t he pit data because that was all there was! T oday, with electronic data takin g over, there are multi ple options: www.rasabourse.com95LET’S TALK ABOUT DAT A ■   Pit data on ly ■   Electronic data on ly ■   Pit an d electronic data to gether ■   Data durin g traditional pit times only ■   Data durin g all hours ■   Data during day session/evening session The choice for data going forward mi ght be easy—electronic data are the bes t because t hat is w here t he volume current ly is, but w hat do you do when you are historica lly testing a strategy? I’ll give you a simp le examp le to highlight the dilemma. Let ’s say you are tra ding gold, and you want to use 20 years (excellent choice!) of data, with 60‐minute bars. Twenty years ago, t he pit was t he only data source, so you have to use t hat. In a daily pit session, there were probably six to ei ght bars rou ghly (since pit tradin g hours over the years chan ged, the number of 60‐minute bars per day will chan ge, too). For your strategy, let’s say you use a 14‐period moving average. This will typically represent two tradin g days. Now , fast‐forward to today’s electronic markets. T oday’s markets trade for rou ghly 23 hours per day. If you still use a 14‐period moving average, that will only equate to a half tradin g day, instead of the previous two tradin g days. Do you think that can radicall y infl  uence your historical tests? It sure can! How do you handle this? Typically, I rely heavily on daily data, especially the daily settlement prices. Pit and electronic settlements are identical. I do not like usin g daily hi ghs and lows, since the avera ge ran ge between pit hi gh and low will usually be less than electronic day high and low . If this sounds confusing, just think of an overni ght price shock that lasts for an hour before revertin g to the previous price level. In the old pit da ys, such a shock would never have shown up in the data, since it happened overnight. For electronic data, though, the daily high would include this price shock. Therefore, your strate gy may perform quite a bit diff  erently in the old days versus toda y’s market. One trick that helps make all the data the same is to select a standard dail y ses- sion time, and appl y it to your complete historical database. For currencies, for examp le, the pit use d to be open from 8:20  a.m.  to 3:00 p.m.  Eastern time. To keep this time intact in the electronic era, I simpl y create a special “currenc y pit” session from 8:20 a.m.  to 3:00 p.m.  for all the historical data. Then all m y data are consistent. With all the available options with data, I hi ghly recommend you take time and think about the data you are usin g. Makin g sure it is consistent throu ghout your test history is defi nitely the best wa y to test. It ma y not be that eas y to create t hose data, though. www.rasabourse.com96LET ’S TALK AB OUT DAT A ■ Continuous  Contracts One concept t hat stymies most junior s ystem developers is t he use o f continuous contracts in futures mar ket testin g. Continuous contracts are nee ded because eac h futures contract has a limite d life, an d continuous contracts create a never‐en ding data stream. T he concept is simp le—just arti fi cially stitc h toget her expiring futures contracts to create one continuous data stream—but the implementation path is peppered with pitfalls, just waitin g to catch the unwary. I’ll discuss these pitfalls for the three major techni ques of futures data selection. The purest wa y to test with futures data is just to use the raw contract data. Then you don’t have to worr y about continuous contracts at all. The problem is that mos t tradin g software is not set up to easily accomplish this. Let’s say, for example, tha t you want to test a strategy on the euro currency. If you were testing in 2013, from Januar y 1 to approximatel y March 15, you would use the March contract, 6EH13. From March 15 to June 15, you’d use the June contract, 6EM13. In this way, you’d progress throu gh all the years of your data. But you’d have some problems in test - ing this way. First, you’d have to put in lo gic to (1) determine the proper end date for each contract (i.e., before fi  rst notice day or last trading day, whichever comes fi  rst) and (2) “roll over” the current position from the current contract to the new contract. Certainl y, this could be accomplished, but it would require some detailed programming. The bigger issue is if you wanted to optimize the strategy over all these contracts. Most tradin g software requires an optimization on one chart of data. With multiple contracts of data, you cannot optimize without doin g it manually, a tedious and painstaking process. To  get around these limitations of testin g with the individual contracts, many peo - ple splice the contract data together in a continuous contract. There are two primary (and numerous less popular) ways to create a continuous contract, and, of course, both have some serious pitfalls. The fi  rst t ype of continuous contract is a nonadjusted continuous contract. Using the preceding example, on March 15 the contract data would switch from March to June. The nice thin g about this method is that the ori gi- nal data are preserved—no adjustments have been made to the data. The pitfall with these data is that, at rollover, rarely if ever will the two contracts be the exact same price. Frequently, the front month will have a si gnifi  cant discount or premium to the next month. An example of this is shown in Fi gure   11.1   . Usin g these data as is will create false signals and false pro fi ts an d losses. Assume you are long Novem ber soy - beans, an d then you ro ll over to t he May soy beans. Wit h a sprea d of 38 points, wit h an unadjusted continuous contract, a tradin g strate gy will think that gap is real and that you pro fi ted from it. T he rea lity, though, is that you wou ld not actua lly benefi t from t he gap. T he gap exists on ly because t he contract mont h has changed. Many people get around this artifi  cial gap by usin g what is called a back‐adjuste d contract.  Wit h this type o f contract, t he gaps are su btracte d out, an d all previous data www.rasabourse.com97LET’S TALK ABOUT DATA are adjusted appropriatel y. An example would be as follows: Suppose on March 15, June euro closes at 1.3512, and March euro closes at 1.3516, a diff  erence of .0004. T o remove this gap of .0004, all data from March and before must have .0004 added to it. This will remove the gap from all data, and provide a nice continuous data stream . It seems like the ideal solution . Of course, no method is perfect, and this technique has a couple of problems, one of which practicall y no one talks about, at least that I’ve ever seen. The fi  rst problem is that constant ly accountin g for gaps at every ro llover leads to a situation w here the historical data actually become ne gative. An example of this is shown in Fi gure   11.2   . Clearly, crude oil never had a ne gative price, but that is what the continuous contract shows an d what your strate gy will test wit h. Although the continuous data may seem stran ge (don’t show your friends your “Holy Grail” tradin g system with these marke t data, since they’ll think you are crazy for testin g with ne gative prices!), the results are accurate, provi ded you do not fall victim to t he secon d pitfall. The second pitfall with continuous back‐adjusted contracts is also the issue mos t likely to lead to invalid tradin g results. In a nutshell, you cannot have any indicators FIGURE 11.1   Contract Prices Will Be Di ff erent for Di ff erent Months www.rasabourse.com98LET ’S TALK AB OUT DAT Athat divide or multiply prices when you use back‐adjusted contracts. An example best shows the point: Suppose you have a strategy that uses the percentage change in day‐to‐day close, close i /close  i−1 . On March 10, you are usin g the March contract, and the close is 1.3500. The previous day close is 1.3420. The percenta ge chan ge calculation is then 1.3500/1.3420 = 1.00596. Fast‐forward to March 20, when the June contract is the front contract. When you performed the continuous contract back adjustin g, .0030 was added to it. This is an extreme amount for rollover adjustment, just to prove my point. Thus, now the March 10 close is 1.353, the previous da y close is 1.345, and the ratio is now 1.353/1.345 = 1.00595. The ratio for the same date has chan ged! Plus, it will change again at every rollover in the future. This means that when you back test a strate gy with ratios, your back‐test si gnals will be diff  erent than real ‐ time si gnals. The diff  erence may not be much, but it will certainly be there. The question will then be “can you rel y on performance histories that you know will chan ge in the future?” If this seems like a su btle distinction, just ima gine w hat happens w hen the price data approach zero, the other known pitfall on back‐adjusted data. Dividin g by zero or a number close to zero will lead to a hu ge result! Clearly, that would never happen in rea l time—un less, o f course, t he actua l price o f the instrument in question went to zero. Just do not count on that ever happenin g! The onl y way around this pitfall is to take special care that division or multi - plication is not use d with price data in back‐adjuste d continuous contracts. Bot h  FIGURE 11. 2  Back‐Adjuste d Continuous Contracts Can Have Negative Prices Soybean prices were not really less than 0, although a back-adjusted continuous contract says it was! www.rasabourse.com99LET’S TALK ABOUT DATAratios of prices and percenta ge chan ges in prices are no‐nos. If you choose no t to follow t his ru le, do not be surprise d when (1) your historica l performance results change over time an d (2) t hat your historica l resu lts an d future resu lts do not matc h. ■The Impact of Electronic Markets Many tra ding system developers test strategies on ly on e lectronic data. T hey ignore any pit data, so their strate gies typically only test for the past few years. Their rea - soning is t hat the mar kets fundamenta lly changed when electronic mar kets came on the scene, so strategies t hat wor k now don’t necessari ly have to wor k in t he long‐forgotten pit era. T o t hat argument, I both agree an d disagree. Electronic markets have undoubtedly chan ged the futures markets. Without a pi t full of traders, t he whole dynamic o f pricing has been a ltered. In fact, many former pit traders, who made a very good livin g while on the fl  oor, stru ggled mi ghtily when they moved to electronic tradin g. Most were tryin g to trade as they did on the fl  oor, and the market had changed enough that those techniques were no longer profi  table. Add in today’s hi gh‐frequency tradin g fi  rms, and the short‐term market is certainly diff  erent than the old pit tradin g days. On a longer‐term scale, though, almost all commodities are dictated by the law of supply and demand. The venue for tradin g—electronic, pit, or a combination o f the two—doesn’t have a lon g‐term impact. It doesn’t make sense to think that hi gh‐ frequency traders, who are in a trade for only a few seconds, have an impact on the price two or three months from now . With those contrastin g views in mind, I still use pit‐traded data, and the history they provide, for my longer‐term swing‐trading development. That way, my strategy is able to experience more market conditions. If a strate gy I develop for soybeans works well in the 1990s, 2000s, and 2010s, I am more confi  dent and im pressed with the system. Some people would even go back to the 1970s and 1980s! For shorter‐term systems, especially intraday ones, usin g only the electronic data may make sense. If it also works on pit data, that is great, but I probably would not make it a re quirement. ■Testing w ith Forex Data If you are testin g a forex system, there are two major concerns you need to be aware of. The fi  rst issue is that not all forex data are the same. In fact , since the forex is decentralized, there is no offi   cial price stream like there is for futures markets. Tha t means that each broker will have its own unique price data set. Of course, if you bac k test with the same data source that you will use going forward, then there is no issue. www.rasabourse.com100 LET ’S TALK ABOUT DAT ABut i f you test wit h data from broker A, an d then want to tra de it live wit h broker B, the system will now have diff  erent data to deal with. In that case, you can basically toss a ll your back tests out t he win dow , as t hey are no longer va lid. Depen ding on the data di ff erences, your results mi ght be better, and they mi ght be worse. The point is, though, that you have invalidated all your testin g by chan ging data sources. The second issue with testin g forex data is in the types of orders you use. If you are testing your system wit h forex data, you rea lly nee d to be care ful with how your strategy p laces or ders. Because o f the issue I s how later, I on ly use mar ket or ders for entry and exits. My forex strate gies never have limit or stop orders in them. O f course, I a lways a dd the sprea d cost into t he fi nal profi t/loss on eac h trade, but by using mar ket or ders, I never have to worry a bout “phantom ” fi lls. What is t he pitfall to using limit an d/or stop or ders wit h forex data? In futures markets, there is one price data stream, which always represents the traded price. With forex, however, t here is both a bid data stream an d an as k data stream. T he dif- ference between these two data streams is the current spread, which is typically a few pips. B y defi  nition, you can onl y buy at the ask and sell at the bid. The problem with testing a trading strategy with forex data is that the data stream shown on the chart is typically the bid data stream. Althou gh you could alternatively show the ask data stream (if available), most tradin g software back‐test en gines can use only one to calculate trade results. If your trading software can calculate fi  lls us- ing bid and ask data simultaneously, you may not encounter this issue. For example, non‐object‐oriented TradeStation can onl y test with bid  or  ask data. MultiCharts, onr the other hand , can test with both bid  and  ask data. It is a good idea to check yourd software fi  rst, thou gh, before assumin g this is not a potential issue for you. If it is a potential issue for you, here is an example of how it could be a problem: Suppose you are trading the EURUSD forex pair. The current price is 1.3502/1.3505 (I am usin g an unrealistically hi gh three‐pip spread for this example, but the principle holds for even smaller s preads). That means the bid is at 1.3502, and the ask is at 1.3505. Remember, you can buy at the ask but not below , and you can sell at the bid but not above. Let’s also assume your tradin g software shows you the bid data, so currentl y it shows 1.3502. For this example, your strategy places an order to buy at 1.3500. Shortly after your order, the price drops to 1.3499/1.3502. Since the price on the chart is now 1.3499, an d your buy price is 1.3500, t he software strate gy engine thinks you were fi  lled at 1.3500. It thinks you are currently lon g, but the ask price only hit 1.3502, so in real life you would never be fi  lled. “Big deal!” you mi ght say. “How o ften can t his possi bly happen? ”  Well, it wi ll never happen for losin g trades, since for losers the price will keep fallin g and you will get fi  lled in real life, just as your back‐test en gine got fi  lled. But for winnin g trades tha t turn pro fi table before t he ask price hits 1.3500, you wi ll never get fi lled. Depen ding on your tradin g methodolo gy, it could lead to a hu ge discrepancy between back‐tes t www.rasabourse.com101LET’S TALK ABOUT DAT Aengine resu lts and real‐wor ld resu lts. At t he very least, your back‐test report wi ll al- ways  be on the optimistic side. Since you use that information to develop your strategy,s you cou ld be basing your tra ding decisions on some very suspect resu lts. Although the examp le I presente d is for limit or ders, t he same t ype of situation occurs wit h stop orders. You will have sto ps fi  lled at prices that never show u p on the bid data chart. To  get around this issue, you cannot just add slippa ge to each trade like you can with futures. T his is because t he bid/ask problem is not a situation o f slightly worse fi  lls—it is a case of fi  lls or no fi  lls. Or your software platform may o ff er advanced order techni ques and methods (TradeStation refers to the method as “ price series provi ders”). The key is to be able to back test t he same way you tra de live. T hat is precise ly why I use mar ket or ders for all my forex strategies. Since I use or ders such as “sell next bar at mar ket,” I can have some losses t hat are muc h bigger t han a stop‐loss would be, and that is the bi g disadvanta ge of market orders. Just ima gine, for examp le, how muc h the price cou ld change in a fi ve‐minute bar aroun d a Federal Reserve announcement. In the long run, though, I know market orders will always be fi  lled, and they back test the same, after accountin g for the spread, as they trade in live accounts. Therefore, I have found this situation to be acceptable, since it provides back‐test results that match real market fi  lls fairly well. ■ Summar y As you can see, the issues behind market data are much more complex than the trad - ing software leads you to believe. It is critical that you put in the time and eff  ort up front to examine and understand the market data you are usin g. Utilizin g the wron g data, or using the right data incorrectly, can lead to completely bogus test results. In most cases, unfortunatel y, you will not even realize there is an issue at all. I recom - mend that you spend as much time in the be ginnin g reviewin g your market data as you do in formulating your entry and exit criteria. www.rasabourse.comwww.rasabourse.com103  At this point, I ’ll assume you have t he strategy co ded, debugge d, and ready to test. Un fortunate ly, when they get to t his step, many tra ders wi ll just test t he strategy over t he whole mar ket history t hat they are intereste d in an d see how pro f- itable the strategy is. Some wi ll go a step beyon d this and actua lly run t housan ds or even mi llions o f optimization iterations as part o f this. W hat better way to see how good strategy can be than by running it to its extreme? As you may have guesse d, I am fi rmly against running t hese kinds of compre hen- sive tests. T hese tests may lead to a few great‐ looking optimize d back tests but wi ll almost a lways fail in rea l‐time tra ding. Since success ful real‐time tra ding is t he goa l, shouldn’t that be our success criteria, rat her than a nice‐ looking back test? The other major pro blem wit h testing on a ll the data is t hat once you test t he data, you “burn” it. This means that an y subsequent retests will be just a bit more curve fi  t, a bit more optimize d. Think about it: You run strategy A over a ll your data. It looks good, but not great. You ma ke a few minor twea ks and rule changes to your strategy and then test the new strategy B. Now , it yields much better results. You are ecstatic. But do you rea lize you just optimize d? No, you did not optimize in t he sense o f running strategy A wit h optimize d parameters, w hich is how most tra ding so ftware descri bes optimization. But you certain ly did optimize, as you teste d both strategy A an d strate gy B, an d picked the best one. Even t hough in this case strate gy B has a better back test t han strategy A, I ’d believe t he resu lts of strategy A more (un less strate gy B is much, much better than A), since A was run with untouched data. Theoretically, you should run a strate gy on a set of data one time, and one time only. If it wor ks, great, but if it doesn’t wor k, you s hould just move on to t he next data set or instrument. That ori ginal data are tainted by your testin g, to a de gree. This is the point where theor y and practice deviate. In actual practice, you will eventuall y test mu ltiple strategies over t he same data, may be not rig ht away, but eventua lly it  Limite d T esting                                                       CHAPTER   12 www.rasabourse.com104 LIMITED TESTIN Gis inevita ble. That is w hy you nee d to be care ful. In my testing, I like to follow the teachings of Don Juan described in the book  Journe y to Itxlan: The Lessons o f Don Jua n (Simon & Sc huster, 1972): “He taps it lightly, stays for as long as he nee ds to, an d then swiftly moves away leavin g hardly a mark. ” If you treat the data as fra gile, you are more likely to avoid this issue. Treat your data with utmost care! Since testing wit h all the data is a no‐no, w hat is a reasona ble and accepta ble way to test a strategy? On one hand, you want to see i f the core i dea you developed has any merit to it; but on the other hand, you want the ability to add or chan ge rules to the strat - egy, wit hout falling victim to curve fi tting or hindsight bias. A lso, you want to leave as much data in your dataset untouc hed as possi ble, since t his will create a better an d more realistic wa lk‐forwar d test (wa lk‐forwar d testing wi ll be discusse d in the next c hapter). Given all these competin g forces, I have found it best to do preliminary testin g on a chunk of historica l data, but not t he whole data set. For examp le, if I have 10 years of data for my full test, I will do the preliminary limited testing described below on one or two years’ worth of data. I try to use as little as possible, while still getting enough trades to be statistically meaningful. I will try to take the two years of data a t random, not usin g the same data all the time or favorin g any particular years. Some traders advocate testin g fi  rst on the “most interestin g” data. For most com - modities and futures , that would be the 2007–2009 time frame , when the world markets nearly collapsed. Their point is that if a system performs badly at this time, it will likel y perform poorl y at the next market shock. While I understand their ap - proach, I respectfully disagree. I would try to avoid preliminary testing during the fi  nancial crisis, since it may lead me to a system that performs well only durin g se- vere shocks and panics. While a system such as this mi ght be nice at those times, I’d fear that the system would lose a lot more during the more prevalent “normal” times. If I take my two‐year chunk of data and adhere to the followin g process, I’ll end up fairly certain whether my idea has any merit. The objective at the limited testin g phase isn’t to determine if a system is tradable; rather, it is used as a hurdle to see i f the tradin g system has any potential. Frequently, I have tradin g strate gies that survive the limited two‐year test but later fail the more ri gorous tests. Only infrequently does the reverse occur, where I dismiss a strategy because of the limited results, and it turns out later to be a fantastic strate gy. ■ Entr y Testin g The fi  rst thin g I usually want to know when testin g a tradin g system is whether the entry has any use fulness. Many times, w hat looks like a good entry appears t hat way only because of the exits. Frequentl y it is diffi   cult to know the true impact of entries when tested as a whole s ystem. www.rasabourse.com105LIMITED TESTING When I eva luate entries by themse lves, I typica lly per form t he ana lysis t hree ways: ■   Fixed‐stop an d target exi t ■   F i xed‐bar exit ■   Random exit Fixed‐Stop and Target Exit For the fi  xed‐stop and tar get exit test, I simply choose a set stop‐loss and profi  t tar - get that is appropriate for the instrument an d time frame I am tra ding. For a swing ‐ type system lasting a few days, $500 to $1,500 is a reasona ble amount for a stop‐ loss. Similarly, I set an appropriate pro fi t target. A ll things being equa l, if you set t he stop and tar get to the same dollar amount, before commissions and slippa ge you should prevai l on 50 percent o f your tra des, assuming t hat your entry is no better t han ran - dom. Using set dollar amounts for stop and profi  t, I simply create a strategy with my entry si gnal, set stop-loss, and set profi  t tar get. Fixed‐Bar Exi t For the fi  xed‐bar exit test , I create an exit condition that closes the trade after X number of bars pass. The idea behind this is that most good trades show profi  t righ t away and could be exited with a profi  t almost immediately. If your entries don’ t show profi  t until 10 or more bars, for example, perhaps your entr y is too earl y and should be delayed. This test really helps to check if the entry signal gets you going in the correct direction. Random Exit For the random exit test, I t ypicall y use this as part of the “monke y test” process, described later. However, sometimes I use it ri ght at the be ginnin g of testin g. The concept is based on eliminating the impact of any exit and just seeing the ability o f the entry to generate winnin g trades. If an entry is always profi  table with a randomly generated exit, then chances are much better that there is an ed ge there. Entr y Evaluation Criteria For eac h of the three test tec hniques just descri bed, there are a few wa ys to look at and analyze the results. Winnin g percenta ge, for example, is a very valid way to compare entries. If you test without slippa ge and commissions, your entry should be able to win more t han 50 percent o f the time, since t hat is w hat a ran dom entr y would give you. In my experience, I have found that 52 to 60 percent is achievable, and values that hi gh suggest a worthwhile entry technique is present. www.rasabourse.com106 LIMITED TESTIN G The counterargument to using winning percentage is t hat, w hile it is nice to be right, it is even better to ma ke money. A 60 percent winnin g percenta ge might make less money t han a 40 percent winnin g percenta ge, especia lly if the entry is a tren d‐ followin g entry. Trend‐followin g entries, such as breakouts and movin g avera ge crossovers, are generally much lower winnin g percenta ge systems. They get their re - venge on hi gh‐win‐percenta ge systems by yieldin g few bi g winners and many small losers, wit h the win amount easi ly outpacing t he loss amount. In t hese situations, therefore, t he average pro fi t per tra de becomes use ful. Since both winnin g percenta ge and avera ge profi  t give meanin gful information, I use t hem both. Since t his is pre liminary testing, I do not worry a bout drawdown or any ot her metric. A ll I want to know at t his point is i f my entry seems to have any edge. T hese two metrics can help tell me t hat. You may be wonderin g about optimization at this point. Should you use it? I will, but w hen I look at the resu lts, I wi ll not just look at the best iterations. Instea d, I look at all of them. For example, let’s say I run 100 iterations, with various values for m y entr y input parameters. If onl y a handful of iterations are profi  table or have a winning percentage above 50 percent, I will likely discard that system. But, i f 70 percent or more of the iterations are favorable, then I will consider the entry as havin g successfully passed the test. ■ Exit Testin g In a similar fashion to entry testin g, there are a few diff  erent ways to test an exit. Where it gets complicated is when the exit is tied to the entry is some fashion. An example of this might be using support lines for entries, and resistance lines for exits. It is hard to separate the two. In these cases, I mi ght choose not to even test exits by themselves, and rather proceed to a complete s ystem test, discussed later. When I do evaluate exits by themselves, I typically perform the analysis two ways: ■   Similar‐approach entr y ■   Random entr y Similar‐Approach Entr y The core idea behind testin g exits by themselves is to see if they can help give you an edge. Most peop le see e dges as being applicable only when you enter, but rea lly, exits have just as much, if not more, impact on the bottom line. A carefully desi gned exit, it has been shown, can make even bad entr y systems profi  table! Since I wi ll be testin g the actua l entry wit h the actua l exit a bit later, at t his poin t I want to see how the exit performs. T o do this, I create an entr y similar to the entr y I want to use. This usually falls in one of two primary cate gories: trend followin g and www.rasabourse.com107LIMITED TESTINGcountertren d followin g. Since I know w hat type o f entry I have, I just create a generic one simi lar to it. For a tren d‐followin g approac h, for examp le, I may just emp loy an X‐ bar breakout strate gy. For a countertren d strate gy, may be I wi ll use a re lative stren gth index (RSI)‐ based entry. In eit her case, I create an entry t hat is compara ble to my actual entry. Then I test it with my exit strate gy. A robust exit strate gy that is profi  table to my similar‐approach entries will likely also be profi  table with my actual entry. T his is a way to test an exit wit hout invo lving t he entry. Random Entry Discusse d in a later section, i f you have an exit strategy t hat wor ks well with a ran - dom entry, you mig ht have a rea lly goo d system w hen you com bine it wit h a solid entry tec hnique. I do not use t his approac h as muc h as I use d to, but occasiona lly I do like to see how a new exit technique works with random, no‐ed ge entries. ■ Exit Evaluation Criteria When I test exits by themselves, I generally do not look at winnin g percenta ges at all, and just focus on overall profi  tability. In addition, I will use maximum favorable excursion (MFE) and maximum adverse excursion (MAE) as measurement criteria. With these metrics, the idea is that you do not want the exit to get you into too much trouble (adverse excursion), and you do not want it to give back too much o f the potential profi  t (found by comparin g actual profi  t to the favorable excursion). The trouble with these metrics, I have found, is that it becomes too easy to desi gn just to these values, and in my experience that doesn’t necessarily lead to better systems. They are good, thou gh, to see the potential of your system. ■ Core S ystem Testin g Although there are benefi  ts to testing the entry and exit signals by themselves (one being that you can always fi  le away good entries and exits for use with another system), t he interaction o f entries an d exits, as previous ly mentione d, is usua lly quite important. Re gardless of whether I test entries and exits by themselves, I always tes t the complete core system durin g the preliminary phase. My o bjective in testin g the whole system is to see w hether, on a limite d history of data, the strate gy performs well. The main criteria I use at this point is net profi  t, and I like to see profi  table results over a wide ran ge of variables and over most o f the iterations. For examp le, if I have a simp le breakout wit h 10 possi ble values o f the breakout amount, and 10 sto p‐loss/ profi  t values, that creates 10 × 10 = 100 iterations. I would expect a good strate gy to be profi  table over 70 or more of these www.rasabourse.com108 LIMITED TESTIN Giterations on t he sma ll data set. I f I do see t his type o f behavior, I genera lly will run the mon key test s hown later, an d then go on to more in‐ depth testin g. Most o f the time, t he num ber of profi table iterations is on t he order of 30 to 70 percent of total cases. This puts me in a “no man’s land”—obviously, the strate gy is not good enou gh as is, but there may be somethin g there to work with. In situa- tions like this, I may decide to add a rule, a fi  lter, or otherwise chan ge the entry and exit. Un fortunate ly, there is no set protoco l for doing t his. Many times, I ’ll use extra rules or con ditions t hat I have had previous success wit h. Once I ma ke some minor changes, I reevaluate my sample results. The downsi de to t his iterative process o f modifying t he rules is t hat you run the ris k of fi tting t he system to t he historica l data. One or two mo difi cations may be okay, but if you spen d a lot of time mo difying your strategy to get better results, you may very well fall into the “create a great‐lookin g back test, but the real world performance su ff ers”–type scenario. Most times, if the fi  rst or second modifi  cation doesn’t dramatically improve things, then the strategy is best left for the scrap heap. As I have stated, when I do the preliminary testing with limited optimization, I like to see 70 percent or hi gher of cases with net profi  t, and I will work with the 30 to 70 percent cases a bit to see if I can improve them. But, what abou t strategies that are just awful, with less than 30 percent of iterations generating any profi  t? In these cases I use the Geor ge Costanza approach: if everythin g I built is bad, then the opposite must be good! I will reverse the si gnals and buy when I was selling, and vice versa. Depending on the strategy logic, this doesn’ t always produce the exact opposite result, but in many cases it is close. Without a doubt, thou gh, this opposite eff  ect is really apparent only before commissions and slippage are added in. Why is that? Well, take a trading system that has −$50 aver- age profi  t per trade, after $30 commissions and slippa ge. That mi ght be a decen t candidate for an opposite approach, since man y people will assume that it would average $5 0− $30 = $20 per trade. But in reality, the opposite trade would be a −$10 loser. When reversin g systems, you must add in double the commissions and slippa ge. Here is the math: −$50 avera ge trade, after slippa ge and commissions +$30 commission and slippa ge −$20 avera ge trade, no slippa ge or commissions Now fl  ip the s ystem to produce the opposite result, and then add commissions and slippa ge back in +$20 avera ge trade, no s lippage or commissions −$30 commission and slippa ge −$10 avera ge trade, opposite system, with slippa ge and commissions www.rasabourse.com109LIMITED TESTING I believe w hen peop le pon der tra ding the opposite system, t hey ne glect to a dd in the commissions an d slippage correct ly. This is w hy most “opposite ” systems, w hile appea ling on the sur face, rare ly if ever wor k in the rea l world. At this point in t he process, i f my strate gy has per forme d success fully, I wi ll have tested the entry, the exit, and the core system, with all results su ggestin g that a trad - able system  might  be achievable (remember, we have many more steps to go throu gh before deciding a system is in deed tradable). This is just pre liminary testing, t he fi rst hurdle, but when I even ma ke it t his far, I am somew hat encourage d. At t his point, it is on to the last step in the preliminary process. This step involves animals, at leas t on a fi gurative level. ■ Mon key See, Mon key Do One of the last tests I like to run is what I call “Monkey See, Monkey Do.”  The es - sence of the test is to see if my strate gy does better than a dart‐throwin g monkey. In 1973, a book by Burton Malkiel claimed that “throwing darts at a newspaper’s fi  nan - cial pa ges could select a portfolio that would do just as well as one carefully selected by experts.”  The book, “ A Random Walk Down Wall Street”“    (W . W . Norton, 1973), is a ” classic for investors and traders, and the monkey idea resonated with many people. After all, no one wants to perform worse than a monkey! I personally don’t sub - scribe to all the talk about markets bein g random—if I did, I would really have no business searching for a trading edge. Since prolonged edges would not exist in ran - dom markets, I fi  nd the monkey test a very useful one. With any strate gy I create, the strate gy’s performance better be si gnifi  cantly im - proved over what any monkey could do by just throwing darts. If it is not, then I have no desire to trade such a strate gy. I use three diff  erent monkey tests and two diff  erent time frames for testin g. Passin g all of the tests gives me confi  dence I have somethin g better than random. Test 1: “Monkey Entry ” The fi rst test I run is to see i f the entry I developed is better t han ran dom. I simp ly replace the entry in my strate gy with an entry than creates a randomly generated entry. I run the random entry, with the rest of my strate gy intact, 8,000 times. This generates 8,000 unique performance reports, since each run will have diff  erent ran - domly generated entries. By adjustin g the frequency of the entry si gnals, I ensure that I get close to the same number of trades as my walk‐forward history. Also, I try to matc h the percenta ge of long and short tra des. These two con ditions mean t hat the “monkey” trades as often as my system does, and in rou ghly the same proportion of lon g and short trades. www.rasabourse.com110LIMI TED TESTING Typica lly, a goo d strategy wi ll beat the mon key 9 times out o f 10 in net pro fi t and in maximum drawdown. For my 8,000 monkey trials, that means approximately 7,200 must have net pro fi t worse t han m y resu lts, an d the same num ber of runs wit h higher maximum drawdown t han my wa lk‐forwar d resu lts. If I don’t reac h these goals, I really have to wonder if my entry is truly better than random. Test 2: “Monkey Exit ” The secon d test I run is to see i f the exit I developed is better t han ran dom. It is much like the entry test, o bvious ly, except in t his case t he mon key ran domly exits the position. I contro l the ran dom exit primari ly by keeping t he num ber of bars in a trade the same as my walk‐forward history. For example, if my walk‐forward history has an average o f four bars per tra de and always exits at t he end of the day, I wi ll tune the ran dom exit to be on average t he same. A lso, it wi ll always exit at t he end of the day, if that is m y criterion. As with the monkey entry, I look for my walk‐forward results to be better than 90 percent of the monkey exits. Test 3: “Monke y Entr y, Monke y Exit ” After determining that my strategy is better than both a monkey entry and a monkey exit, I like to see that my strate gy is better than a monkey entry  and  exit. I do this d because sometimes my ed ge is in the interaction of the entry and exit. For example, it might be that my entry is valid only because I set the exit near a support or re - sistance zone. It mi ght be that the entry, taken alone, or the exit, taken alone, isn’ t enou gh without the other. In this test, I replace all entry and exit code with random monkey code. I adjus t the parameters of the random entry and exit to match my strate gy in the followin g ways: ■   Number of trades ■   Ratio of long trades to short trades ■   A v e r a ge bars spent in a trade Note that these conditions are the same I appl y to the other monke y tests. Then I run t he mon key entry, mon key exit strate gy 8,000 times, just like the other tests, and compare results the same wa y. Time Frames The fi  rst time I run the monkey tests is in the development sta ge, as one more hurdle for a strate gy to overcome. Most of the time, thou gh, runnin g these tests over the www.rasabourse.com111LIMITED TESTINGwalk‐forward time frame will almost always yield good results. This is because bad strate gies wi ll likely never get this far in t he development process. Sti ll, though, I like to see my strategy pass t his test. It gives me con fi dence t hat I may in deed have an edge. The other time frame I use to run the monkey tests is when runnin g the strate gy live. I take the results of the past 6 to 12 months (3 months may also be a good num - ber, although the validity may be questiona ble if the num ber of trades is low). I f, in that 6‐ to 12‐mont h time perio d, the mon keys became a lot better, I know t hat my assumed ed ge has either de graded or disappeared completely. It mi ght then be time for me to quit tra ding that system. Monkey Testing—Example To  give you an idea of how the monkey test works, in both the walk‐forward history and the rea l‐time history, I wi ll provi de an examp le in t his section. Figure   12.1    shows the walk‐forward performance of the as‐developed system, along with the performance after initial development. The system did quite well for a while, but eventually endured some signifi  cant drawdowns. The question is: could the 6‐month monkey test have shown that the ed ge in this system was gone, and tha t tradin g should have ceased? T o answer that question, I will perform monkey tests a t the points shown on the graph. FIGURE 12.1   Sample S ystem Walk‐Forward Performance May 2013 Feb./Mar. 2012 Performance after developmentWalk-forward history www.rasabourse.com112LIMITED TESTIN G The code, in Tra deStation Easy Language, for the baseline strategy, an d the three monkey strategies, are s hown in Appen dix A. The fi  rst step in creating random strategies that are comparable to the baseline strate gy is to gather the pertinent statistics of the baseline strate gy. These are shown in Table   12 .1   . All of the information in Table   12.1   can be obtained from the performance report. The two parameters I will use to compare to random strate gies are the net profi  t and the maximum intrada y drawdown. All other parameters listed will be used to “tune” the random strategy. The goal with tuning is to have roughly the same numbers of trades, the same percenta ge of lon g and short trades, and the same avera ge time in trades for the random strate gy as for the baseline strate gy. Doin g this will allow a fair com - parison of the two strategies. Once the random strate gies all yield rou ghly the same number of trades as the baseline strate gy, I can run each random strate gy 8,000 times. Then I can compare the results. These results are shown in Table   12.2   . The results are pretty clear—the baseline strate gy is much, much better than any random strate gy. Score one for the humans over the monkeys! Based on this informa- tion, the baseline strategy clearly passes the random test.  TABLE 12.1     Base line Per formance Paramete r Value Time perio d 3/19/2007–11 /1/2011 Net pro fit $72,650 Maximum intrada y drawdown −$22,2 70 Number of trades 430 Percenta ge of lon g trade s 40 percent Average bars in tra de 2.5 Number of trading days 1,165 Number of trades/Num ber of trading days 0.37 TABLE 12.2     Random “Mon key”  Test 1 Test Period: 3/19/2007 to 11/1/201 1Percentage of Cases with Net Profit Worse than Baseline Cas ePercentage of Cases with Maximum Intraday Drawdown Worse than Baseline Case Random entry, baseline exit 100% 99% Baseline entr y, random exi t 99% 94% Random entr y, random exi t 99% 99% www.rasabourse.com113LIMITED TESTING But how does the baseline strategy compare to t he ran dom strategies a few mont hs later? Referrin g to Fi gure   12.1  , the baseline strate gy ran into some di ffi  culty around February–Marc h 2012. Assuming an en d date o f Marc h 1, 2012, over t he previous 12 mont hs, the strategy had a net pro fi t of $780, an d a maximum intra day drawdown of −$15,680. How does that compare wit h the ran dom strategies? A fter 8,000 runs, here are the results (see Table   12.3   ). The results should present some cause for concern. Clearly, the baseline strate gy has performed only sli ghtly better than a random strate gy, dependin g on the number you focus on. Personally, I look at all the numbers as a group, and if I see most o f them at or below 60 to 70 percent, I become concerned. If most of the numbers are below 50 percent, I become very concerned, since by all measures, my strate gy is not performing better than the monkeys. In this particular case, with only one value below 50 percent, and two values below 70 percent, I’d probably let the strate gy continue tradin g. More conserva - tive traders might decide to stop trading at this point, and that is a reasonable decision , too. The next time the baseline strate gy caused concern was in May 2013. Over the year ending May 1, 2013, the baseline strategy lost −$1,105, with a maximum intrada y drawdown of −$15,100. How does that compare to the random monke y systems? See Table   12.4   . TABLE 12.3     Random “Mon key”  Test 2 Test Period: 3/1/2011 to 3/1/201 2Percentage o f Ran dom Cases  with Net Profit Worse than Baseline Case ($780 )Percenta ge of Ran dom Cases with Max imum Intra day Drawdown Worse than Baseline Case (–$15,680 ) Random entry, baseline exit 49% 73% Baseline entry, ran dom exi t 99% 100% Random entry, ran dom exi t 60%9 5% TABLE 12.4     Random “Mon key”  Test 3 Test Per iod: 5/1/2012 to 5/1/201 2Percentage o f Ran dom Cases w ith Net Pro fit Worse than Base line Case (–$1,105 )Percentage o f Ran dom Cases with Max imum Intra day Draw down Worse t han Base line Case (–$15,100 ) Random entr y, baseline exit 50% 64% Baseline entry, ran dom exi t 1% 1% Random entr y, random exi t 49% 72% www.rasabourse.com114LIMITED TE STING The resu lts here are muc h clearer now . On average, t he mon key systems are equa l to or better t han the baseline strategy. T his indicates t hat any e dge the strategy origi- nally had is gone or is certain ly on hiatus. Wise tra ders wou ld stop tra ding this sys - tem near t he beginnin g of May 2013. In t his case, ju dging from t he per formance o f the baseline strate gy after May 1, 2013, that was a good decision. Comparison of your strate gy to randomly generated strate gies can be useful, too. In the prece ding examp le system, t he ana lysis was a ble to s how that the strategy as developed was signi fi cant ly better t han a ran dom, mon key‐throwing‐ darts system. That is nice to know , as it gives you confi  dence as you be gin to trade. Unfortunate ly, running t his ana lysis w hen you develop the strategy te lls you not h- ing about how we ll the strategy wi ll work going forwar d. The strategy itse lf could be defective, leading to rea l‐time losses. Or t he characteristics o f the mar ket may have changed, and your strate gy cannot adapt to it. In either case, periodically compar - ing the baseline strategy resu lts to t he ran dom mon key resu lts can help you decide whether the strategy is broken. As the earlier analysis shows, the random test can be an early warnin g detection method of sorts, and can su ggest that you stop tradin g the strategy until performance becomes better than random. Thus, it can be a useful tool in decidin g when to stop tradin g a strate gy. www.rasabourse.com115 Once I have a trading system that I believe has some sort of edge to it, and it passes all the preliminary tests I throw at it, then I feel comfortable going on to more in‐depth testing. As stated earlier, there are four primary ways of testing: ■   Historical back testing—all in‐sample ■   Out‐of‐sample testing ■   Walk‐forward testing ■   Real‐time testing Over the years I have successfull y and unsuccessfull y used each one of these approaches. Currentl y, I believe that walk‐forward anal ysis off  ers the best combina- tion o f amount o f history t hat can be teste d, degree o f matc h between historica l and real‐time results, and sensitivity to chan ging market conditions. Durin g the in‐depth testin g phase descri bed in this chapter, I wi ll use on ly wa lk‐forwar d testin g. But before we get into a discussion about walk‐forward testin g, what if you don’t have any parameters to optimize? In‐Depth T esting/ Walk‐Forwar dpp Analysis                                                         CHAPTER   13 www.rasabourse.com116IN‐DEPTH TESTING /WALK‐FOR WARD ANALYSI S ■ No Parameters Occasiona lly, you may develop a system t hat has no parameters to optimize at a ll. For examp le, your entr y may be based on a speci fi c can dlestick chart pattern, an d your exit mig ht be a set‐ dollar‐amount stop‐ loss, wit h a set pro fi t target. For w hatever reason, you may decide that you never want to c hange t hese va lues for stop- loss an d target, and you do not want to change the entry. Your philosophy may be “no opti- mization, ever,” which is certainly one way to avoid curve fi  ttin g or overfi  ttin g of the system to the data. In situations such as this, your in‐depth anal ysis will simpl y consist of one histori - cal test through the data. If the results meet your goals, you can simply move on to the next step. If not, you should discard the strate gy and move on to the next idea. One important point is that if your optimizationless strategy does not work, you should not go back and tweak the strategy, followed by rerunning it. For example, if you run it the fi  rst time and are displeased with the results, you should not change the entry to a diff  erent candlestick pattern and try a gain. That is just an optimization of the entr y, done a diff  erent wa y. But it is still optimization. If you think this technique might apply to you, you can turn these two unique strate gies into one optimizable strate gy, followin g the pseudo code technique shown below : Strate gy 1 Enter lon g with candlestick pattern A Stop‐loss $X, profi  t target $Y Strate gy 2 Enter long with candlestick pattern B Stop‐loss $X, profi  t tar get $Y Strate gy 3—strate gies 1 and 2 combined For i = 1 to 2 If i = 1, enter lon g with candlestick pattern A If i = 2, enter lon g with candlestick pattern B Stop‐ loss $X, pro fi t tar get $Y The benefi  t of such an approach is that you know up front that you are optimizin g (no hidden or forgotten optimizations to taint your resu lts), an d it may very we ll be that a com bination o f strategies (e.g., strategy 1 mig ht be better in year 1, but strate gy 2 mi ght be better in year 2) mi ght be better than either by itself. If you tru ly decide that you have no parameters to optimize, simp ly substitute t he walk‐forwar d analysis s hown later for a sing le‐run historica l analysis. I f the resu lts are favorable, you can then proceed to the next step. In most situations, thou gh, www.rasabourse.com117IN‐DEPTH TESTING/WALK‐FOR WARD ANALYSI Syou wi ll have at least one parameter to optimize, an d for those cases wa lk‐forwar d analysis is t he best way to go. ■ A Walk-Forward Primer Many people are confused by walk‐forward testing and how it really is diff  erent from traditiona l optimization. I t hink understan ding the wa lk‐forwar d concept has been made even more di ffi  cult to understand by the introduction of it in most tradin g software pac kages. In t he “old” days, wit hout specia lized software or a sprea dsheet, walk‐forwar d testing had to be per forme d by hand or custom computer program - ming. In fact, w hen I had my success ful run in t he Wor ld Cup tra ding contest, I relied on strate gies developed with walk‐forward testin g conducted by hand. It was diffi  cult and tedious, but it gave me a clear understanding of how the process works. To  bring t he concept down to eart h, I wi ll fi rst demonstrate t he process on a simple breakout tradin g system. In this way, you can see step by step how the walk ‐ forward analysis is done. First, some simple defi  nitions re gardin g the walk‐forward analysis are in order: In period.  This is the chunk of historical data that will be optimized. Out period.  This is the chunk of historical data that will be evaluated using opti - mized results from the adjacent in period. Fitness factor.  This is the criterion used to determine the “best” result, allowin g us to select the optimized parameters. Anchored /Unanchored test.  This tells us whether or not the in period start date shifts with time, or if the start date is alwa ys the same. Although I will discuss the details of how to select these parameters a bit later, for our test case we will use a 5‐ year in period, a 1‐ year out period, fi  tness factor of ne t profi  t, and an unanchored test. Our strategy will be a very simple one: a countertrend breakout‐type system: Enter short if the close is an “X”‐day hi gh close Enter lon g if the close is a “Y”‐day low close S t op‐loss of “Z ” In TradeStation Easy Lan guage, the system code becomes: input: X(5), Y(5), Z(200); if close=h ighest(close,X) then buy next bar at market; if close=lowest(close ,Y) then sellshort next bar at market ; SetStopLoss(Z); www.rasabourse.com118IN‐DEPTH TESTING /WALK‐FOR WARD ANALYSI S For t his examp le, we wi ll use t he continuous contract for the mini S&P (ES), an d use 10 years o f data, from January 1, 2000, to January 1, 2010. We wi ll use daily bars and include $25 s lippage and commission per roun d trip tra de. For comparison purposes, fi  rst we will optimize over all the data from 2000 to 2010. Usin g net profi  t as our fi  tness function criteria, we get the optimum values: X = 9 Y = 5 Z = $600 This comp lete optimization pro duces a net pro fi t of $55,162 over t he 10‐year perio d. Now , we wi ll run t he wa lk‐forwar d analysis. Since we are running a 5‐year op - timization period, we will fi  rst optimize from January 1, 2000, to January 1, 2005. When we do this, we get t he following parameters for the highest net pro fi t case: X = 7 Y = 1 7 Z = $600 That completes out fi  rst in‐sample evaluation. Now we apply the preceding pa - rameters to our fi  rst out‐of‐sample period, January 1, 2005, to January 1, 2006. Note that it is considered out‐of‐sample because it was not in the fi  rst optimization period. The results of this fi  rst out‐of‐sample yields a loss of $3,138. In a similar fashion, we then run the in‐sample optimizations, and the out‐of ‐ sample performance runs for each of the rows shown in Table   13.1   . Once we are complete, we have our walk‐forward analysis. T o create a complete performance report of the walk‐forward data, we can create a strate gy where the val - ues chan ge every time the walk‐forward period chan ges. Such a strate gy looks like this: var: X(5) , Y(5), Z(200); If date>1050101 and date<1060101 then begin x=7; y=17; z=600; end; TABLE 13.1     Sample Walk‐Forward Test Results In‐Sample Test Perio dBest Parameters X,  Y,  ZOut‐of‐Sample Perio dOut‐of‐Sample Resul t 1/1/2000–1 /1/2005 7,17,60 0 1/1/2005–1 /1/2006 −$3,138 1/1/2001–1 /1/2006 7,45,100 1/1/2006–1 /1/2007 −$2,325 1/1/2002–1 /1/2007 49,7,60 0 1/1/2007–1 /1/2008 +$5,963 1/1/2003–1/1/2008 21,11,1000 1/1/2008–1/1/2009 −$19,113 1/1/2004–1/1/2009 9,5,600 1/1/2009–1/1/2010 +$8,675 www.rasabourse.com119IN‐DEPTH TESTING/WALK‐FOR WARD ANALYSI S If date>1060101 and date<1070101 then be gin x=7; y=45; z=100; end; If date>1070101 and date<1080101 then be gin x=49; y=7; z= 600; end; If date>1080101 and date<1090101 then be gin x=21; y=11; z=1000; end; If date>1090101 and date<1100101 then be gin x=9; y=5; z=600; end; If date>1100101 and date<1110101 then be gin x=9; y=5; z=600; end; If date>1110101 and date<1120101 then be gin x=9; y=5; z=7 00; end; If date>1120101 and date<1130101 then beg in x=9; y=5; z=7 00; end; If date>1130101 and date<1140101 then beg in x=9; y=5; z=700; end; if close=highest(close,X) then sellshort next bar at market; if close=lowest(close,Y) then buy next bar at market; SetStopLoss (Z); This wi ll allow us to compare t he walk‐forwar d resu lts to t he optimize d resu lts. This is shown in Figure   13.1   . The interesting points of this comparison are: ■   The optimize d equity curve is muc h, muc h better t han the wa lk‐forwar d curve. T his is to be expecte d, since t he optimize d curve is a resu lt of optimization. T his should tell you t hat practica lly any strate gy can be ma de to look good, if you optimize the parameters over the time period you are intereste d in. ■   The walk‐forward results are not very good. Walk‐forward analysis is a tou gh test for a strate gy to “pass.” Most strate gies fail at this ana lysis. But since t his simu lates real life more than full y optimized results do, it is a more accurate method o f analysis. www.rasabourse.com120IN‐DEPTH TE STING/WALK‐F OR WARD ANALY SIS  I have mentioned it a few times, but you still mi ght be wonderin g, “How do you know walk‐forward anal ysis is more representative of future performance that the fully optimized test?” I claim this based on my experience. The current system is a good example of this performance diff  erence. For the analysis just completed, here is how the optimized and walk‐forward analysis performed from January 1, 2010, to November 14, 2013. As you can see in Fi gure   13.2  , for the optimized case, the performance durin g the out‐of‐sample period 2010–2013 was fl  at. I t looks nothing at all like the optimized portion of the curve from 2005 to 2009, where the avera ge annual gain was approximately $10,000. It is a di ff erent story for the walk‐forward analysis, as depicted in Fi gure   13.2   . The years 2010–2013 were fl  at for the walk‐forward equity curve also, but it mimics the 2005–2009 walk‐forward results. In other words, the performance of the walk‐forward sys - tem did not c hange t hroug h the years—it was consistent ly fl at to down most o f the years. While one example does not make it a rule, in general this is the kind of per - formance you can expect from optimize d back tests an d walk‐forwar d back tests. Optimized results, when applied to out of sample data, generally de grade. This is why so many people get frustrated with systems sold by unscrupulous vendors. These ven dors s how optimize d resu lts, an d the per formance in t he future is a l- most never as good as the back test. Walk‐forward results, however, should perform about the same throu ghout the whole test period. This is why many traders prefer  FIGURE 1 3.1       Walk‐Forward Results vs. Optimized Results, as Developed $60,000 $50,000 $40,000 $30,000 $20,000 Optimized Cum. Walk-forward Cum. $10,000 2005 2006 2007 2008 2009$0 ($10,000) ($20,000) ($30,000) www.rasabourse.com121IN‐DEPTH TESTING/WALK‐FOR WARD ANALYSI Swalk‐forward results. Walk‐forward anal ysis tends to produce equit y curves that are more stable going forward. A gain, that is not a rule, but it is my experience that this is generally true. ■Walk-Forwar d Inputs If we are performin g the analysis by hand, as described above, we must know the followin g parameters  before  we start the anal ysis: In period Out period F itness function Method: anchored or unanchored In you are usin g software to perform the analysis (as I currently do), you do not necessarily have to know these values in advance. That is both a blessin g and a curse. It is good because you on ly have to run t he optimization once an d not keep repeatin g the walk‐forward analysis over and over. It is bad because these parameters can be optimized, just like an y traditional input parameter in your strate gy. It may not seem like an optimization, at least in t he tra ditiona l sense, but if you, for example, look at two values of in period, and choose the one with  FIGURE 13.2   W alk-Forwar d Resu lts vs. Optimize d Resu lts, Be fore an d After Deve lopment www.rasabourse.com122IN‐DEPTH TESTING /WALK‐FOR WARD ANALYSI Sbetter resu lts, that is sti ll optimizing. You want to ma ke the decision before you do the ana lysis. Assumin g you wi ll be choosin g the walk‐forwar d inputs beforehand (we wi ll ex- amine an alternative method to this later), how do we choose values for each o f them? A method for determinin g each value is described below . In Period For t he in perio d, the goa l is to get enoug h trades to ma ke a meaning ful conc lusion as to the best parameters to use for each period. It makes sense, then, to get a cer - tain amount o f trades per input varia ble in your in perio d. For examp le, if you have four inputs to optimize, t hen you mig ht want 100 to 200 tra des in your in perio d, which wou ld be equiva lent to 25 to 50 tra des per input. Un fortunate ly, there is no set number of trades per input that is “best,” althou gh many people say that 30 is a good num ber for statistica l signi fi cance. Out Period As crazy as it sounds, I know people who do walk‐forward analysis every day, which means their out period is one day. Personally, I think this is extreme, bu t who am I to ar gue if they are havin g success? There are a couple of factors at play in the selection of an out period. First, if you set the out period too big, you migh t only have one or two out periods for your walk‐forward analysis, which means the test becomes similar to a sin gle‐period out‐of‐sample test. Second, if you se t the out period too small, you will be conducting reoptimizations on a daily or weekly basis. This mi ght not be sustainable given the limited time you likely have to develop and trade, if you have many systems to reoptimize. Knowin g that there are boundaries to the out period, I generally set my out period to between 10 to 50 percent of the in period. So, if my in period is 1,000 days, my out period mi ght be in the ran ge of 100 to 500 days. This is a very wide ran ge, but with robust sys - tems you will generally see that the fi  nal results are not extremely sensitive to ou t period. A 100‐da y out period ma y very well perform about the same as a 500‐da y out period. ■ Fitness Funct ion Of all the parameters in walk‐forward anal ysis, the fi  tness function is the most con - tentious. I’m sure that raucous debate b y two developers over the fi  tness function has at some time resu lted in physical violence (suc h dedication to t he cause!). I don’t want to stir the pot by going into the pros and cons of various fi  tness functions, bu t I will tell you the ones I have had the most success with. www.rasabourse.com123IN‐DEPTH TESTING/WALK‐FOR WARD ANALYSI S Net Profi  t For many peop le, this is t he default choice, an d it is a pretty good one. A fter a ll, without pro fi t at t he end of the test, a ll other parameters are meaning less. I person- ally use this fi  tness factor the most, since it is eas y to understand and implement. But it does not take into account another important results: drawdown. My experi - ence, however, has been t hat in genera l high net pro fi t runs hand in hand with low maximum drawdown. I f you decide drawdown is a must have, t hen one o f the fi tness function below should suit you. Linearity of Equity Curve Think for a minute o f your i deal equity curve. T he equity wou ld go up every day, and it would be consistent. A real‐world example is interest on a bankin g or money market account. Interest earne d might be very sma ll, but wit h a bank account, you make mone y ever y day, and there is never a da y where you lose mone y. If onl y you could design a futures system that made money every day, with never a drawdown! A linear, upward‐slopin g equity curve is the ideal, and is a great parameter to optimize for. The problem is that, unless your software includes this fi  tness function as a se t choice, it may be di ffi  cult in actual practice to actually optimize for it. Also, it may be diffi   cult to implement in a nonanchored walk‐forward test. Finall y, this method of optimization may select very low net profi  t iterations as the optimum, since they may exhibit the most linearity. There are two potential problems with the low‐profi  t cases: fi  rst, since there is not much profi  t, if you underestimate your slippa ge and commissions, you might actually be selecting a real‐time losing strategy. Second, i f the end result is very small avera ge profi  t per trade, minor chan ges in the marke t may render your eff  ective ineff  ective. One big plus to using a linear equity curve as your optimization criteria is that i t is very good for position sizin g. Think about a strate gy where your drawdowns are minimal and your profi  ts are slow and stead y. Such an approach would be ideal for aggressive position sizing. Return on Account If you explicitl y use maximum drawdown in your fi  tness function, then return on account is a good option. Althou gh some software packa ges vary in their defi  nition, return on account is genera lly defi ned as: Return on Account = Net Profi  t/(Maximum Drawdown + Required Mar gin) Since required mar gin varies over time, many people just eliminate this from the calculation by assumin g it is equa l to zero or some ot her arbitrary va lue. As a fi tness www.rasabourse.com124IN‐DEPTH TE STING/WALK‐F OR WARD ANALY SISfunction, return on account is nice to use, since it ta kes into account both the pro fi t, and the risk it took to get that profi  t. The biggest drawback to using it is that it can give wildly diff  erent results from period to period usin g unanchored walk‐forward analysis. ■ Anchored/Unanc hored One subtle aspect of walk‐forward analysis is the optimization window . You can go one o f two ways wit h this win dow: you can move it wit h time, or you can keep the start point anchored. Figure   13.3    shows the di ff erence between these two approac hes. In general, the two methods will give similar results, especially at the be ginnin g of the ana lysis. But as time goes on, t he resu lts wi ll tend to diverge. T his is because the anc hored walk‐forwar d is always ta king into account resu lts over t he whole data set, while the unanchored results include results for onl y the most recent window . There may be times where one is more appropriate than the other, bu t I tend to use the unanchored method much more. I like that approach, since i t ensures that onl y the most recent data is included in the optimization. I don’ t necessarily want results from 10 years ago still impacting my optimization results today. One point of caution with usin g unanchored data, with certain fi  tness functions, is that the results you get might be faulty, depending on your walk‐forward analysis software. If you are usin g a manual method, this should not be a problem, but if you use software , make sure that the calculations are based on the start and end dates in question, not on di ff erence in fi  tness functions during the period. FIGURE 1 3.3Anchored vs. Unanc hored Walk‐Forwar d Analysis 2007 Anchored Test Unanchored TestAnchored in sample 1 Walk-forward 1 In sample 1 Walk-forward 1 In sample 2 Walk-forward 2 In sample 3 Walk-forward 3Anchored in sample 2 Walk-forward 2 Anchored in sample 3 Walk-forward 32008 2009 2010 2011 2012 2013 www.rasabourse.com125IN‐DEPTH TESTING/WALK‐FOR WARD ANALYSI S A simple example explains it well. Suppose you have the optimized results shown in Table 13.2. Note in this example that while net profit is additive (the net profit in year 1 plus the net profit in year 2 equals the combined net profit for year 1 + year 2), the maximum drawdown and return on account are not . Some walk‐forward software packa ges may assume your fitness function is additive (like net profit), so make sure you understand how the software works when using unanchored results. Your analysis could be completely flawed depending on the fitness function you c hoose. ■Running the Analysis Once you have a ll your wa lk‐forwar d inputs defi ned, you simp ly run t he ana lysis manua lly as I have shown in t he ear lier examp le, or automatica lly wit h the software. Either way, in t he end, you wi ll have the comp leted walk‐forwar d analysis an d equity curve for your strategy. At t his point, you have to compare t he resu lts to your goa ls and objectives. I f the system passes, you o f course go on to t he next step. I f it fails, theoretically you should discard the strategy and start with something diff  erent. In reality, of course, that is extremely di ffi  cult to do. You have already invested a grea t deal of time in pre liminary testing an d in‐depth testing, an d it seems a s hame t hat you should just discard your wor k. This is especia lly true i f the resu lts are c lose to your goal. May be lowering t he goa l or ma king a sma ll change to t he strategy an d rerunning walk‐forwar d might be the pat h to success. Or does that just lead to more bad habits and decisions ? In genera l, I norma lly wou ld discard a strate gy at t his point, rat her than com - promise my goa ls or c hange my strategy. But sometimes I do one or both of these things. Occasionally, that turned out to be a good decision, but likely more often than not it did not wor k out we ll. Remem ber, the more you touc h (test) histori - cal data, t he more likely you are to fi t your system to t he data. P lus, w hen you relax your standards, you end up with somethin g you really did not want. When real mone y is on the line, this ma y become a major point of contention for your  TABLE 13.2 Man y Performance Metr ics Are Not A dditive Optimization Per iod Net Pro fit Max Draw downReturn on Account = Net Pro fit/ Max Draw down Year 1 $12,00 0 $6,000 2.0 Year 2 $6,000 $4,000 1.5 Year 1– Y ear 2 $18,00 0 $6,000 3.0 www.rasabourse.com126IN‐DEPTH TE STING/WALK‐F OR WARD ANALY SISpsyche—w hy continue to tra de a current ly losing system t hat you had doubts about in the fi  rst place? One common mista ke during walk‐forwar d analysis is to surreptitious ly optimize the  in  and out  perio ds. Say, for examp le, that you run t he walk‐forwar d analysis wit h four‐ year in period, and one‐ year out period. Walk‐forward results for that case are good, but not great, so you think “maybe I should use four years in, with two years out.”  That case is 200 percent better an d meets a ll your goa ls, so you decide “that’s the com bination to use. Let ’s go! ” Stop. Do you rea lize w hat just happene d? As soon as you se lected a secon d set o f in/ou t parameters, reran t he resu lts, an d selected the best case, you just optimize d. Sure, it is not a full optimization, since you on ly compare d two cases, but it was optimiza- tion nevertheless. Rememberin g the rule that optimized results can’t be trusted, you have a dilemma here: accept t he fi rst run (4 year/1 year), an d then discard the strategy because it did not meet your goals, or accept the second run, and pretend you never optimized. Once again, I’ll admit to doing the above on occasion, although I can’t recall i t ever endin g well. The bi g question in all this is “is there a way to test multiple in/ou t periods, and select the best one, while still maintainin g walk‐forward inte grity?”  The answer, thankfully, is yes. The way to do it is to create, in essence, a second walk ‐ forward analysis inside of the fi  rst. The way to do this is to run the walk‐forward analysis, as usual, but leave the last few years of data untouched. I t ypicall y will leave three years untouched. Then, with the walk‐forward data I have, I select the best in/ out pair I have, and then run it on the last three years of data. If it passes, then I go on to the next step. If it doesn’t, I discard the strate gy. But, in either case, at least I have made some e ff ort to select the best in/out combination. The downside to this approach is that you have optimized, and the more optimization you do, the worse off   you generally are. This process would look like this: 1.  Years 2000–2008 >> run walk‐foward analysis for di ff erent combinations o f in/out periods, select the best in/out. 2.  Years 2009–present >> run walk‐forward analysis, usin g best in/out deter - mined from Ste p 1. 3a.  If walk‐forward results from 2009–present look good, continue with development. 3b.  If results do not look good, it is probably best to abandon strate gy, rather than try again with another in/out pair. Figure   13.4    depicts the approach of optimizin g in/out periods, compared to a traditiona l walk‐forwar d analysis. www.rasabourse.com127IN‐DEPTH TESTING/WALK‐FOR WARD ANALYSI S ■Put the Walk-Forward Strate gy Together Once you have completed the walk‐forward anal ysis, anal yzed the results, and found that your results compare favorabl y to your objectives, you are almost read y for the next step. There is just one more check to run, and that is with the completed walk ‐ forward history strate gy. The diff  erence between the walk‐forward history strate gy and the optimizable strate gy is shown next: Optimizable Strate gy input: avg(10); // strategy code W alk‐Fowar d History Strate gy var: avg (10); If date is between Jan 1 , 2010 and Jan 1 , 2011 then avg=8 If date is between Jan 1 , 2011 and Jan 1 , 2012 then avg=12 If date is between Jan 1, 2012 and Jan 1, 2013 then avg=6 // strate gy code The strate gy with the walk‐forward history chan ges the variables based on the date. In t his way, you wi ll have a seam less history for your strate gy to run; you wi ll not have to cut an d paste resu lts toget her to create t he wa lk‐forwar d histor y. FIGURE 1 3.4  W alk‐Forwar d T est, Insi de Anot her Wa lk‐Forwar d T est Run walk-forward test 2000-2007 Determine best in/out periodsRun walk-forward 2008−present with in/out from previous step If results of 2008−present acceptable, use in/out going forward www.rasabourse.com128IN‐DEPTH TE STING/WALK‐F OR WARD ANALY SIS Note that the results you get from this strategy might be diff  erent from the results of a piece‐ by‐piece ana lysis met hod. This is especia lly true for swing strategies t hat last for days or wee ks. The reason t his is so is t hat, based on the walk‐forwar d param - eters, varia bles mi ght change in t he middle of a tra de, causin g trades to be exite d or reversed. T o see if this is important for your strate gy, then, it becomes critical to create a stand‐alone walk‐forward history strate gy. www.rasabourse.com129 Once you have the walk‐forward strategy set up, and you are satisfi  ed with the results, it is time to evaluate the strategy in a Monte Carlo simulation. This is an important step because random simulations may show dramatically di ff erent profi  ts and drawdown. It may be that the way the historical trades lined up, the maximum drawdown was ver y small. But since histor y isn’t likel y to repeat itself, it is impor- tant to see what type of maximum drawdown you could possibly incur trading this strategy. As stated earlier in Cha pter   7  , I use an Excel s preadsheet to do the Monte Carlo analysis. You can download this tool for yourself at the book resource web site (www .wiley.com/go/algotradingsystems). There are also numerous free and paid Monte Carlo simulators available on the Internet, should you choose to go that route. One good free simulator is Equity Monaco by NeoTick (equitymonaco.software.informer .com/). A good pay tool is @Risk (www .palisade.com/). All of these choices will give you t he same basic resu lts, an d you mi ght pre fer the presentation o f resu lts and capabilities of one over the other. The key is to get simulation results that you can base your decision on. If you use t he simu lator sprea dsheet I create d, you simp ly copy tra de resu lts from your strate gy performance report, paste them in the spreadsheet, enter your initial capital, quittin g‐point capital, and number of trades in a year, and then press calculate. The sprea dsheet wi ll calculate the simu lated equit y curves for 2,500 iterations, an d  Monte Car lo Analysis and Incubat ion  y                                                       CHAPTER   14 www.rasabourse.com130 MONTE CARLO ANALYSIS AND INCUBATIONpresent you wit h summary resu lts. These resu lts wi ll be based on one year o f trading. Samp le output o f the sprea dsheet was s hown ear lier in Fi gure 7.2. I typica lly focus on the return to max drawdown ratio (ret/DD ), and I like to see va lues a bove 2.0 for an acceptable strate gy. Anythin g below 2.0 su ggests that the strate gy is takin g on too much risk for the reward attained and mi ght not be worth tradin g. If you are profi  cient in writin g macros in Excel, you can easily take the Monte Carlo sprea dsheet I have create d and modify it to suit your own nee ds. You cou ld add position sizing, for examp le, or you cou ld change w hich resu lts are presente d. In the end, the point of the simulation is to give you results that you can understand and interpret. I have to ld you w hat wor ks for me; may be that wi ll work for you, but maybe you ’ll think of somet hing better. ■ Incu bation One of the most crucial steps in strate gy development, in my opinion, is also the toughest psychologically to implement. Before I discuss this last step, let’s review where we have been in the strate gy development process: 1.  We have established goals and objectives for our completed strategy and also goals for the steps alon g the way. In this manner, we can quickly eliminate strate - gies before spendin g too much time on them. 2.  We have developed a trading idea for our strategy that we feel has an edge. We have also defi  ned the market, time frame, and other important factors for our testin g. 3.  We have performed limited testing with the strategy, and we are happy with the results. We believe we mi ght have an ed ge. 4.  We have conducted in‐depth testin g, usin g walk‐forward testin g if possible. Again, we are happy with the performance results obtained. 5.  We have performed Monte Carlo testin g, to help us establish probabilities for the strate gy performance and also to give us realistic future scenarios of perfor- mance. These comp leted fi ve steps represent a lot of work and likely cause d us to discard tens or hundreds of strate gies before fi  ndin g success. T o get throu gh the last step, Monte Carlo testin g, is certainly an accomplishment. When this happens, you likely will be so excite d you wi ll want to tra de imme diately! That, of course, wou ld be the wron g thing to do. Incubation is the ri ght thin g to do. What exactly is incubation? Simply put, it is watchin g and waitin g. With incuba - tion, you wait t hree to six mont hs before you start live tra ding. Durin g this time, you occasionally monitor the performance of the strate gy, as if it is another out‐of ‐ sample test period. I like to check on my incubated strate gies once per month. www.rasabourse.com131MON TE CARLO ANALYSIS AND INCUBA TION Why is it important to incu bate a strate gy? Here are a few reasons: ■    When you fi nish Monte Car lo testin g, you are at an emotiona l high. Your “baby” has survive d and has a lot of promise. You have a lot of emotiona l capita l investe d in this strategy, as well as your time and e ff ort. You want it to succeed. You may even  need  it to succeed. Of course, this leads to a fragile emotional state. If you d imme diately start tra ding it wit h real money, you mig ht not t hink clearly if things start out bad for the strategy, as so o ften seems to happen. T his cou ld lead you to quit the strate gy early, or worse yet, haphazardly increase size when performance starts out bad (“doubling down”). ■ By waiting for a w hile before live tra ding, you wi ll forget a bout t he blood, sweat, and tears you expen ded to create t he strategy, an d you wi ll look at it more o b- jectively. If it passes incubation, great—but if it doesn’t, you won’t be distrau ght. Remem ber, short‐term hardship is sometimes t he price for long‐term success, and that defi nitely holds true wit h trading systems. ■   As I have shown, the system development process is di ffi  cult and complicated. There are probably a thousand di ff erent mistakes you can make alon g the way. Some can be blatant, like overoptimizin g, while others may be subtle, such as using hindsight bias to develop your strategy rules. The point is that, because o f development mistakes, there can be no way to know for sure if you have done somethin g wron g until you test your strate gy on live, unseen data. Major mistakes will show up in live results almost immediately, and by keeping your cash on the sidelines durin g this period, you will save a great deal of money. ■   Incubatin g gives you a chance to see how a strate gy performs in real time. You may fi  nd out that you do not like the strategy, even if it makes money. For example, maybe your strate gy sells every pivot hi gh. In historical back testin g, that may no t bother you. But in real time, watchin g your strate gy fi  ght every market hi gh might not be your cup of tea. It is far better to realize that now , rather than after you commit money to tradin g it. I generally perform incubation without real money. This is because, over time, I have concluded that the wa y I place orders, the bar t ypes I use, and so on all can be fairly we ll replicated by the strate gy back‐test en gine. T here are times, however, where you ma y want to commit real mone y on a small scale. For example, if your strate gy relies on limit orders for entries, you may want to test with real money to ensure t hat your fi lls matc h strate gy engine fi lls. Wit h some so ftware pac kages, this might not be the case. Also, if you use exotic bar types, back‐test results and real‐ money results can be totally diff  erent. You mi ght need a live real‐money test to chec k this, but once you con fi rm an issue, you wi ll be able to avoi d those bar types in later strate gies. Sometimes the only way to see if a back test is accurate is by testin g the strate gy with real money. www.rasabourse.com132MONTE CARL O ANALY SIS AND IN CUBATI ON As I mentione d, I norma lly do not nee d to per form rea l‐money testing during incubation. One reason is t hat I avoi d back tests t hat show or contain t he following: ■   Any buy fi lls at the low o f a bar or se ll fi lls at the high of a bar. Rare wi ll be the day this occurs in real life, but man y unscrupulous s ystem vendors and naive develop - ers develop strategies that frequently show this phenomenon. ■   Limit or ders that fi ll when price is touc hed. On occasion, may be 0 to 30 percen t of the time, you will get fi  lled at your limit price, when it is just touched. Most of the time, t hough, the price has to penetrate your price to guarantee a fi ll. ■   Any exotic bars, suc h as Ren ko, Kase, an d even point‐an d‐fi gure. Due to t he way the bars are built from history, your strate gy fi lls many times cannot be believed. Better to just avoi d these bars, except for rea l‐time discretionary tra ding. ■   Strate gies that exit on same bar as entry or that have stops and tar gets so ti ght that a pro fi t and loss exit cou ld occur on t he same bar. My experience is t hat it is easy to trick a strate gy engine, even with tick data, when exits or entry and exits occur on the same bar. This is due to the assumptions the strate gy engine must make regarding price travel. Usually, the results will be overly optimistic when compared to real live tradin g. ■ Evaluatin g Incubation My goals with incubation are to give me reasonable assurance that I made no major mistakes durin g development, to remove my emotions from the process, and also to see if real‐time performance is appealin g enou gh to trade. Later in this book, I’ll share some techniques I use to see if these goals are indeed met. www.rasabourse.com133  As you pro gress throu gh the tradin g system development process numerous times, you’ll start to realize that you have an al gorithmic strate gy factory on your hands. Raw material comes in the door as strategy ideas for entry and exit. Ma- chines, such as limited testin g, walk‐forward testin g, and Monte Carlo simulation, work on your ideas and either shape it into a better product, or tear it to shreds. At the end of your factory, you end up with trading systems you can trade or garbage destined for the scrap heap. If you do this over and over, you’ll create a lot of garbage, but you’ll also have a stack of strate gies to trade. That’s where diversifi  cation can be a big contributor. I’m sure you’ve heard the old saw , “Put your e ggs in one basket, then watch that basket!” In trading, this would be analogous to fi  nding one trading system (the bas- ket) and then puttin g all your money (e ggs) into it. That is great if it works. I’m sure there are traders out there who concentrate on tradin g one system. I’m not one o f them, though, and I do not recommend that you try to be one either. Why not? Well, the simple fact is that tradin g systems fail, and very few , if any, tradin g systems last forever. In addition, all tradin g systems go throu gh drawdowns, and sometimes they recover and sometimes they don’t. Do you really want your money tied to the for- tunes (or misfortunes) of one tradin g strate gy? I sure don’t! To  get aroun d this issue, I ta ke the opposite approac h and use diversi fi cation. Instead of one basket (tradin g system), I spread my capital amon g numerous, uncor- related tradin g systems. In e ff ect, I have many baskets, and althou gh it takes more eff ort to watch and track each basket, the benefi  ts are clear: ■Less worry about a system’s failing .  When you trade one s ystem, you are at the merc y of that system or t he approac h behind the system. I f you have a tren d‐followin g approach and the market goes fl  at for a few years, you will be in drawdown until  Diversi fi cation                                                       CHAPTER   15 www.rasabourse.com134 DIVERSIFICATIO Nthe market starts to trend. When you trade multiple systems with diff  erent styles, it is very likely that your countertren d systems wi ll do good when your tren d systems do bad, and vice versa. ■Fewer fi ll issues .  In tra ding one system, as your capita l grows, so wi ll your tra ding size. Eventually, your size will become large enough to aff  ect your fi  lls. Even trad - ing 10 contracts in go ld, for examp le, is enoug h that any stop‐ loss or ders you have will likely experience a few extra tic ks of slippage as your 10 lot gets fi lled. How- ever, if you trade numerous systems, your size on any one trade will be smaller, making fi lls less o f an issue. ■Smoot her equity curve.   When you diversify correctly, you will have di ff erent styles, diff erent markets, and di ff erent time frames with your tradin g systems. These dif - ferences come toget her to pro duce a smoot her equity curve, many times re duc- ing drawdown, an d almost a lways re ducing overa ll volatility. Diversifi  cation, done properly, is probably the closest thing I’ve ever seen to the so‐called tradin g “Holy Grail.” The tricks behind diversifi  cation are then (1) how to design systems with diversifi  cation in mind and (2) how to measure that you actually have diversifi  cation. I’ll discuss each of these topics in this chapter. ■ Desi gning with Diversi ﬁ cation in Mind In the next section, I describe simple ways to measure diversification, but I use these measures after the fact, not durin g the desi gn process. This is because i t is difficult to look at a trading system, identify its weak points, and then design a second complementar y system to smooth the first one. It can be done, but I think that is the tou gh way. I take a much simpler approach, and it seems to wor k quite well. If you look back at the initial sta ges of strate gy development, you’ll recall that we identify certain characteristics of the system we are tradin g: ■   Market ■   Bar t ype/size ■   Any custom time sessions ■   Entry ■   Exit As it turns out, ta king an initia l strate gy and varyin g a coup le of these strate gy characteristics will likel y produce an uncorrelated s ystem. It becomes as simple as doing somethin g diff  erent with your tradin g idea! www.rasabourse.com135DIVERSIFICA TION A good examp le of this is wit h the two euro futures strate gies I design in Part IV o f this book. Although the mar ket tra ded is exact ly the same, I a ltered the bar size (105‐minute bars versus 60-minute bars), the time session (one strate gy tra des at ni ght, the other during the day), t he entries (comp letely dif- ferent entries for each strate gy) and exits (different exits, where one system strives for small profits, and the other goes for outsized gains). These chan ge cause comp letely different system behavior, leading to different resu lts, an d consequent ly diversi fication. ■ Measuring Diversi ﬁ cation Once we have two or more systems, how do we c heck that tra ding these two systems actually increase diversifi  cation? I generally use four methods to check. Daily Return Correlation With this method, you simpl y run a correlation anal ysis in Excel on the dail y returns of each system. For intraday systems, you could run the analysis on shorter time period bars, such as hourly. When I use daily results, I generally check the correlation over the entire histor y, and then over six‐month to one‐ year periods. This anal ysis can easily be performed in Excel. I take the daily strategy results for each strategy, plot one as X and one as Y , and calculate the R2  correlation coe ffi  cient. The lower the correlation coeffi   cient , the better the diversifi  cation. If in all cases the correlation is much less than 1.0, I can safely assume the correlation is low , and therefore the diversifi  cation is hi gh. One caveat, thou gh: because of the fact that the lon ger term correlation is low does not mean that the s ystems will never be correlated. There could be weeks or months where the results are highly correlated. If you are aggres - sive with position sizin g, you need to be extra careful—strate gies that you assume are not correlated can suddenly become correlated and, instead of reducin g your risk, may actually amplify it. A good example of this occurred during the fi  nancial crisis o f 2008, where heretofore uncorrelated markets and approaches suddenl y all moved in lockstep. Diversifi  cation mi ght not help you much in periods of crisis. TABLE 15.1      Usin g Correlation Measures for Diversification Check Strateg yR 2  Correlation Coefficien t Euro nigh t 0.9370 Euro day 0.9745 Euro day + nigh t 0.9817 www.rasabourse.com136 DIVERSIFICATIO N Linearit y of Equit y Curve As I have state d previous ly, a per fectly linear equit y curve is t he ideal curve for a tradin g system. It is also a terrifi  c way to measure the diversifi  cation e ff ect. All you have to do is take the strate gy’s equity curve, run a linear re gression on it (which can be done in Excel), and report the correlation coeffi   cient R 2 value. An R 2  value of 1 is i deal, as it represents a per fectly linear equit y curve. An examp le of this measurement is s hown in Ta ble   15.1   for the euro s ystems, which are discusse d in later c hapters. As you can see, t he R2  value for the combined equit y is better t han the R 2  for eac h of the pieces. T hus, com bining these strate gies into one system provides diversifi  cation, resultin g in a smoother equit y curve. Maximum Dr awdown Anot her way to measure t he impact o f diversi fi cation is t hrough the maximum draw- down. Althou gh tradin g multiple systems mi ght not always lead to a reduced maxi - mum drawdown, especially on an absolute basis, many times it does. This is easy to check if you have the equit y curve for each s ystem and the combined s ystem. This is shown in Table   15.2    for the euro s ystems. In this case, the drawdown for the combined system is in between that of the euro day and euro ni ght systems. This makes it a bit unclear as to whether diversifi  cation is occurring. But once we look at reward relative to risk, the answer is clear. Monte Carlo , Return/Drawdown Since measuring the drawdown by itself doesn’t always give a clear answer, I use Monte Carlo analysis to see whether the combined system is better on a risk‐adjusted basis. I measure this by lookin g at the annual percenta ge return divided by the max percentage drawdown. Higher values mean that I am getting more reward for my risk. I also look at the probability of makin g money in a year for confi  rmation. When I run this anal ysis, the results are clear (see Table   15.3   ). When looking at all the analysis results, note that the conclusion is pretty obvious: combinin g the two systems produces a smoother equity curve, smaller drawdown TABLE 15.2      Utilizing Drawdown for Diversification Check Strateg y Max imum Draw down Euro ni ght $3,008 Euro day $3,523 Euro day + nigh t $3,265 www.rasabourse.com137DIVERSIFICA TIONthan the worst system by itse lf, a better return‐to‐ris k ratio, an d increase d probability of profi t. C learly, diversi fi cation ma de the com bined system better t han eac h of its parts. The really nice thin g about this diversifi  cation technique is that it did not take any real mathematical e ff ort to ensure that the systems were diversifi  ed. By simply taking care to make the strategies di ff erent, by some combination of di ff erent entries, exits, and other genera l parameters, diversi fi cation was practica lly ensure d. This mig ht not always be the case, but this is true enough of the time to make it a useful and simple technique. One fi  nal benefi  t of diversifi  cation will help you increase the output of your strat - egy development factory. As I have shown, two good systems became a lot better by tradin g them to gether. Thus, it mi ght mean that your individual system performance goals can be relaxed a bit, since diversifi  cation will later improve the performance. In this manner, you might be more successful creating many “decent” or “just good enou gh” strate gies, rather than one “super‐terrifi  c” strate gy. Since it is much, much easier to create good, but not great systems, you mi ght get to your overall goal much more quickly by employing diversifi  cation. TABLE 15.3      Using Return/Drawdown and Probability of Profit for Diversification Check Strate gy Return/Draw down Pro bability of Profit in One Y ear Euro ni ght 2.2 89% Euro day 5.2 97% Euro day + ni ght 6.7 98% www.rasabourse.comwww.rasabourse.com139   Up until this point I haven’t discussed position sizin g or money mana gement in any detail. That isn’t to say I don’t value it; I a gree in lar ge part with position‐sizin g guru and author Ralph Vince, who states that position sizing is one of the most im- portant thin gs in tradin g. The problem is some people take that view to the extreme, and believe that position sizin g is the only thin g that matters. That is simply not true. Use superb position sizing with a losing strategy, and you’ll still lose in the long run. Many people have written books about position sizin g and money mana gement, and just like with general trading books, some are good and some are bad. The best ones I have found include Van Tharp’s The Defi  nitive Guide to Position Sizin g  (Van Tharp Institute, 2013 [2nd ed.]) and the numerous books b y Ralph Vince. Vince’s books are more mathematically based, and tough for inexperienced traders to understand and follow , but the underlyin g messa ges he puts forth are usually good ones. So in this chapter I won’t tr y to recreate the wheel; I’ll instead refer you to those authors for more in‐depth information. In this chapter, I’ll discuss how I employ position sizing, both for a sin gle system and on a portfolio level. But fi  rst, I’ll share with you my thoughts on genera l position‐sizin g issues. ■ No Optimum Pos ition Sizing In all my stu dies on position sizin g, I have determine d there is no optimum or one an d only one correct way to position size, re gardless of tradin g system. Some tradin g books out there claim that their unique method is the best, and then prove it to you throu gh an examp le or two. T his, of course, is bogus. For any given equity curve, you can try  Position Sizing and Money Management  g                                                       CHAPTER   16 www.rasabourse.com140POSITION SIZING AND MONEY MANAGEMENTdiff erent position‐sizing models and fi  nd one that is the best for that particular curve. But, you can ’t then say t hat is t he best way to position size for any system. A good case in point was a book written a w hile back (I wi ll not mention t he title) that developed a new position‐sizin g method. This method basically took more risk at the start of trad - ing and, as the account grew , scaled back the position sizin g. This works great when the equity curve does well at the be ginnin g, which is what most of the book’s examples showed. What most people don’t know is t hat same aut hor applied his “superb” method in rea l time an d quickly blew out numerous accounts. T his was likely because his accoun t started out going down instead of up. So, don’t assume that a position‐sizin g method tha t works well with one tra ding system wi ll work well with all trading systems. ■ Risk and Rewar d Are a Team Many people look for a ma gic position‐sizin g technique that provides extra reward, without any extra ris k. In genera l, though, rewar d and risk go hand in hand—if you want more reward, you have to be willin g to risk more. Where this gets a bi t murky is in reviewin g results. Based on the return and drawdown shown in an equity curve, it may look like you received a lot of extra reward (return) for no extra ris k (drawdown). But you must remember that the risk taken at the start of the trade won’t show up in an equit y curve. The risk is there; it was just never realized. No matter what the fi  nal results say, in the long run you’ll be better o ff  assuming tha t when you want more reward, you have to be willin g to risk more. ■ Position Sizin g Can Be Optimized Many traders will develop a strategy, run it through all the development steps, and afterwards, test out 5 or 10 diff  erent position‐sizin g techniques, pickin g the best one. Man y of these same people don’t realize that the y have just optimized—not on a particular entry or exit parameter, but instead on the position‐sizing method itself. Just as with optimizin g tradin g strate gies, just because one method was optimum on past data, it does not mean it will be optimum going forward. In fact, chances are i t will not be the best. If you are dead set on testin g diff  erent position‐sizin g techniques on a tradin g strate gy, make sure you use Monte Carlo analysis. This will give you a much better in dication as to w hich position‐sizin g method, if any, is better. ■ Losing Systems Cannot Become W inners No matter w hat type o f position‐sizin g approac h you use, i f your core tra ding strate gy is a loser, no position‐sizin g method will save you. That is where it gets confusin g, when certain tradin g gurus state that position sizin g is all that matters. While they www.rasabourse.com141POSITION SIZING AND MONEY MANAGEMEN Tare espousin g the importance o f position sizin g, they are not sayin g you can win wit h a losing system. I f this idea was true, you wou ld have more ric h casino gamblers ou t there. No one, to my knowledge, has ever use d position sizin g to succee d long term in any casino game w here they don’t have an e dge. This doesn’t include cheatin g, or card countin g, or any other method that gives you an advanta ge or ed ge. In those cases position sizin g can help you immensely. If you have a terrible strate gy, in the long run t he choice o f position‐sizing tec hnique is irre levant; you wi ll lose no matter how you size. Start wit h a strategy t hat gives you an e dge, then app ly position sizing. ■ Winning Systems Can Become Losers You wou ld think that since loser tra ding systems cannot become winning systems throu gh position sizin g, the opposite is also true: winnin g tradin g systems can never become losers w hen emp loying position sizing. Not hing, an d I mean not hing, cou ld be further from the truth. It is exceedin gly easy to take a winnin g system, apply an overly a ggressive or inappropriate position‐sizin g method, and still lose all your money. Over the years, I have seen many people do this. Most think that when they have a winnin g system, they must push “the pedal to the metal” and trade as a ggres- sively as they can. Most of these same people crash in spectacular fashion durin g an inevitable future drawdown. ■ The Fantas y of Size Almost every two‐bit huckster out there selling a trading system will have some sor t of sales pitch that goes like this: “If you use my method, you can get $5,000 profi  t per contract per year. So if you trade 100 contracts—all it takes is addin g a few zeros to your order quantity—you’ll soon be making a very good living!” If you can’t im - mediately see throu gh the transparency of this claim, I’ll explain the fallacy. First, the huckster assumes you’ll have enou gh mar gin in your account to actually trade 100 contracts. If you have determined that a $10,000 account is appropriate to trade one contract (which, by the way, is already considered a ggressive by many traders), then you wou ld need a $1 mi llion tra ding account. I f you had that muc h money in your account, you’d probably be smart enou gh to never listen to the huckster’s pitch in the fi  rst place! Remember, drawdown is alwa ys possible, and your account needs to consi der that. The second fallac y in the “trade 100 contracts” scenario is that most people could not handle it psycholo gically. Sure, if the equity curve is always increasin g, trad - ing 100 contracts an d banking $500,000 a year is easy. But w hen you have 5 losing trades in a row , and you lose $100,000, psycholo gically that could be a killer. Your best bet, therefore, is to i gnore the hucksters and position size so that you slowly www.rasabourse.com142POSITION SIZING AND MONEY MANAGEMENTadd on contracts, an d acclimate yourse lf to the dollar amounts invo lved before you increase size a gain. ■ Short Term—Go for Broke If your ed ge is small, and you want to trade for only a very short time, just go crazy with position sizing. C hances are, over t he short run, you pro bably will win. In t he long run, you ’ll be toast, but in t he short run you ’ll be pro fi table. A c lassic examp le of this is with a Martin gale bettin g strate gy. You be gin by bettin g one coin. Every time you lose, you double your bet (two, four, eig ht, etc. coins). W hen you eventu - ally win, you win back all your origina l bets, p lus $1 pro fi t. The interesting t hing about t his approac h is that if you p lay it just once wit h no bet limit, you wi ll almost always make $1 (i.e., winnin g one bettin g sequence). But if you play it over and over, your o dds of overa ll success go to zero because eventua lly there wi ll be a betting run of consecutive losses you cannot recover from. Of course, bettin g one sequence and then walkin g away is impossible for most people. Still, it is an option that is usually successful. When you add in bet limits for Martingale, the approach becomes even less attractive. I know quite a few former traders who tried Martin gale over the years; note I described them as “former. ” ■ No Position Sizin g = No Good! Whether it is fear of loss, lack of confi  dence or some other issue, many people who have winnin g tradin g systems never position size. Instead, they continue to trade the same size for years. This to me is almost as bad as bein g too a ggressive with sizin g. When you have a winning system, you have the goose with the golden egg. Take care of that goose, learn what it can eat to maximize e gg production, but don’t overdo it. After all, you need to make full use of the goose while you have it. ■ Strate gy, Then Position Size, or Strate gy and Position Size To gether? For most of my development career, I have developed the strate gy fi  rst, based on always tra ding a sin gle contract. A fter development is comp leted, I then app ly posi - tion sizin g. This is a good way to go, especially when your fi  nal position sizin g is for a portfolio of s ystems. Fellow tra der An drea Un ger, w ho also tra des for a living, disagrees wit h my approach. Considerin g that he has won the World Cup Championship of Futures Tradin g four times, I think I am safe in listenin g to him. His ar gument is as follows: www.rasabourse.com143POSITION SIZING AND MONEY MANAGEMEN Twhen you develop a system tra ding a sin gle contract, you ’ll get a good system, but maybe not one t hat takes advanta ge of position sizin g. For examp le, if you inc lude position sizin g in your development process, you are likely to en d up wit h sma ller losing trades, since t hat will allow you to tra de wit h more contracts, leading to a higher net profi  t. This defi  nitel y makes sense, based on m y own experience. One of m y favorite tradin g systems I developed was based on one contract bein g traded. Unfortunately, that system has relatively large losses ($2,000 to $3,000 per contract), ma king it toug h to position size, un less the account is very large. Just t hink of the account size you nee d if you want to trade 10 contracts, where a $30,000 loss on one trade is possible. With a $300,000 account, one losing tra de wou ld lead to a 10 percent account loss. T his is much too large a loss, even for the most rec kless o f traders. T herefore, in t his case, maybe developing t he system wit h position sizing wou ld have suggeste d a parameter set where $500 maximum loss was optimum. This system would be much easier to apply position sizing for a sma ller account. So, even though I prefer not using position sizing during development, recognize that at least one (and probably many more) great traders do develop with position sizing. It might be worth trying both approaches on your development projects, to see which one you like the best. ■ Positionin g Size—Sin gle System Whenever I begin trading a new strategy, I almost always start at the smallest size possible, typically only one contract. Many people think the exact opposite; if you have an ed ge, you need to exploit it with bi g size as soon as possible. After all, wha t if the edge disappears? That is a good point, but in my experience, starting small is better. First, even with all the development, testin g, and incubation, the system still might not have an ed ge, even thou gh I think it does. Tradin g small will limit my loss in such a case. Second, I always become emotionally invested in strategies when I start tradin g—after all, I want to see my creation succeed—so tradin g a small size takes any emotion out of the equation. This new strate gy becomes just another strategy in my portfolio. My fi  nal reason for starting small is that I want to increase size based on the profi  ts of the strate gy. If the strate gy makes money, it will ramp up in size. I f it stays fl at or loses money, my downsi de is limite d. Even thou gh I start with one contract, I always know in advance what my sizin g scheme will be as I build equity. Most of the time, I just use fi  xed fractional sizin g: N  =  N int ( x  * Equity/Largest Loss)x where N  = Integer number of contracts (always round down)N int  = Inte ger function www.rasabourse.com144POS ITION SIZIN G AND M ONEY MANA GEMEN Tx  = Fraction of equity to bet on each trade x Equity = Current account equity L a rgest loss = Lar gest historica l loss from wa lk‐forwar d back testin g The onl y variable that is at m y discretion is the fi  xed fraction x.  Man y traders will say that  x  can be no more than .02, or some other value. While I can’t argue withx keeping t he value of  x  low , I prefer to use Monte Carlo simulation to show me thex best va lue of x,  which for me is one t hat maximizes my return/ drawdown ratio. T his is, of course, sub ject to other constraints such as risk of ruin and maximum allowable drawdown. An exam ple will make this clearer. To  look at the impact o f fi xed fractiona l sizing, I use t he Monte Car lo simu lation analysis o f the euro system I wi ll present later. I run t he ana lysis wit h various va lues of the fi  xed fraction  x,  and look at the followin g charts: M edian rate o f return—I want as high as possi ble. Return/DD ratio—I want as high as possi ble. Median max drawdown—I want this as low as possible. Risk of ruin—I want this as low as possible. Obviously, since I am trying to maximize return and minimize drawdown, there has to be a happy medium somewhere. This depends not only on the results but also my personal preferences. For instance, if I did not care what the drawdown or risk of ruin was, I’d select the peak point on the return or return/DD chart. This corresponds to x  = 0.32, and also is Ralph Vince’s optimal  x f.    But, with x  = 0.32, I’d have a 50 percent x chance of havin g a max drawdown equal to or greater than 67.4 percent. Plus, my ris k of ruin would be 21 percent. Wow! Those values are too high for me. But I will accep t a 45 percent maximum drawdown and a 10 percent risk of ruin. Eliminatin g all char t points that do not meet these criteria result in a max value of  x  = 0.175, as shown inx Figure   16.1   . Therefore, I will use this value of x  in my trading for this particular system.    x ■ Positionin g Size—Multiple S ystems Since I am trading multiple systems at any one time, I have to respect any correlation between the results. That is, I can’t independentl y determine the value of x  for each x system, an d then just tra de them to gether. Instea d, I ana lyze a ll the systems to gether, and tr y all values of x  for each of them. Just as with the single system, I want values of x x  for each system (each system will indeed have a diff  erent value of x x ) that maximizes x my return/DD ratio, su bject to maximum a llowable drawdown an d risk of ruin. An example of this process is shown in Fi gure   16.2   , where fi  ve diff  erent systems are traded at the same time. The values for  x  for each system maximizes the return/DD, x subject to t he loss constraints I have c hosen. www.rasabourse.com145POSITION SIZING AND MONEY MANAGEMEN T FIGURE 1 6.1  Single‐System Position Sizing 1400% 1200% 1000% 800% 600% 400% 200% 0% −2.00% 0.00 0.20 0.40 0.60 0.80 1 .00Median Rate of Return Fixed Fraction x Fixed Fraction x0.00 0.20 0.40 0.60 0.80 1 .00100% 90% 80% 70% 60% 50% 40% 30% 20% 10% 0%Median Max Drawdown 18.00 16.00 14.00 12.00 10.00 8.00 6.00 4.00 2.00 0.00 −2.00x = 0.175, meets drawdown and risk-of-ruin goals 0.00 0.20 0.40 0.60 0.80 1 .00Return/DD Fixed Fraction x Risk of Ruin Fixed Fraction x0.00 0.20 0.40 0.60 0.80 1 .0090% 80% 70% 60% 50% 40% 30% 20% 10% 0% FIGURE 1 6.2  Position Sizing, Multiple Systems www.rasabourse.com146POS ITION SIZIN G AND M ONEY MANA GEMENT Obvious ly, I have just scratc hed the sur face wit h position sizing, but I have given you an i dea of how I approac h it. As state d earlier, my p hilosophy is to go s low a t fi rst an d let the system pro fi ts generate most o f the extra capita l needed for position sizing. This helps me keep t he risk at a mana geable level. Since I use fi xed fractiona l sizing, you mi ght wonder how you could employ a diff  erent sizin g technique in your analysis. Simply take what I have shown here and modify it for your sizin g approach, and con duct t he same ana lysis. You ’ll then have a logica l analysis for w hatever position‐sizing met hod you decide to emp loy. www.rasabourse.com147   As you can imagine, keeping trac k of all the strategies you create an d run t hrough this development process can quic kly become a nig htmare. Proper documentation is the key to successfully managing this e ff ort. Currently, I use an Excel spreadsheet to manage my strategies. T his is avai lable on t he book resource we b site (www .wi ley.com/ go/a lgotra dingsystems) for you to download and use, an d is also shown in Figures   17.1 and   17.2   . I have set it up to i dentify the items I feel are t he most important. O f course, as you progress in system development, you will likely have diff  erent items you want to trac k. In that case, simp ly edit the sprea dsheet to fi t your own nee ds. The items I trac k with the sprea dsheet wi ll be discusse d in this chapter. ■ Trading Goals I list all my goals for profi  t, drawdown, rate of return, number of trades, and so on. I fi  nd it much more di ffi  cult to accept systems that do not meet my goals when the goals are c learly written at t he start! ■ Tradin g Idea Here I list all the particulars of the strate gy I am testin g. Strategy name .  Sounds simple, but havin g a unique name for every strate gy helps you keep track of thin gs. I use a standard namin g convention, which allows me to easi ly fi nd it in my tra ding so ftware ’s list of strategies. KJD2013‐10 BrkOut A Documenting the Process                                                       CHAPTER   17 www.rasabourse.com148DOCU MEN TING THE PR OCESS FIGURE 17.1     Documenting the Development Process Trading Goals CriteriaSystem Development Process Checklist Completion Date Completion Date Completion Date ResultsTrading Idea Strategy Name Edge Markets to Test Bar Size Historical Test Period Market Data Streams Market Data Customization Entry Rules Exit Rules Limited Testing Test Period Entry Testing Fixed Stop, Fixed Target Fixed Bar Exit Testing Similar Approach Entry Core System Test Monkey Testing Random ExitRandom Entry Random Entry & Exit Limited Testing—Overall Pass FailStrategy—Gen DescriptionList All Goals www.rasabourse.com149DOCUMEN TING THE PROCESS FIGURE 17. 2       Documenting t he Deve lopment Process (cont ’d) Walk-forward Testing ResultsSystem Development Process Checklist Completion Date Pass Pass Pass Pass PassResults ResultsCompletion Date Completion DateCompletion DateFail Fail FailFailFailIn Period Out Period Fitness Function Anchored/Unanchored Optimum In/Out (if applicable) Walk-forward Historical Strategy Created Walk-forward Testing—Overall Monte Carlo Analysis Start Equity Quit Equity Number Trades, 1 Y ear Return/DD Ratio Monte Carlo—Overall Incubation Meets Goals Diversification Meets Goals Position Sizing Meets Goals Final Notes www.rasabourse.com150 DOCUMENTING THE PROCESS   where: KJD =  My initia ls—in a list of 1,000 strate gies, you want to easi ly fi nd the ones you wrote. 2013‐10 =   Year, followed by two‐di git month. I created this strate gy in October 2013 . BrkOut =  A simple description of the strate gy. This example would be a breakout strategy. A =  Version o f strategy. I f I later c hange or a dd rules, the next version would be “B.”  This serves a cou ple of purposes. First, it helps you keep trac k of how the strategy c hanged over time. Secon d, it remin ds you how many c hanges you ma de to t he strategy. I f you consistent ly fi nd yourse lf testing up to version “M,” for example, you are probably spendin g too much time revising your strategy. Remem ber, the risk of over fi tting goes up with each version. As part of this namin g, I will also add a “W” to the end if the walk‐forward ver - sion has a di ff erent code than the baseline version , and I will use “H” at the end to signify a historical walk‐forward version of the strate gy. Strateg y—general description .  In simple words, I will describe my strategy. Edge.  What do I think my ed ge is? Enter it here. This is a good warnin g sign—if you do not have a clue what your ed ge is, you probably do not have one! Markets to test .  List the market or markets you plan to examine. Bar size.  Enter the type of bar you are testin g with. Historical test period.  List the start and end dates for your anal ysis. Market data streams.  List the data identifi  er you are using. For example, if I wanted to test the continuous gold contract, in TradeStation I would use “@GC. ” Market data customization.  If you use any special session times or anythin g else unique, enter it here. Entry rules.  Describe your entry rules. You can use plain En glish, pseudo code, or actual code. The idea is to archive the entr y method for later reference. Exit rules.  Describe your exit rules in the same manner as your entr y rules. ■ Limited Testin g Here I list all the particulars of the limited testin g phase: T est period.  The one or two‐year sample of historical data that I am usin g to per - form the limited testin g. Entry testing .  Here, I wi ll recor d the genera l resu lts (e. g., exce llent, good, poor) for the entry testin g (fi  xed stop, fi  xed tar get, and/or fi  xed bar). www.rasabourse.com151DOCUMEN TING THE PROCESSExit testin g.  Here, I wi ll recor d the genera l resu lts (e. g., exce llent, good, poor) for the exit testin g (simi lar‐approac h entry). Core system testing.  Genera l resu lts of the whole system. Monkey testing .  If I per form any ran dom “monkey” testin g, I will recor d the resu lts here. Limited testin g—overall .  Based on all the limited tests run, does the s ystem pass or fail? ■ Walk-Forward Testing Assuming t he strategy passes t he limite d testing p hase, I now move on to t he walk‐ forwar d testing step. In period.  The number of tradin g days in the in‐sample periods. Out period.  T he num ber of trading days in t he out‐samp le perio ds. Fitness function .  List t he fi tness function use d. Anchored/Unanchored.  Identify whether you are using anc hored testing or unan- chored testing. Optimum in/out .  If you optimize the in/out periods, identify that here, and also provide information on the true out‐of‐sample date ran ge. Walk‐forward historical strateg y created .  If you create a strategy version specifi  cally with walk‐forward history, identify it here. I si gnify this by puttin g the letter “H” on the end of the strate gy. Walk‐forward testing—overall.  Based on all the walk‐forward testing, does the sys - tem pass or fail? ■ Monte Carlo Testin g Assumin g the strate gy passes the walk‐forward testin g phase, I now move on to the Monte Carlo testing step: Start equit y.  Enter the startin g equity you are usin g for the simulation. Quit equit y.  Enter the equity level below which you will quit trading the strategy. Number trades, 1 year.  Number of trades in one year of tradin g. Return/DD ratio.  Enter this result from the Monte Carlo simulation. Monte Carlo testin g—overall.  Based on all the Monte Carlo testin g, does the system pass or fail? ■ Incu bation Test ing Assumin g the strate gy passes t he Monte Car lo phase, I now move on to t he incu ba- tion testin g step: Meets goals.  Di d the strate gy pass or fail incu bation? www.rasabourse.com152DOCU MENTIN G THE PR OCESS ■ Diversiﬁ cation Check Applicable only to strate gies that you p lan to tra de wit h other strate gies. Was t he current strategy developed with diversi fi cation in min d? Meets goals.  Di d the strategy pass or fail diversi fi cation? ■ Position-Sizin g Check Since I usually test a strate gy with “one trade per contract” rules, this is an easy check. If, however, I used a particular position sizing during development, it should not be the outcome of optimization and should be identifi  ed here (especiall y if it will be traded with other s ystems). Meets goals.  Was the strategy developed using one contract per trade, or some other position-sizin g technique that did n ot  involve o ptimization? ■ Final Notes After testin g and development is completed, enter any information you feel is appropriate. For example, you could list the date you started tradin g. If the strate gy does not pass but you like the entry or exit rules, you could always identify that fact here. I have had strate gies that failed, but I still liked a particular aspect of it. With the notes at the end, you can alwa ys refer to it later and easil y remember, “Oh yes, I wanted to test this entry with soybeans, due to its hi gh volatility. ” ■ One Final List The individual sheets provide an excellent way to manage each strategy. In addition, I also keep a list of entry and exit ideas. These mi ght not be fully formed strate - gies, but they are ideas I can take and later use in a strate gy. For example, if I see an intriguing entry idea in a book or tradin g magazine, and I cannot immediately tes t it, I’ll just add it to m y entr y list. This list serves two purposes. First, it functions as an idea mana ger, savin g any idea you have for future testin g. Second, havin g this lis t means you wi ll never run out o f ideas to test. Trust me, t he list wi ll grow far faster than you can test! www.rasabourse.com Creating a System                                                  P A R T  I V www.rasabourse.comwww.rasabourse.com155 Now that I’ve walked you through the strategy development process I use, I think it will be instructive and informative for me to walk you through the develop- ment of two strategies I created in March 2013 and started real‐money trading in August 2013. If you go to the web site (www .wiley.com/go/algotradingsystems) you will see updates for these strategies, assuming I am still trading them, or a post‐ mortem analysis if I decide to stop trading them. The next chapters will walk you through the process, and after that Chapter   24 will give running commentary and updates as I trade it live. ■ Deve loping a New Strate gy As wit h all new tra ding strategies, fi rst I start out wit h a SMART goa l: “I want to create a tradin g system for the euro currency that is an intraday strat- egy that can earn 50 percent annual return with a median maximum drawdown (determined b y Monte Carlo simulation) of 25 percent or less, which is a return to drawdown ratio o f 2.0 or better. T he system (w hich may inc lude more t han one in- dependent strate gy) should make money on 55 percent or more of the days it trades. This tradin g system will take no more than two trades per day. I will give myself one mont h of development to comp lete this tas k (end of Marc h 2013), an d if I do not have a s ystem at that time, I will move on to the next idea. ”  Goals, Initia l and Walk‐Forwar d Testin g             CHAPTER   18 www.rasabourse.com156 GOALS , INITIAL AND WALK‐FOR WARD TESTING Is this goal suffi   cient for a SMART goal? Let’s take a look: Specifi  c.S   Intraday euro strate gy, with specifi  c performance goals. Yes, it is specifi  c. In fact, it may be too speci fi c—it is a pretty long goal statement. Measurable.MM   50 percent annual return, less than 25 percent drawdown, return / drawdown ratio greater than 2.0, 55 percent winnin g days. Yes, it will easy to measure performance a gainst these benchmarks. Attainable.  50 percent annua l return, less than 25 percent drawdown, return / drawdown ratio greater t han 2.0. W hen I fi rst starte d developing systems, these goals were very ambitious. It turns out that developin g a strate gy the cor - rect  way is pretty di ffi  cult. Many people will sco ff  at these numbers, since they seem sma ll compare d to w hat a decent optimize d strategy looks like. Remem - ber, though, that a great‐ looking back test does not a lways mean too muc h. So, yes, the goals here are attainable. The tou ghest part will be makin g the system an intra day strategy. Relevant.  Everythin g in my goal statement relates to development of this system. Yes, it is relevant. Time bound.TT   Since I limit myself to one month of development time, this is a time‐bound goal. This time limit will also prevent me from makin g too many changes to a decent strate gy, which will prevent overfi  ttin g and other bad de - velopment habits. Once I had the SMART goal identifi  ed, I could proceed to developin g my tradin g idea. From past development experience, I know that intraday systems are di ffi  cult to develop, much more so than a lon ger‐term swin g system. The best intraday systems, in my experience, are those that trade infrequentl y and tend to ride winners (trends) as long as possible. That leads me in the direction of a strategy that cuts losses rela - tively quickly, but keeps winners until the end of the day. T o get the bi ggest ban g for the buck, then, this system should trade durin g the U.S. day session, as many of the big moves occur during this very liquid time period. The problem with this approach is that a system with many small losses and a few bi g winners will inevitably have a low winnin g percenta ge. T o counteract this, I will likely need another strate gy, one that has small winners, lar ger losers, and a hi gh winnin g percenta ge. As you can see, just thinkin g about the kind of system I want really helped me fi gure out t he best way to procee d. After some more t hought, I en ded up wit h the followin g: Create two strate gies for the euro currency, usin g continuous contract @EC: Strategy 1: Nighttime strategy “euro night. ”   Runs on 105‐minute bars, from 6 ” p.m.  ET to 7  a.m.  ET . All trades are exited b y 7  a.m. , so they do not interfere with strate gy 2. This strate gy will focus on sma ll wins, larger losses, an d will initiate tra des on ly until 1  a .m . ET (I have to sleep sometime, in case I do not automate this strate gy). www.rasabourse.com157GOALS, INI TIAL AND WALK‐FOR WARD TESTINGStrategy 2: Daytime strategy “euro day. ”   Runs on 60‐minute bars from 7  ” a.m.  to 3 p .m. ET , wit h all trades exite d by 3 p.m.  The end of the trading day is 5  p .m. , but I am c losing all trades at 3 p .m. , since tra ding volume is a lot less from 3  p .m.  to 5  p.m . For the test period, since I am using small bars, I will test back only to January 1, 2009. Typica lly, for swing systems I use 5 to 10 years o f historica l data, w hich means this is a slightly di ff erent approach for me. This also avoids my having to test during the 2008 fi  nancial crisis, which would likely make development tou gher. So note that, in a way, I am ta king some s hortcuts wit h this strategy development, since I am (1) using on ly about 4 years o f historica l data, an d (2) avoi ding a major mar ket event. I realize that these shortcuts wi ll lead to a system t hat is not as ro bust as it cou ld be, but that is a sacrifi  ce I am willin g to accept. Strate gy development is full of these trade‐o ff s, and there is not always a correct way to resolve them. Sometimes you just have to try an d see w hat happens, an d that is w hat I am doing here. Now t hat I have the pre liminary in formation esta blished, I can go a head with the entry and exit rules. I’ll start with the exit rules, since those will be relatively fi  xed, compared to the entries. For both strate gies, I want to lose no more than $450 per trade, after slippa ge and commission of $17.50 per trade. This equates to a loss of 34 ticks. When I go to detailed development, I will allow this stop amount to be lower than 34 ticks , but never more. For profi  t, with both strate gies I will allow the profi  t tar get to be optimized for euro night strategy, and fi  xed at $5,000 for the euro day strategy. Since there has never been a $5,000 intraday move in euro, the $5,000 limit is eff  ectively sayin g, “Go for as much profi  t as you can, and hold until the end of the tradin g session. ” The fi  nal exit for both strategies will be to close all open trades at the end of the session. This will be a ri gid exit, with no optimization needed. With the simple exits fi  rmly established, the trick to makin g these strate gies suc - cessful will lie in the entries. After some cursory examination and testing, it became apparent that reversal‐type entries would be the best thin g for both strate gies. With a reversal entry, an example of which is shown in Fi gure   18.1   , the idea is to catch an excursion up or down, before it stops and reverses. This makes these strategies a type of mean reversion, since you are enterin g against a trend and bankin g on its reversin g before turnin g into a tren d in the opposin g direction. For strate gy 1, the euro ni ght strate gy, the lon g entry is based on the avera ge high of the previous X bars, reduced by a multiplier of the avera ge true ran ge. Of course, the exact opposite entry is true for a s hort entry. See Fi gure   18.1  . For strate gy 2, the euro day strate gy, when a hi ghest hi gh of the past Y bars is hit, and the X bar momentum is down, then a limit order to sell short will be placed Z ticks above t he current high. The opposite logic holds for long trades. Thus, to get fi  lled, the strate gy is plannin g on one more price thrust before the price reverses. An example entry is shown in Fi gure   18.2   . www.rasabourse.com158 GOALS, INI TIAL AND WALK‐FOR WARD TESTING What do I think my ed ge actually is? Based on the reversal entries I am employin g, I feel my ed ge is in identifyin g very‐short‐term (for ni ght strate gy 1) and medium ‐ term ( for day strate gy 2) areas w here t he price is likely to reverse. By having limit orders away from the current market, I liken my ed ge to a rubber band. It keeps stretchin g and stretchin g until I get my limit fi  ll, then it bounces back, giving me profi t. O f course, i f the rubber band keeps stretc hing after my or der is fi lled, that means my premise was wron g, and I pay the price with a full stop‐loss or a loss at the end of the tradin g session.  FIGURE 1 8.1  Reversa l Entry Examp le Sell short in uptrend, expecting a reversal www.rasabourse.com159GOALS, INI TIAL AND WALK‐FOR WARD TESTING FIGURE 1 8.2  Euro Day Strategy Entry Examp le Buy expecting reversal 0 End-of-day exit 0 End-of-day exitBuy1 .3400 1 .3380 1 .3360 1 .3340 1 .3320 1 .3300 1 .3280 1 .3260 1 .3240 1 .3220 8/19 8/16 8/15 8/14 8/13 8/12 8/9 8/8 8/7 Created with TradeStation. ©TradeStation T echnologies, Inc. All rights reserved.1 Buy 1 With all the basic structure of the strate gy, alon g with the entry and exit in place, I can now start the preliminary testin g. ■Limited Test ing For limited testin g, I chose to look at the results for just 2009. Since my full‐size tes t will be 2009–present, I am usin g about 25 percent of the data to do my initial tests. This wi ll give me a good indication o f whether my strate gy is via ble. Remem ber, www.rasabourse.com160 GOALS, INI TIAL AND WALK‐FOR WARD TESTINGwith these tests I am looking for a genera l indication t hat my entries, exits, an d en- tries and exits combined are working well. Entry test—fi  xed‐stop and target .  The resu lts of this test, an d all other limite d tests are s hown in Ta ble   18.1   . A ll resu lts are accepta ble, which allows me to procee d to the in‐depth testin g phase. Entry test—fi  xed‐bar exit.  The results look good and lead me to think I possibly have some sort o f edge here wit h my entry. Exit test—similar‐approach entry .  T o test t he exit, I create d an entry con dition simi lar in style (mean‐revertin g limit order) to the one I am usin g. If the results are good, it gives me just a bit more con fi dence in t he exit I have c hosen. Resu lts do indeed look good. Core system test .  This test is a gent le optimization o f the whole system, wit h entry and exit con ditions wor king toget her. Resu lts show that the system per forms pretty well and is acceptable for further investi gation. Monkey testing .  This ran dom testing can be very use ful it certain situations. Ot her times, it really doesn’t provide any additional information. Such is the case here. Limited testing summar y.  Both strate gies passed all the tests I ran, so the strate gies can proceed further through the process. Note that this is the exception, not the rule. Most times, the results will be so poor that no further testin g is required, and you can simpl y move on to the next idea. In a minorit y of situations, the results will be so‐so, and you may add a rule or fi  lter to get better results. In very rare cases, strate gies will be acceptable the fi  rst time throu gh, which is what happened here. As you develop experience creatin g and testin g ideas, you will fi  nd that more and more of your strategies fall into this third category. At the start of your developmen t TABLE 18.1   Limited Test ing Summary, Euro Day an d Night System Euro N ight Euro Day Entr y Test—F ixed‐Stop and Target82% o f optimizations profitable76% o f optimizations profitable Entry Test—F ixed‐Bar ExitExit after one to five bars >> goodExit after one to five bars >> good Exit Test—S imilar‐ Approac h EntryGeneric mean reversion limit order entry >> accepta bleGeneric mean reversion limit order entry >> accepta ble Core System Test 85% o f optimizations profitable81% o f optimizations profitable Mon key Test ing Entry better than rando m Entry better than rando m Exit better t han ran dom Exit better t han ran dom www.rasabourse.com161GOALS, INI TIAL AND WALK‐FOR WARD TESTINGjourney, thou gh, plan on discardin g a lot of garbage strate gies and addin g rules and conditions to most o f the rest . ■Walk-Forward Testing With the limite d testing comp lete, I can now procee d to the detailed walk‐forwar d testing. T his consists o f running a full optimization, an d then running t hrough the walk‐forward analysis. Fi gure   18.3    shows the process. FIGURE 1 8.3  W alk‐Forwar d  T esting, Euro Day an d Night Strategy Optimization—Euro Day Whole dataset Xb = 3−5 Xb2 = 70−80 Pipadd = 2−11 Stoplo = 225−425 Run walk-forward analysis Generate code for walk-forward strategyOptimization—Euro Night Whole dataset Nb = 9−19 NATR = 73−93 ATRmult = 2.55−3.15 TRmult = .51−.71 Stoplo = 375−425 Final Result—Euro Night Final Result—Euro Day www.rasabourse.comwww.rasabourse.com163   With the walk‐forward testing complete, based on the results I am confi  dent I have a viable strategy. The equity curve for walk‐forward testing looks nice, but at the same time I realize that there is no possible way the future equity curve will look exactl y like the past equit y curve. M y hope, and the hope of all developers at this stage, is that the components of the equity curve (i.e., individual trades) are roughly the same as the walk‐forward history. The easiest way to imagine this is to think about the average trade profi  t and its standard deviation (scatter). If either o f these values signifi  cantly changes, the system might fail in the future. If, for example, the average trade turns negative, future performance will obviously be negative. Similarl y, if the standard deviation increases, the drawdowns will likel y be much more severe, the system will be harder to trade with position sizing, and the result- ing equity curve will probably give you more ulcers. Assuming, then, that the walk‐forward trade performance will continue in the future, it becomes useful to see how the future performance might vary over time. For t his ana lysis, I simu late one year ’s wort h of trades wit h Monte Car lo ana lysis. ■ Euro Day Strategy As previousl y discussed in Chapter   7  , the onl y information required to do a simple Monte Carlo anal ysis is: ■   Startin g equity ■   Quittin g‐point equity  Monte Carlo T esting and Incubation                                                         CHAPTER   19 www.rasabourse.com164 MONTE CARL O TESTING AND IN CUBATION ■   N u m ber of trades in one year ■   I ndividual trade results For any simu lations t hat you run, you mig ht want to simu late more t han one year’s worth of trades, or you might want to include position sizing, or you may even want to eliminate the quittin g‐point equity—the point at which you stop tradin g. These particu lars wi ll be somet hing you develop over time, as you determine w hat you like and don’t like in the simulation. The exact method I use may not suit you, and that is fi ne. Once I have a ll the inputs for the Monte Car lo simu lation, I simp ly enter t hem in the sprea dsheet an d press t he “Calculate” button. Resu lts are as s hown in Figure   19.1   . For the day strate gy, if I keep the risk of ruin below 10 percent (my personal thresh - old for ruin), I fi nd I nee d $6,250 to begin tra ding this system, an d in an “average ” year I can expect: 23.7 percent maximum drawdown 129 percent return 5.45 return/drawdown ratio Other points of interest are that I have a 4 percent chance of ruin in that fi  rst year, where m y equit y would drop below $3,000. I also have a 94 percent probabilit y of making money in that fi  rst year (i.e., ending the year with more than $6,250). Based on my goals and objectives, all of these parameters are acceptable, and I consider the Monte Carlo simulation results successful. Note that, based on your goals and objectives, this system—with the $6,250 starting equity—may not be good enou gh for you. For example, many people want a near 0 percent chance of risk of ruin. Others may feel that 25.5 percent maximum drawdown is too hi gh. The point is that what is right for me might not be right for you. That is why I think it is so important that you come up with your own goals and objectives. In the end, you need to feel comfortable tradin g what you have developed, and tradin g somethin g that does not fi  t you is a sure recipe for disaster. ■ Euro Night Strategy Now , I will perform the exact same procedure on the euro ni ght strate gy. Results are as shown in Fi gure   19.2   . For the ni ght strate gy, if I a gain keep the risk of ruin below 10 percent, I fi nd I nee d $6,250 to begin tra ding this system, an d in an “avera ge” year I can ex pect: 25.0 percent maximum drawdown 5 2  percent return 2.0 return/drawdown ratio www.rasabourse.com165 FIGURE 19.1       Monte Carlo Results, Euro Day Strate gy www.rasabourse.com166 FIGURE 1 9.2     Monte Car lo Resu lts, Euro Nig ht Strategy www.rasabourse.com167MON TE CARLO TESTING AND INCUBA TION Other points of interest are that I have a 6 percent chance of ruin in that fi  rst year, where m y equit y wou ld drop below $3,000. I a lso have an 85 percent pro bability of making money in t hat fi rst year (i.e., en ding the year wit h more t han $6,250). Note t hat this strate gy is now here near as good as the euro day strate gy. I expecte d this because of the goals of the ni ght strate gy. If you will recall, I was lookin g for a higher winnin g percenta ge strate gy here, not one with necessarily a lot of profi  t. Even so, t he nig ht strategy by itse lf meets my goa ls, although the return/ drawdown ratio o f only 2.0 is on t he low en d of accepta bility. But since it meets my criteria, I can proceed to the fi  nal Monte Carlo ste p. ■Euro Day an d Night Strategy While it is nice to know t hat eit her strategy, by itse lf, meets my per formance criteria, w hat rea lly matters to me is how t he com bined day an d night strategy performs. Before I perform the Monte Carlo anal ysis, however, I have to do some data manipulation. In the previous simulations, I used individual trades for the inputs, which worked fi  ne. But with the combined strate gy, how do I ensure that the correct ratio and distribution of trades is taken to refl  ect what reall y occurs when I trade both strategies together? Some days, only one strategy will trade, and on other days, both strate gies will trade. I want to preserve this with the combined simulation. The solution to combinin g strate gies into one strate gy is to use the daily results, instead of the individual trade results. Then the net results on a given day will be considered as the results of one system. An example of how that works is shown in the “Combined” column of  Table   19 .1   . By utilizing this technique, we have preserved the characteristics of each strategy’s trades, and just combined them into dail y trades. A similar approach can be used to combine any two or more systems into one strate gy. Simply compile results into daily results, and use that in the simulation. Once I have the trade data compiled into dail y results, I can perform the Monte Carlo analysis on the combined euro day and ni ght strate gy. Results are as shown in Figure   19.3   . For the combined strategy, if I again keep the risk of ruin below TABLE 19.1     Com bine Da ily Resu lts on Mu ltiple Systems to Get “One” Combined S ystem Date Euro Day Euro N ight Combined 9/9/2013 +$100 +$100 9/10/2013 +$600 +$600 9/11/201 3 +$100 +$250 +$350 9/12/2013 −$400 −$50 −$450 9/13/201 3 +$100 +$100 www.rasabourse.com168 FIGURE 1 9.3     Monte Car lo Resu lts, Bot h Strategies Com bined www.rasabourse.com169MON TE CARLO TESTING AND INCUBA TION10 percent, I fi nd I nee d $6,250 to begin tra ding this system, an d in an “avera ge” year I can expect: 25.8 percent maximum drawdown 176 percent return 6.6 return/ drawdown ratio Other points of interest are that I have a 5 percent chance of ruin in that fi rst year, w here my equity wou ld drop below $3,000. I a lso have a 95 percent pro bability of making money in t hat fi rst year (i.e., en ding the year with more than $6,250). The most interesting aspect o f this com bined analysis is t hat the combined system is better t han eac h system by itse lf. I’ll repea t that: the combined system is better than each by itself.  T his is due to t he diversifi  cation eff  ect, which I discussed in Cha pter   15  . The return ‐ to‐drawdown ratio, my primary metric in Monte Car lo ana lysis, increases from 5.5 to 6.6 , which is a considerable increase. This is because by trading both systems, I get the combined return of the strategies, but on the downside the drawdowns do not combine. Rather, when one strategy is experiencing a drawdown, the other might be hitting new equity highs (or at least not new maximum drawdowns). Diversifi  cation, by trading uncorrelated strategies, is what makes this possible. Looking at the Monte Carlo analysis as a whole, all my performance goals and objectives are met for the combined system. Therefore, I consider this analysis a “pass” and can now proceed to the next step: incubation. ■ Incubat ion At this point, I have 3.5 or so years of walk‐forward back‐tes t history. On top of that, I have about 5 months of  “incubation ” results, watching the euro day and night systems perform real time, with no c hanges to t he ori ginal code (ot her than re gularly scheduled reoptimizations ). W alk‐forwar d resu lts: Ju ly 2009–Marc h 2013 Incubation resu lts: Marc h 2013–August 2013 If the incu bation resu lts of the last 5 mont hs “look” simi lar to t he walk-forwar d resu lts, I s hould feel com fortable going live wit h the strate gy. www.rasabourse.com170 MONTE CARL O TESTING AND IN CUBATION ■ Are Results  Similar? Here is how I determine if incubation and walk‐forward data “match.” Keep in mind that I am not a statistician, so I tend to keep thin gs simple, at the risk of not bein g 100 percent mat hematica lly and scienti fi cally rigorous. W hat I do passes a common ‐ sense test, t hough. I use t hree met hods to c heck for a matc h: 1.    Student’s t distribution test.   This statistical test will tell you if two data groups (the walk‐ forward results and the incubation results) are si gnifi  cantly diff  erent from each other. You can prett y easil y do this in Excel (with the TT est function), or you can fi  nd on online t‐test by searching with Google. When I run this test, it tells me that there is a 56 percent chance that these distributions are not diff  erent. This gives me reasonable assurance that the strat- egies are performing in real time as they did historically. If, however, the chances of the strategies being diff  erent were 0 to 20 percent, I might seriously wonder if I made a testing development mistake. 2.   Data distribution comparison .  I create two histo grams of the data. The fi  rst one is the actual data, and I la y the walk‐forward and the incubation results on top of each other. Do they look like they overlap? The second chart plots a theoretical normal curve histo gram, based on the mean and standard deviation. I see a good amount of overlap in Fi gure   19.4   . FIGURE 1 9.4       Incubation Resu lts—Data Distri bution Comparison www.rasabourse.com171MON TE CARLO TESTING AND INCUBA TION  3.   Equity curve comparison .  This is m y favorite method, but it is not ver y scientifi  c or mathematical. I simply plot all the data and create an equity curve. When I do that, can I see where the walk‐forward ends and incubation be gins? If I can, tha t suggests somethin g happened when incubation started, and that is usually a bad thing. If you wonder about this method, just create a strategy with optimized pa- rameters, and then let it run live for a while. Most times, you’ll notice a chan ge in the curve. I do not see a radical chan ge in the incubation portion of the curve, shown in Figure   19.5   . This is a good sign! Based on this analysis, I’d say the system is performin g in incubation the same as i t performed in its walk‐forward test. In fact, incubation is better than walk‐forward, which does concern me a bit (usually it is the other way around). But it is close enou gh to give me confi  dence that I did not screw up durin g testin g in development. It does not guarantee that when I go live, the system will be profi  table—that is important to remember. ■Final In formation Once a ll the tests are comp lete, I can ma ke a decision on w hether to procee d with trading the system. Even i f the strategy passes a ll the development steps, I sti ll might decide not to tra de it. Position sizing an d corre lation wit h other strategies are two possi ble reasons I mig ht decide not to tra de a speci fi c strategy. FIGURE 1 9.5  Incubation Resu lts—Equity Curve Comparison www.rasabourse.com172 MONTE CARLO TESTING AND INCUBATION ■ Position Sizin g Although I discusse d position sizing in more detail in C hapter   16  , I did not design the strate gy speci fi cally for any position sizin g method. Of course, it is an importan t item to t hink about before I start tra ding wit h real money. A strategy can be great, but if reasona ble position sizing cannot be app lied to it, it just may not be wort h trad- ing with real money. This can occur when single contract losses are too big, and the account size needed to trade the strate gy is prohibitively lar ge. An example of this is a system very similar to one I developed and have been trading for a number of years. This s ystem wins $5,000 per contract on 50 percent of trades, and loses $3,000 per contract on the other 50 percent. The average profi  t/loss per trade is therefore $1,000, and the Tharp expectancy is 0.33, which is indicative of a pretty good system. But how much money do you need to trade such a system? Assuming the strategy trades 20 times per year, and the quitting equity point is $3,000, you need a $20,000 account to have only a 6 percent chance of ruin. Plus, your maximum drawdown is likely to be 33 percent. That is just too much for many of us. T o get a drawdown below 25 percent, one would need a $35,000 account. This probabl y puts this s ystem out o f reach for most traders. Remember, this is trading only one contract. Using any kind o f position sizin g will make these drawdown and ruin numbers much worse. Thus, in your development process you ma y end up with a profi  table s ystem that you just can’t trade. ■ Correlation with Other Strate gies Before I start trading a strategy live, I always check the performance of the new system with systems I am already tradin g. I run a simple correlation of daily returns. This will tell me if the new strate gy is hi ghly correlated to any of my existin g strate gies. Obviously, trading two strategies that are highly correlated isn’t a good idea unless you cut the position sizin g of each in half. Otherwise, you may end up with too much exposure in a particular market or to a particular tradin g style. Many times, for strategies developed independently, this is not an issue, but it is always good to check. ■ Monte Carlo—Consistenc y One o f the interestin g side benefi ts of performin g Monte Car lo ana lysis is t hat you can get an i dea of your pro fi t consistency. Imagine you were manager o f a casino. Over the course of fi  ve minutes, your casino mi ght make or lose money at the gam- bling tables. There is some ran domness to t he resu lts, so even t he house cou ld lose money in a given s hort time frame. As t he time increases, your c hances o f profi tabil- ity go up, and eventually approach near certainty. Your casino probably makes money www.rasabourse.com173MON TE CARLO TESTING AND INCUBA TIONevery wee k and almost certain ly ma kes money every mont h—un less, o f course, t he crimina l underwor ld is skimmin g from you! The concept o f a casino got me t hinking that I’d really like to be pro fi table over a wee k, mont h, or year wit h my tra ding systems. O bvious ly, that is a function o f my “roulette wheel”—my tradin g system and how much of an ed ge it provides. If I assume that my historical results will match my future results, I can use the Monte Carlo ana lysis to determine my o dds of profi tability. From t hat num ber, I can deter- mine how consistent ly pro fi table I am over any given time perio d. Using this idea, I ran the analysis on my euro day and ni ght system. Before I re - veal the resu lts, keep in min d that this system on average wi ll generate $10,000 to $12,000 pro fi t per year. It is a pretty goo d system. But wi ll it provi de a stea dy return stream? Here is w hat the resu lts show: ■Weekl y —59.6 percent of weeks should be profi  table. So, within one year’s time, I yy should make money 31 wee ks and lose money 21 wee ks. That’s okay, but not re- ally a great way to try to make a livin g. ■Monthl y —74.8 percent of months should be profi  table. In one year, three months yy will be down months. A gain, not very steady returns—what if all three down months came in a row ? ■Quarterly  —86.2 percent of quarters should be profi  table. I like that. yy ■Yearly —98.8 percent of years should be profi  table. One losing year in a 30‐ to yy 40‐year tradin g career. That is very nice. The analysis says if I can live with the weekl y and monthl y uncertaint y, then I’ll be rewarded almost ever y year with a t least some profi  t. Obviously, before I ran this analysis I had to make some simplifyin g assumptions. For example, on average there are 151 trades per year in my trading system. Tha t equates to three trades per week, on avera ge. However, the actual number in any week could be zero, fi  ve, or anywhere in between. Forcin g it to be three every wee k leads to some error. But I don’t think it would change the results by much. If I am lookin g for 90 percent of my weeks to be profi  table, then my strate gy obviously won’t cut it, re gardless o f the assumptions I ma de. The next obvious question is: “What numbers should I re quire for each time pe- riod?”  That will depend on the trader and his goals and objectives. A trader used to living payc heck to payc heck may require 95 percent winnin g weeks, or t hree losing weeks per year. He mi ght know that more losin g weeks than that will lead to eviction. A professional Commodity Tradin g Advisor (CTA) is measured on a monthly basis, so she might desire 95 percent o f mont hs to be pro fi table. A longer‐term tra der, though, mi ght care only about winnin g quarters or winnin g years. It all depends on the trader’s circumstances. www.rasabourse.com174 MONTE CARL O TESTING AND IN CUBATI ON To  t a ke the whole ana lysis a step further, as you a dd good systems to your port - folio, your c hances for pro fi table perio ds goes up. Sort o f like the casino a dding new table games to comp lement t he rou lette w heel. ■ Eliminatin g Big Days Eliminating the outlier trades from the history makes a huge di ff erence in the results. In the history, there are 614 tradin g days represented. There are 20 days of profi  ts greater t han $1,000. In one year o f trading, I ’d expect to see 5 o f those “big” days. If they don’t come, t he system on average becomes on ly slightly pro fi table. My conclusion is t hat I am in deep trou ble wit hout t hose big winning days. T he question is: is there a reason why I should not expect these kinds of days in the future? Maybe my system ru les an d varia bles basically were curve fi t to fi nd these big tra des. Wit h 10 to 20 big tra des, I suppose t hat is a distinct possi bility. However, it is not like these trades are due to a data anoma ly or some back-test issue. Strategy 2 (euro day) was specifi  cally set up to let profi  ts run, and not to cap it. If I saw only a handful of large‐ profi  t trades, I mi ght suspect some sort of data or back‐test issue. One other interestin g question: since I am relyin g on these “outliers” to generate most of the profi  t, how likely is it that I even see many of them in a given year? ■ Outlier Da ys Since I know that the performance of my system is going to be driven by lar ge‐ winning trades (outliers), it is interesting to see how many of these I could expect in a tradin g year. Here’s what I found: ■   In a year’s time, I am likely to see four to six large‐winning trades. That is only one large‐winnin g trade every other month! ■   There is less than a 10 percent (actually, 6.6 percent) chance of seeing eight or more lar ge‐winnin g trades in a year. ■   There is a 13.6 percent chance that I will have only zero, one, or two big winners in a year’s time. This analysis is a bit soberin g, and it does make one thin g crystal clear: if I am to succeed with this system, I have to take every sin gle trade because the one I miss just may be the big winner t hat on ly comes aroun d once a year. Based on this data, my expectation for the system is a lot of fl  at to sli ghtly up or slightly down periods, punctuated by a lar ge winner every once in a while. Why is this important to know? Havin g proper expectations is crucia l to long‐term success. I can’t get discoura ged or lose confi  dence in the system when I am not immediately makin g money. Knowin g what to expect will help me a great deal, especially if I see very little happenin g day to day. www.rasabourse.com Considerations before Going Live                                                 P A R T  V www.rasabourse.comwww.rasabourse.com177 Account an d Position Sizing Now that I’ve developed a strate gy, watched it in real time for a while, and de- cided to trade it with m y own mone y, then what? How do I determine how much to fund the account with? How do I position size? Do I start small or big? Do I have a position‐sizin g scheme? If thin gs go bad, when do I quit tradin g the system? At the end of the incubation period in mid‐Au gust 2013, I truly have no idea how this system will do over the next few months. My hope, as always, is that it will do great, but as with any strate gy, I am always prepared to cut my losses and stop trad- ing it if need be. T o avoid confusion later on, here is a summary of my strate gies: T wo Tradin g Strate gies in Euro Tradin g System: Strategy 1: Euro Night .   Trades overnight session, has high winning percentage, lots of little wins, and an occasional bi g loser. Uses 105‐minute bars. Strategy 2: Euro Day .   Trades day session, lower win percenta ge, primary profi  t generator. Uses 60‐minute bars. Both strate gies are in depen dent, an d I’ll be in on ly one at any given time. Market: Euro Currenc y Futures (6E). ■ When to Quit Now that I have decided to start tradin g my euro strate gies live startin g on Monday, August 20, 2013, I have to a ddress t he question t hat everyone likes to avoi d when startin g to trade a new strate gy: if thin gs go bad, when do I quit tradin g the strate gy?              CHAPTER   20 www.rasabourse.com178 ACCOUNT AND POSITION SIZING There are probably a million diff  erent conditions you could use as a basis for quit - ting a tra ding system. You cou ld set a dollar amount or possi bly wait unti l you get a margin ca ll, or wait unti l you run out o f money. You cou ld stop a fter X losers in a row , or X losin g months. There is no “one” ri ght or wron g answer. But there are three keys to settin g a quittin g point: 1.  It should be based on the system you are tradin g. It makes no sense, for example, to quit a fter a 10 percent drawdown, i f historica lly the system had 25 percen t drawdowns before. T his seems o bvious, but you ’d be amaze d at how many peo- ple make arbitrary decisions like this, without takin g the characteristics of the actua l system into account. 2.  Write it down. Re fer to it o ften. Remem ber it. T his may save you from disaster one day. 3.  Follow it. If/when the written criteria are (unfortunately) met,  stop trading.  This is a sim ple, but very  diffi  cult, step to follow .   y I don’t always use the same criteria for fi  ndin g my quittin g point, but here is how I am doing it for the euro system: A.  Look at walk‐forward histor y, and fi  nd the worst drawdown that occurred (dail y basis). Multiply it by 1.5, since the worst drawdown is almost always in the future. For my system, that worst drawdown comes out to be $3,265. Multiply this by 1.5 to get $4,898. B.  Use Monte Carlo simulation to fi  nd the 95 percent level max drawdown. Tha t means, in a year’s worth of tradin g, 95 percent of the time my maximum draw- down will be less than this amount. This turns out to be $5,082. (If I wanted to be more conservative, I could use the 99 percent level. That drawdown is $6,512.) I should point out those drawdown fi  gures assume one contract being traded the whole time. Yet, I will hopefully be tradin g more than one contract as time goes on. This could get confusin g—my actual drawdown (with multiple contracts) could be a lot bigger than my drawdown limit (based on one contract). I just have to remember to calculate the one‐contract drawdown, and compare than to the $5,000 limit. This will be clearer later, w hen I set up my monitorin g system. Usin g results from points A and B above, I will take the avera ge, and stop tradin g when the sin gle contract drawdown reaches $5,000 (sli ghtly rounded) . I have followed points 1 an d 2 above. Time wi ll tell if I follow point 3— I better if I need to ! For this particular system, the only quit point I am considerin g is the sin gle‐ contract drawdown. T his is simp le, an d pretty ro bust. I f I am tra ding the system years from now , with man y contracts (m y hope, of course), I will still have tha t $5,000 maximum drawdown per contract limit. www.rasabourse.com179ACCOUN T AND POSI TION SIZING In the past, I have use d the Monte Car lo simu lation resu lts to help me decide when to quit. I have a lso examine d, but never imp lemente d, a temporary quit poin t based on mar ket vo latility. W hen the mar ket gets super‐crazy, it may be best to ta ke a break. I don’t think there is a wron g metric or com bination o f metrics to use to decide when to quit tradin g. There is probably no “one size fi  ts all” optimum, either. The key, in my mind, is to select some criteria that you are comfortable with, write it down, an d then follow it exact ly. Then, if your system fails, there should be no tears. You knew t he system cou ld break, and you quit at a preor dained spot. I think where people get in trouble is in not havin g a “quit point,” or their qui t point is w hen their money runs out. Spea king from persona l experience in t he late 1990 ’s, having to quit tra ding w hen your money is gone is not a p leasan t way to quit. What happens when the system performance isn’t bad enou gh to hit your quitting point, an d it is not great eit her, but is somew here in between? May be it is making money, or breaking even, and it is within the bounds of what Monte Carlo simulation says is possible. When do you quit, or otherwise cease tradin g the system? My general philosophy is to watch the downside and let the upside take care of itself. In this case, I watch the max drawdown and, as lon g as that is not hit, let the s ystem perform. I do this because I never know month to month or year to year what particular systems I am trading will do good, which will do bad, and which will just tread water. Normally, I’ll just let system be and not turn them off   or on . But a couple of times a year I rebalance systems I am trading—add in new ones and cull the underperformers and possibly adjust the position sizin g. If capital be- comes an issue, I mi ght very well stop tradin g and swap out a mildly profi  table bu t underperforming system for a system that I feel has more potential. The analysis details are never the same, and I don’t have strict rules on this. I mi ght, for example, stop tradin g a system because I no lon ger like it for some reason—maybe it jus t doesn’t fi  t me anymore. I realize that I am sort of talkin g out both sides of my mouth here. On one side I say, “Maximum drawdown is my only quittin g criteria.” On the other side I say, “Un - less I come up with another legitimate reason to cease trading it.” I rationalize this by sayin g the maximum drawdown is a hard, solid, worst‐case criterion and will no t be vio lated. At t he same time, t hough, other circumstances may arise t hat cause t he system to fall out of favor. These circumstances mi ght cause me to quit earlier. Tha t is a bi g gray area, as unfortunately most thin gs are with tradin g. I can say my p lan at t he start o f trading includes on ly maximum drawdown as t he sole criterion for quittin g. With the small size and account size I am usin g to trade this system, I can’t foresee needin g the capital for a better system. But I am also fl  ex- ible enou gh to rea lize that circumstances may cause me to a lter my quittin g point a t some time . www.rasabourse.com180 ACCOUNT AND POSITION SIZING ■ Minimum Fundin g Size At this point, I have fi gure d out (1) t hat I wi ll begin live tra ding the euro day an d night system, an d (2) I wi ll quit tra ding if my sin gle‐contract drawdown hits $5,000. Now I wi ll determine account size. T his point is prett y important. T oo little capita l to start, an d I may run out o f money before t he quitting point. T oo muc h capita l and I will have a lower rate of return, as well as an ineffi   cient allocation of capital. Currently, the exchan ge initial mar gin on euro currency is $2,750. So, add this to my “quitting point” drawdown, and I get $7,750. This is the minimum account size I should start with. This will allow me to trade up until m y max drawdown is reached. A few important points to consider: ■   I am assuming my broker requires exchange margin, even for day trading. If I had access to day‐trading rates, I could get by with less. This is always a risky propo- sition, thou gh, since many people just increase their size because of the lower day‐trade mar gin rates. This is usually not a good idea. ■   Margins can and do change. If the exchange required margin goes up, I may be forced to stop tradin g before hittin g my quittin g point. ■   I am assuming that I am trading a single contract all the time. As it turns out, I will want more than $7,750 in my account, for position‐sizin g reasons. I am going to use $8,500, for reasons that will be revealed later. ■ Position Sizin g If you have a good trading system, eventually you will want to start trading it with multiple contracts. There are tons of position‐sizin g schemes out there (Van Tharp wrote a hu ge book on the topic), so there is no ri ght way to do it. There is no Holy Grail position‐sizing technique, though, where you get more reward for no extra risk. The simple way to put it is this way: if you trade more contracts, your reward goes up, but so does your risk. Here is what I am doin g (at least for a while; hopefully, once my size gets bi g, I’ll become less aggressive): As always, I start out with only one contract. Why? Goin g live almost always revea ls issues t hat back tests, sim tests, an d incu bation tests keep hidden. For ex - ample, if my strategy is automate d, what if some quir k in my co de sen ds mu ltiple orders or otherwise goofs up? Or what if my slippa ge estimates are way off  , and real‐wor ld slippage actua lly ma kes my strate gy unpro fi table? My experience is t hat starting wit h one contract is t he cheapest way to fi nd out an d correct any live tra d- ing issues. www.rasabourse.com181ACCOUN T AND POSI TION SIZING A secon d reason I like startin g with one contract is t hat I want to remain emo - tiona lly detached as muc h as possi ble from t he strate gy per formance. One‐contract profi  t‐and‐loss swin gs won’t impact me or my emotions. T en contracts, ri ght off  the bat, wou ld freak me out a bit—I ’d be watc hing the system too muc h and have too emotion invested in it. As profi  ts (hopefull y) accumulate, I can add contracts at a comfortable level, and not be emotionally disturbed by it. If thin gs go really well, in six mont hs or even a year or two, tra ding 10 contracts at a time wit h this proven system wi ll seem natura l to me. Some people would say, “If you have an ed ge, exploit it fast and furiously by trading maximum size right o ff  the bat. Edges disappear, so take advantage while it exists. ”  That is a goo d argument, an d I understan d the concept. But I a lso know how I best operate, an d going “all in” at t he start is not goo d psyc hologica lly for me. Of course, you should choose the approach that you feel mos t comfortable wit h. A fi  nal reason I like starting with one contract is that I like the strategy to be self‐generatin g—profi  ts will build the account, leadin g to more contracts, buildin g it further, leading to even more contracts, and so on. No profi  ts mean no increase in size. That just makes sense to me; why allocate more money to a system that isn’t generatin g profi  ts? One drawback to this approach is that it can take a long time to add that second contract. For example, if you decide to trade one contract for each $10,000 in your account, you will have to have 100 percent return to add one contract. Then you’ll need another 50 percent gain to add a third contract. That can take a long time. Some position‐sizin g techniques take this into account (fi  xed ratio sizin g comes to mind), but these approaches have some ne gative characteristics I do not like. I get around this dilemma by sizing my account for roughly 1.5 to 2 contracts a t the start. This would be equivalent to startin g with $15,000 in the example I gave just above. Then, I need only a 50 percent gain to add a second contract. This still forces the system to perform well, but at the same time I get contract growth sooner. For me, it is a great trade‐off  . With all that in mind, here are the details: For my euro system, I have decided to use fi  xed fractional sizin g. NcontractsN   =  X  * Equity/BigLossX where N contractsN   = Inte ger number of contracts, always round numbers down. X  =  Fixed fraction, which I determined through Monte Carlo analysis.X For this system, I am usin g 0.175 (I’ll explain later how I got this value ). www.rasabourse.com182 ACCOUNT AND POSITION SIZING   Equity = Current equity va lue. B igLoss = Lar gest daily loss, $885 for my euro system. Using the prece ding, I can create Ta ble   20.1   . Note t hat my fi xed fraction o f 0.175 mi ght seem aw fully high. It may be for mos t people. I determine it based on risk of ruin, annual return, and max drawdown. I use my Monte Carlo spreadsheet to calculate all that. Based on the position‐sizin g analysis so far, I determine d that using fi xed fractiona l sizing wit h X  = ff   = 0.175 wasX my best alternative. P lease rea lize that this is my persona l preference, based on my persona l goals and objectives, an d that amount pro bably wou ld not be right for you. The question is, how did I arrive at t his fi gure? W hy not just tra de one contract a ll the time, or use a fi xed fractiona l value of .01 or .02 or 0.10 or 0.50?  T o determine t he position‐sizing sc heme t hat is rig ht for me, I use my Monte Car lo simu lator, t he basic (one‐contract) version of which you can download for free at the web site (ww w .wiley.com/go/a lgotra dingsystems). For a given tra ding system, it wi ll estimate t he probabilities of risk of ruin, median max drawdown, and median annual return for the fi  rst year of tradin g. The baseline version of this calculator assumes one contract traded throughou t the year, but the macro code can be edited to simulate di ff erent position‐sizin g tech - niques, which is what I am doin g here. There are four performance numbers I look at: 1.   Risk o f ruin.  How likel y am I to hit m y defi  ned lower cash balance. I want this number low . TABLE 20.1     P o sition‐S izing Ta ble ff = 0.175 Equity NcontractsN < $1 0,114 1 $10,114 2 $15,17 1 3 $20,229 4 $25,28 6 5 $30,343 6 $35,400 7 $40,457 8 $45,514 9 $50,571 10 www.rasabourse.com183ACCOUN T AND POSI TION SIZING  2.   Median maximum drawdown.  I have rou ghly a 50 percent c hance o f hitting this maximum drawdown sometime during the year. T hat of course means my maxi- mum drawdown cou ld be muc h greater t han this value, an d it cou ld be less. I want it as low as possible, wit h a persona l upper limit I have determine d from doing this exercise a bunch of times. 3 .    Annual return.    As with drawdown, I have a 50 percent chance of reachin g this an - nual return, an d it cou ld be muc h higher or muc h lower. I want it as high as pos - sible, but I have no lower‐ limit t hreshold accepta ble value (a lthough 40 percen t is a good value). 4 .    Return/Drawdown ratio.  Astute rea ders wi ll recognize t his as t he Ca lmar ratio, although true Ca lmar is ca lculated over t hree years, not just one year. I want this value as high as possi ble, an d I have a lower limit for accepta bility. (Just for reference, for professional Commodity Tradin g Advisors a Calmar above 1 is consi dered pretty goo d. That means i f you want 25 percent annua l return, you have to be willing to accept a 25 percent drawdown). Using these criteria, I can try a few di ff erent position‐sizing approaches, with some di ff erent parameter values. Note that this is not all‐encompassin g; I have no t analyzed many other potential position‐sizin g schemes. Maybe one would work bet - ter than what I chose. Before I reveal the results, I should mention that I played around with the startin g balance a bit, althou gh I am not showin g those interim results. Basically, by adjust- ing the initial account size, I was striking a balance between having too much money in the account, bein g able to add on a second contract relatively quickly (withou t doublin g my account size fi  rst), and keepin g risk of ruin low . I eventually settled on $8,500 as the start balance, a good trade‐o ff  among all competing metrics. Here are the results, with the one I chose hi ghlighted (“ff  ” is the fi  xed fractional amount) (see Fi gure   20.1   ). My selection meets all my criteria, and I am comfortable with it. This position scheme is the ri ght one for me, ri ght now . But,  dependin g on how thin gs go, I mi ght change it down the road, either to a diff  erent scheme alto gether, or a smaller value o f ff  (i.e., I will become less aggressive as the account grows). I’ll let the performance of the s ystem dictate if and when that happens. With the fi xed fractiona l sizin g I have c hosen, resu lts say t hat in an “avera ge” year (meanin g, 50 percent of years will be worse, and 50 percent of years will be bet- ter), I expect to make $30,735 profi  t in that year and hit a maximum drawdown o f 38.1 percent sometime during the year. T hat pro fi t num ber seems a little too good to be true … and my motto is “if somethin g seems too good to be true, it probably is.” And that profi  t number does seem too good to be true—362 percent rate o f return in t hat fi rst year seems too high, and that ma kes me suspicious. Remem ber, www.rasabourse.com184 ACCOU NT AND P OSITION SIZIN Gthough, the actua l rate o f return cou ld be just a bout anyw here on t he spectrum. It is just t hat the 362 percent is t he me dian va lue. I now look at a histogram o f possi ble returns, s hown in Figure   20.2   . It wi ll be in- terestin g to see if the year 1 results are anywhere close to the median endin g equity (black vertical line). If the y are, I will be ver y happ y. I’ll still be happ y if I even hit the 25 percent mar k, which is a fi nal equity o f about $21,000, or a 147 percent return for the year. A lmost in “too goo d to be true ” region, but it is a possi bility.     FIGURE 20.1 Position‐Sizing Results Start Equity $8,500 $11,960 1% 1% 1% 1% 4%0%19.6% 22.0% 32.3% 43.6% 53.9% 714%460%249%155%141% 13.3810.447 .866.81 ff = 0.1 ff = 0.15 ff = 0.2 ff = 0.257 .12 1 contract alwaysRuinMedian DrawdownMedian $ ProfMedian Return Return/DD Sizing Method $31,598 $13,189 $21,155 $39,074 $60,68837 .8% 372% 9.64 add at 10K, and every 5K up $8,500 $8,500 $8,500 $8,500 $8,5001% 38.1% 362% 9.55 ff = 0.175 $30,735 $8,500 FIGURE  20.2Histogram o f Possi ble First Year Returns Frequency 2000 8000 14000 20000 26000 32000 38000 44000 50000 56000 62000 68000 74000 80000 86000 92000 98000 104000 110000 116000 122000 128000 134000 140000 146000Median equity Equity after One Y ear−1010.%20.%30.%40.%50.%60.%70.%80.%90.%100.% .%1030507090110130150 www.rasabourse.com185ACCOUN T AND POSI TION SIZING ■Unequal Position Sizin g I am usin g the same position sizin g for the two strate gies in my euro day an d night system, even thou gh strate gies 1 and 2 are for the most part di ff erent. The only thin g they have in common is t he stop‐ loss point, aroun d $425 (34 tic ks) per contract . Given their di ff erent trade distributions, is the equal position size approach correct? Maybe the position sizing should be diff  erent for the two strategies. Possibly, tha t would im prove overall performance metrics. As with any trading idea or thought that pops up, I reserve judgment on it until I test and analyze it. The numbers will tell me if this is a good thing to do or not. No emotion is the point, I suppose. I’ll spare you some of the minutiae of m y analysis, but I primarily looked at “trade two contracts of strate gy 1 for every one contract o f strategy 2.” Results Current method (identical sizing, both strategies) Acct size: $ 8,500 Max DD: 38.1 percen t Annual return: 362 percent 2/1 Sizin g method Acct size: $12 ,500 Max DD: 38.3 percent (same as current method) Annual return: 255 percent Conc lusion:  I would need more money in the account to trade a 2‐to‐1 ratio, and my annual return would go down. So it does not make sense. Note:  I performed a pretty simple analysis to conclude this. Really, what I should do is let the fi  xed fractional sizin g for each strate gy fl  oat, and fi  nd the optimum for each. www.rasabourse.comwww.rasabourse.com187  Frequent ly, I hear from discretionary tra ders, an d the conversation goes some - thing like this: Discret ionary Tra der:  “I am sic k of losing. I am too emotiona l to tra de and make trading decisions at t he same time. I want to try a lgorit hmic tra ding.” Me:  “That is goo d you rea lized a nee d to c hange your losing ways. W hy do you think algorit hmic tra ding wi ll work?” Discret ionary Tra der:  “Because I can be a brain‐ dead button pus her an d just follow the system. Kin d of like that episo de of The Simpsons ,  where Homer sets up a drinking bird to continuous ly tap t he “y” key on his keyboard, so he would not have to do any actua l wor k. I want to be the drinking bird, just following t he system. ” Me:  “You do rea lize that the drinking bird eventua lly stoppe d and almost cause d a nuc lear me ltdown, rig ht?” Discret ionary Tra der:  “Huh?” That pretty muc h sums it up—many peop le think there is no emotion invo lved in mechanical trading. Emotions manifest di ff erently in algorithmic trading, as opposed to discretionary tradin g, but they are there, in many di ff erent aspects of tradin g. The nice t hing about a lgorithmic tra ding is that your emotions t heoretica lly should not matter for entry an d exit signa ls. The key wor d, of course, is t heoretica lly. In rea lity, emotions can creep in man y diff erent areas of mechanical, 100 percent rules‐based tradin g. In this chapter, I’ll point out some of these major areas and provide tips for how to minimize t heir impact because, just as wit h discretionary tra ding, emotions can really kill the performance of an al gorithmic trader.    Trading Psyc hology                                                       CHAPTER   21 www.rasabourse.com188 TRADIN G PSYCHOLOGY ■ When to Be gin Tra ding Most peop le, when deciding to go live wit h an a lgorithmic strate gy, never t hink about w hen to actua lly enter t hat fi rst position unti l they do it. But, as I ’ve sai d be- fore, entering a position in t he middle of an open tra de can be emotiona l. Also, w hat if your system had six consecutive winners— do you wait for a losing tra de or two before you start trading? There are really two questions to address: 1.  Should you start trading your system after looking at its equity curve? 2.  Should you start trading your system in the middle of a trade, or wait for the next new entry si gnal? As with most decisions in trading, there is no absolute right or wrong answer. But if you look at the problem beforehand and make consistent decisions, you can eliminate much of the emotion when startin g out. Let’s say you’ve created a trading system with the equity curve shown in Figure   21.1    (it is from an actual system I have traded with real money). This is a pretty good equity curve for a walk‐forward test, and it passed the incubation tes t you just ran for a few months. The s ystem is at an equit y peak, and you are ver y ex- cited (there is the emotional part!) to be gin tradin g. At fi  rst glance, you see the new high and immediately think, “It is a runaway train, I have to get on now!”   That is certainly understandable. At some point, thou gh, tha t FIGURE  21.1   Samp le Wa lk‐Forwar d Equity Curve Walk-forward results Incubation resultsEquity($) −100000 100002000030000400005000060000700008000090000100000110000120000 200100 3004005006007008009001000110012001300 Trade NumberEquity Curve Line -@ES 1 min.(12/10/97 08:18 - 12/30/11 16:15) Trades Peaks Create with tradeStation. ©TradeStation Technologies, Inc. All rights reserved.140015001600170018001900200021002200Legend www.rasabourse.com189TRADING PSYCHOLOGYtrain will slow down or even reverse direction. It is a terrible feelin g to start trad - ing a new system at an equity hi gh, only to endure a drawdown ri ght off  the bat. So maybe it is better to wait for a sma ll pullback in the equity curve an d then begin trading. Of course, you run t he risk of there never being a signifi cant pu llback, and then think of all the profi  ts you’ll miss out on! Both approaches, startin g at or near a new hi gh, or startin g after a pullback, have their emotiona l advantages an d disadvantages. On any given system, no one rea lly knows t he best approac h to ta ke. Over many systems, it pro bably does not mat - ter all that much—some strate gies will continue bein g profi  table ri ght after you start, an d other strategies wi ll imme diately go into drawdown. For me persona lly, it seems t hat most systems go imme diately into drawdown, but I t hink that I for- get about the ones whose equity curve takes o ff  and just remember the immediate drawdown systems. Given t he emotiona l charge in herent in eit her approac h, the simp lest thing to do is to make a decision for all future systems you start trading and then stick to it. For example, you could decide to be gin tradin g after four months of successful incubation, regardless of whether the equity curve is at an equity high, recover - ing from a drawdown, or somewhere in between. That way, sometimes you’ll be right, and sometimes you’ll be wron g, but it should be an emotionless task to begin trading. Once you have decided on an approach to start tradin g, you’ll realize that there is an existin g position that needs to be accounted for. Should you wait for the next new signal? Or should you enter the current winning or losing position? Again, emotion can enter into this decision. As with the equity curve decision, it is best to decide up front and kee p emotion out of it. Part of the decision to enter an existing trade depends on your software and your tradin g style. Some automated platforms may have trouble reco gnizin g a manually entered position. This could lead to your exit si gnal’s not bein g triggered. If this is the case with your software, it is best to just wait for the next fresh entry si gnal. Your tradin g style also plays a role in enterin g an existin g position. In a fast‐paced day‐trading system, with multiple trades per day, the answer is easy: just wait for the next entry si gnal. Since they happen often, there will be little to be gained or lost. A diff erent story exists, thou gh, for strate gies that have positions on for days, weeks, or months at a time. What is the best a pproach here? If the position is close to break - even, just enter it manuall y. It ma y cost you or make you a few extra dollars, but in the long run it does not matter. The decision gets a little trickier with open positions that are currently bi g winners or bi g losers. What approach is best here? Some people will want to enter an open winnin g trade, on t he theory t hat winnin g trades wi ll keep on winnin g. That makes sense, except that you may be incurrin g much more risk to enter a www.rasabourse.com190 TRADING PSYCHOLOGYwinner. Let ’s look at an examp le. Let ’s say your tra de is set up to yie ld either a $500 pro fi t or a $250 loss, an d you never c hange the pro fi t tar get or stop‐ loss. I t is now mi dway t hrough the tra de, an d you have a $300 open pro fi t. Should you enter? Well, initially you had a 2:1 reward‐to‐risk ratio, and by enterin g mid ‐ trade, you have a 200:550 or 0.36:1 reward‐to‐risk ratio. Althou gh the likelihood of your gettin g a $200 gain before a $550 loss is much better than the ori ginal likelihood of $500 gain or $250 loss, I ’d focus more on t he downsi de. Instea d of losing $250 on t he tra de, you cou ld lose $550. As k yourse lf whether you want to risk that extra loss. The same logic app lies to open losing tra des. In t his case, however, your loss would be less by entering mi dtrade, an d your potentia l gain cou ld be a lot larger. This is t he approac h I use w hen starting to tra de a new system: i f the current open trade is a loser, I enter it. If it is a winnin g trade, I wait for the next si gnal, or until the position pu ll backs in pro fi t to near breakeven. T his is t he approac h that ma kes me comfortable. I am not emotional about it, I don’t worry if I made the right decision, I just consistentl y execute the plan. T o me, that is the important point. As you can see, going “live” with an algorithmic system leaves you with a few conundrums and questions. Over the years, I have probably fi  ddled with all combina - tions of the choices of when to start tradin g a strate gy. I’ve been throu gh the sheer disappointment of waiting for a pullback in the equity curve, only to see the system go up for months on end. I’ve also entered open positions and su ff ered losses ri ght off   the bat, when waitin g for the next entry si gnal would have been better. Similarly, sometimes the opposite occurred, and I “won” at these decisions. Overall, I don’ t think it has improved my situation at all but has defi  nitely led to lost emotional capital. So now I have a plan, known in advance, and I start ever y system the same way. This eliminates all emotion from the equation. ■ When to Quit Once you’ve settled on an approach to start tradin g a system, you’ve completed hal f the battle. But, do you know when you’ll stop followin g that new system? Emotions can play a hu ge role here. Whether you are followin g your own tradin g system or followin g an adviser, newsletter, or some other service, if you don’t have an exit plan for discontinuin g it, you rea lly nee d to. Why? Studies have shown that when people are under stress, man y times the y make poor decisions. Certainly, if you were losin g money with your systems, you would be stresse d. Consequent ly, you mi ght make a knee‐jer k reaction to t he losses, or you may stick your head in the sand and avoid a decision all to gether. Both sce - narios can be dan gerous. So the time when you are losin g is a bad time to determine when to stop tra ding a strate gy. www.rasabourse.com191TRADING PSYCHOLOGY Ideally, you determine d when to stop tra ding when you fi rst decided to tra de the system. I f not, it is not too late. Just determine t he metric(s) t hat are most important to you. T hey cou ld include suc h things as: ■   Maximum drawdown . ■   Consecutive losers in a row . ■   Amount lost in a week/month/year. ■   Overa ll profi t after X mont hs. ■   Overa ll winning percentage dips below XX percent. ■   Signi fi cant break in your persona l equity tren d line or equity moving average. ■   New highs, or breaking o f anot her “good” metric (yes, some peop le try to quit a t the top). ■   Anything that can be measured and monitored. ■   Statistical Process Control techniques—for advanced users onl y. The exact condition you select probably is not as important as writin g it down and stickin g to it. That is the key. It needs to be solid, defi  nitive, and written down. Ide- ally, you’ll also tell your spouse or a friend, too, since it is harder to back out when you make the proclamation public. I’ve heard that one money mana gement fi  rm’s exit criterion is 1.5 times the maxi - mum drawdown , and a 24‐month commitment. Those aren’t bad , but the best one is the one that you feel comfortable with—one you can stick with. You’ll defi  nitel y worr y less about your s ystem’s performance if you write down and follow your exit plan. Once you have decided on an approach to start with real money tradin g of a strat - egy, and formulated an approach to cease tradin g should thin gs go bad, all you have to do is turn on the system and let it run, right? You can sleep well, go to your day job, and just let the s ystem run, without an y emotional expenditure on your part, correct? Certainly, that is how the gurus sellin g automated “robots” or “advisers ” make it sound. That’s how they lure many people in: the siren son g of emotionless tradin g. Unfortunately, much like the sailors in ancient Greece who lost their lives sailing to the soun d, many a tra der has been un done by the emotions invo lved in so‐called emotionless al gorithmic tradin g. Emotions bubble to the surface in mechanical tradin g in many diff  erent ways. The most common time for emotions to come into p lay is in t he decision to ta ke ever y trade or not. Clearly, if you’ve tested a strate gy and concluded it is worthwhile, then you need to follow it exactl y as tested. That sounds eas y until a drawdown is in - curre d, or a num ber of consecutive losing trades occurs. T hat is w hen doubt and fear www.rasabourse.com192 TRADING PSYCHOLOGYcreep in. “The last fi ve tra des have been losers, an d that on ly happene d two times in the walk‐forwar d back‐test historica l testin g,” says t he little voice in your head. “Skip this tra de, and wait for a winner fi rst.” Unfortunate ly, this is how the min d works, at least for me. It takes nerves of steel sometimes to overrule the voice in your head. But for any chance of lon g‐term success, you need to keep takin g signals withou t question. Otherwise, by pickin g and choosin g which trades to take, and which to reject, you have comp letely inva lidated all the testing an d analysis behind the system. In ot her wor ds, you are just gam bling, an d that almost never en ds well. Once you get a good feel for your strate gy, you’ll be gin to know ahead of time when a signa l is likely to be triggere d. For examp le, at t he close o f each bar if you are expecting a buy on an upwar d moving average cross, i f the current bar is tren d- ing higher, you ’ll know t he cross wi ll occur at t he close o f the current bar. Gree d can take hold here—why not enter now , before the bar closes? Extra profi  t mi ght be yours, wit h no rea l additiona l risk. But just like “cherry pic king” certain tra des, this “jumping the gun” scenario is a really bad idea. There will be times where i t doesn’t work out, and times it will. You can waste a lot of emotional capital stress - ing over whether to enter (or exit) early or not. Just remember, though, that when you don’t take the entries and exits exactly as your system says, you should no t rely on historical results at all. What you’ve created is a new strate gy, with no real historical basis. In both of the precedin g scenarios, emotions can come in when you make deci - sions contrary to the strate gy rules. So in both of these cases, the emotions can be eliminated by strict discipline—following the rules of the system without question, without fail. This discipline takes time to develop, especially if you are tradin g only one strate gy. Your tendency will be to watch that strate gy carefully, think about it often, and inevitably ponder overruling the strategy. My advice in this case is to trade multiple strate gies if you can. Once you are tradin g three or more strate gies, it becomes hard  not  to follow the rules. This is akin to the serial liar, who tells so man y lies to so many people that eventually the truth comes out. You’ll get so confused by what you are actually doin g and what you should be doin g that just followin g the rules will be much, much easier. In automated trading, I occasionally have to deal with emotions at a stressful time—when somethin g goes wron g. It could be an Internet connection lost, a man- ual order placed incorrect ly, a broker issue, forgetting to ro ll over, or one o f a thou- sand diff  erent “ gotchas” that can sprin g up. Once you notice the issue, or the position mismatch, your stress level goes throu gh the roof. At least mine does. What should I do—exit everyt hing, wait for a better price an d reenter, do not hing, run aroun d the room babblin g like an idiot? These are all possible reactions to an unforeseen problem; heaven knows I’ve done my share of incoherent screamin g and shoutin g at times. Emotions can ta ke hold, and terri ble decisions can be ma de in t he heat o f the moment . www.rasabourse.com193TRADING PSYCHOLOGY The solution to e liminatin g emotions at stress ful times like this is surprisin gly simp le, yet many times tou gh to imp lement. Simp ly sync your rea l‐wor ld position and your strate gy’s position as quic kly as possi ble. Don ’t try to get a better price, fi - nesse t he order, or any nonsense like that. Just get back in wit h market or ders. Don ’t think about this decision, don’t react to any external stimuli—just execute and get positions to match. Sounds simple, yes, but in reality it can be impossible to do. Just keep it unemotional, and in the long run you’ll be much better o ff . I’ve mentione d it before, but it bears repeating: t he key to success ful algorit hmic tradin g is discipline. You need to be disciplined enou gh to follow si gnals without fail. You have to avoi d the temptation to enter ear ly or jump t he gun an d exit ear ly. Plus, when things go wrong, you a bsolutely nee d to get your system back in line wit h its rules as soon as possi ble. Your a bility to do this wi ll be determine d by the amoun t of discipline you have. Just remember, thou gh, when your emotions take over and you do not follow the rules, you are basically just gam bling. Gam blers in t he mar ket usually lose. www.rasabourse.comwww.rasabourse.com195 In addition to starting wit h the right account size, knowing w hen to quit, an d set- ting up a position‐sizing sc heme, t here are ot her consi derations t hat you must think about before going live. T he list of potentia l items is long, so here I just high- light some o f the issues I have found most important w hen going live. ■ Accounting, Trading Brokers I trade multiple systems live right now , and I use various accounts at various brokers. I do this for a few reasons. First, doing a ll the bookkeeping an d accounting gets con fusing w hen mu ltiple systems are a ll lumpe d into t he same account. More t han once, “orphan” positions t hat I forgot to c lose pop up. Having one trading system per tra ding account ma kes things a lot easier from a mana gement standpoint. The second reason I use multiple brokers is that sometimes brokers go belly up or walk awa y with your mone y. I lost some mone y when PFG Best went out of business in 2012, w hen its founder revea led he had been forging bank state- ments for years. I still have only gotten back about a third of my money, and I doubt I’ll ever see it all. I’m no lon ger mad about it, but when I go back and look at the interview I did on Fox Business C hanne l right when the scan dal broke  Other Consi derations before Goin g Live                                                       CHAPTER    22 www.rasabourse.com196 OTHER CONSIDERATIONS BEFORE GOING LIVE(http://vi deo.foxbusiness.com/v/1729212213001/p fgbest-victim-una ble-to- trade-with-account-frozen), it is clear to me I was in a pissed‐off   state of mind. I do not nee d that aggravation a gain. T o me, sprea ding my ris k aroun d will keep me tradin g even if one broker fails. The drawbacks to m y approach are obvious. If I am worried about brokers fail - ing, havin g more accounts with more brokers just increases the chances of my run - ning into a bad broker, rig ht? My approac h may not be better t han fi nding the best broker an d just putting a ll my eggs in t hat basket. The secon d drawback is that using multiple brokers leads to a less‐than‐optimal use of capital (mar gin) situation. This leads to less return, since more o f my money is not put to use. T hat, to me, is an ac - ceptable trade‐o ff . So, for my euro day an d night system, I wi ll open a new tra ding account. After lookin g at my automation requirements, and the fact that all my code is written in Tra deStation Easy Language, it ma kes the most sense to eit her use Tra de- Station as the broker or a NinjaTrader broker. For the Ninja o ption, there is a nea t little feature in NinjaTrader that will take TradeStation‐ generated si gnals, run them thru NinjaTrader, and then send the signals on to a Ninja Broker. I’ve used it before with success, so it is a good option. The TradeStation option is the cleanest and easi - est, of course. ■ Automation, Unattended, VPS, Where Are Orders Ke pt? Here are some other topics I had to consider when taking my euro day and nigh t strate gy live: Backu p Plans In an ideal world, computers never crash, Internet connections never go down, your broker always is up, and so on. In the real world, lots of things can go wrong. Some things to consider—do you need any of these? ■   Backu p PC ■   Backup data stora ge (off  site and onsite) ■   B a ckup Internet provi der ■   Backup power suppl y ■   Backu p phone line ■   B a ckup broker ■   Backup tradin g desk www.rasabourse.com197OTHER CONSIDERA TIONS BEFORE GOING LIVE There is more, I know , but having backups (an d possi bly even backups for the backups) for everyt hing on this list wi ll get you a long way. To Automate or Not to Automate? Durin g incubation, I manually traded my strate gies in simulation mode for a while. I had to have Tra deStation a lert me, a fter w hich I wou ld manua lly place or ders in another platform. Over time, I missed a few trades, made a few mistakes, for got to cance l open or ders, an d so on. Overa ll, I don’t think these mista kes cost me any simu lation “money. ” In fact, t hey may have save d me a few bucks. But t hat isn ’t the point. T he point is t hat I want to tra de the system as I developed it. So, automation makes the most sense for me. Therefore, I will trade it automated. Attended, Unattended? TradeStation always warns its clients that “automated trading does not mean unat - tended tradin g.”  This is pretty sound advice, since issues pop up from time to time, Internet connections go down, orders get missed, and so on. I plan on usually bein g around the PC when this strategy is running, so I’d say it qualifi  es as “semiattended. ” If my account grows and my contract size gets si gnifi  cant, I’ll revisit this approach. VPS Many people use virtual private servers (VPSs) for their trading, to keep the down - time and data la g to a minimum, and their reliability hi gh. I personally do not use any VPS services currently, but I am always monitorin g my situation for reasons to use it. In the past year, I’ve lost Internet connection only twice, and once was on a weekend. If my systems traded more than a few times a day, or if I were runnin g a high‐speed scalpin g strate gy, I’d defi  nitely use a VPS. Where Orders Are Kept I brin g this up because many people don’t know where their orders are. When your automate d strate gy fi res an or der, is it kept on your mac hine? On t he broker’s servers? At the exchan ge? Plus, diff  erent types of orders (limit, stop) may have dif - ferent routin g. For example, limit orders mi ght be sent directly to the exchan ge, bu t stop or ders ma y be held at the broker. My point in brin ging this up is that you should know where your orders are and have plans in place in case somethin g goes wron g. You mi ght think you have an order at the exc hange, but after your Internet goes down an d a fi ll was misse d, you mi ght realize it was really held on your PC. Emer gency situations are not a good time to fi  nd out answers to these questions. www.rasabourse.com198 OTHER CONSIDERATIONS BEFORE GOING LIVE ■ Rollover Considerations Many traders have diffi   culties accounting for rollovers. They wrongly assume they’ll have to “eat” the premium between t he old and new mont hs, or t hat they’ll pay multiple sprea ds to accomp lish the roll. If you do it correct ly, you don’t have to pa y a premium, but you may have to pay two bid/ask sprea d costs instea d of one, an d you’ll have to pay the equivalent of one round turn commission. A lot of people are under the mistaken impression that they always lose or gain premium durin g a rollover. While this mi ght be true for strategies such as scale trading, it does not have to be true for algorithmic systems with a simple rollover. I’ll explain all of that with a real‐world example. First, it is worth explaining  why  a rollover is necessary. For intraday traders, wherey positions are closed at the end of each tradin g day, rollover should never be an issue. On the day of rollover, those traders simply start trading the new front contract month. For swing traders, however, the situation is a bit more complicated. Before fi  rst notice day or last trading day, whichever comes fi  rst, the trader must “roll” his position from the old contract month into the new contract month. For instance, i f you are lon g September euros, you’ll want to sell the September euros, closin g you out of that position, and buy the December euros. Not surprisingly, the devil is in the details, and an example is the best wa y to show the process. Let’s sa y I have a s ystem that trades the euro. I use the back‐adjusted continuous contract to calculate all parameters for the strategy. I am currently trading the September contract, but let’s sa y I roll to December this afternoon Based on the si gnal from my continuous contract chart, I bou ght the September contract at 1.3272 a few days ago. At that time, September was the front month; the continuous contract thinks I entered at 1 .3272 . This system has a $625 stop‐loss, and a $1,250 profi  t target. So my stop loss is a t 1.3222, and my profi  t tar get is at 1.3372. Both of those are based on the September contract, which is what was the lead contract at initial entr y. Now , a few days later, I have to roll the position into December. Let’s fi  rst loo k at the math, and what happens to the continuous contract, and why I don’t lose the premium (diff  erence) between the two contracts when I roll over. Ri ght at rollover, let’s say December was at 1.3303, while September was at 1.3299. This is a di ff er- ence of .0004, which is what the back‐ad justed continuous contract needs to know . T o adjust the continuous contract to have December as the front month, you simpl y have to a dd .0004 to eac h price point in t he existin g continuous contract. So we do this and now have a continuous contract , with Decem ber as t he front mont h. Now , if you have your tradin g strate gy applied to the updated continuous con - tract, t he strate gy will think you bought at 1.3276, wit h a stop‐ loss at 1.3226 an d a profi t target o f 1.3376. “But wait! ” you say. “I didn’t buy at 1.3276. I some how go t screwed!” Here’s the math, ne glectin g the bid/ask spread and the commission costs, just for this exam ple. www.rasabourse.com199OTHER CONSIDERA TIONS BEFORE GOING LIVE Real World—What Y our Actual Trading Account Sees Y o u  bought Septem ber at 1.3272. You so ld Septem ber at 1.3299. Pro fi t = $337.50. You bought December at 1.3303. Current price is 1.3303. Profi  t = $0. In the real world, you have a closed profi  t of $337.50, an open profi  t of $0. If your new stop‐ loss gets hit, you wi ll lose (1.3226 −  1.3303 ) * 125,000 = −962.50. Add that to t he previous ly closed profi t of $337.50, an d your tota l loss is $625. If your new pro fi t target gets hit, you wi ll gain (1.3376 − 1.3303) * 125,000 = +912.50. Add that to the previousl y closed profi  t of $337.50, and your total gain is $1,250. Strate gy World—What Y our Strate gy, Actin g on a Back‐Adjusted Continuous Contract,  Thinks Is Happenin g For the ori ginal continuous contract scenario, the continuous contract thinks I entered at 1.3272. This system has a $625 stop‐loss, and a $1,250 profi  t tar get. So my stop‐loss is a t 1.3222, and my profi  t tar get is at 1.3372. For the new rolled‐over continuous contract scenario , the continuous contrac t thinks I entered at 1 .3276 . This system has a $625 stop loss, and a $1,250 profi  t target. So my stop loss is a t 1.3226, and my profi  t tar get is at 1.3376. As you can see, the profi  t and loss from the real world and the strate gy world is exactly the same. Suppose you are lon g the September euro contract at 1.3222, and it is getting to the time in mid‐September when you must roll over to the December contract. When you have to perform this rollover in an algorithmic strategy, how do you actuall y accomplish it? I usuall y do it one of three diff  erent wa ys. Each one has its advanta ges and disadvanta ge s . Method 1: Quick Roll (Most Expensive T ypically) In this approac h, you enter a se ll order at t he mar ket in Septem ber euro, an d enter a buy order at the market in December euro. Since both orders are market orders, they will be immediately executed. Usin g the prices above, here is the math: Sell Septem ber at 1.3299 ( bid price) Buy December at 1.3304 (ask price) Closed profi  t = $962.50 − $5.00 commission = $957.50 Open pro fi t = Lon g from 1.3304 Advanta ges: Guaranteed fi  ll, quick, easy www.rasabourse.com200 OTHER CONSIDERATIONS BEFORE GOING LIVE Disadvantages: You pay two bid/ask sprea ds, and if you are not quic k with secon d order, mar ket cou ld run away from you, costin g you money. Met hod 2: Leg in Ro ll (Cheapest Met hod Ty pically if  Done Correctly ) In this approac h, you enter a se ll order at t he mar ket in Septem ber euro, an d try to work a buy order at the bid price in December euro. The sell is immediately ex - ecute d, and the buy is a limit or der, w hich hopefully will get fi lled at the price you want. You cou ld also do this in reverse: se ll on a limit or der, an d then w hen you are fi lled, imme diately buy wit h a mar ket or der. You pro bably should use t he limit or der on the side wit h the biggest sprea d, and the mar ket or der on t he tight sprea d. Usin g the prices a bove, here is t he mat h: Sell Septem ber at 1.3299 ( bid price) Buy December at 1.3303 (bid price) Closed profi  t = $962.50 − $5.00 commission = $95 7.50 Open profi  t = Lon g from 1.3303 Advanta ges: You save yourself $12.50 by getting in the December contract one tick better than you did with method 1. Disadvanta ges: More complicated, plus you may have to chase the market up to get the December fi  ll. You can easily lose more than one tick by tryin g to be too greedy with your limit order. Met hod 3: Exc hange Supporte d Sprea d Roll (Cost Usua lly between Methods 1 and 2 ) The exchanges have a great tool to help spreaders—a dedicated quote feed and trad - able symbol for executin g spread orders, which is what a rollover is. In this case, you are buyin g or sellin g the spread, not the individual le gs. You get simultaneously fi  lled on both legs at the same time. Using the prices above, here is the math: Buy spread at 4.5 (ask price). Note that this doesn’t tell you the actual execution prices. You’ll see these on your statement, and the y are reall y irrelevant. So, we will just assume some prices, keeping the spread fi  ll price correct: Sell Se ptember at 1.3329 Buy Decem ber at 1.3329 + .00045 = 1.33035 Closed profi  t = $962.50 − $5.00 commission = $957.50 Open profi  t = Lon g from 1.33035 Advanta ges: Simp le, no c hance o f only one leg executin g, cost usua lly in between methods 1 and 2 . Disadvanta ges: Some brokers don’t support this. For example, TradeStation’s main p latform for automate d trading does not a llow this. You can do it manua lly in TradeStation Futures 4.0 platform, but that platform is not made for al gorithmic www.rasabourse.com201OTHER CONSIDERA TIONS BEFORE GOING LIVEstrate gies. It is a lso easy to screw up t he order, an d buy the sprea d instea d of sell- ing it. You have to be care ful. Also, don’t think that just because you are tra ding the sprea d symbol, you’ll pay only one commission. Some peop le think this is true, an d I guess t hose folks don’t read their statements very c losely. When the brokerage does its accountin g, it splits the spread into a separate buy and sell fi  ll for each le g. When this happens, commission is char ged for each. There is no free lunch, commission‐ wise, wit h this met hod! You can see from the above example there is $12.50 cost di ff erence between all three methods, with method 1 bein g the most expensive, method 2 bein g the cheap- est, an d method 3 in between t he other two. T his is not a lways t he case, but is true in genera l. One met hod I did not mention a bove is to use limit or ders on both sides of the spread. Astute readers have probably already thou ght about this method, and how it cou ld save t he sprea d on eac h side of the rollover. T here is a reason I have not in - cluded it , and that is because it is a terrible  thing to do. In theory, the approach saves you two spreads, but in realit y one spread will be fi  lled and the price will more often than not run away from your second limit order, leaving you with half a rollover (in other words, fl  at). Thus, the times this approach does work are completely overshad - owed b y times the approach does not work. In the end, it will cost you much more to try and save a few dollars in spread costs. Therefore, I recommend one of the three methods above, completin g the rollover quickly, and then movin g on to other trad - ing endeavors. That is how a rollover is actually accomplished. Whenever I can, I use the exchan ge‐supported spreads to do my rollovers. I can do this with systems where I enter orders manually. For my fully automated systems, I generally use method 1, even though it is the most expensive. When I use method 2, I sometimes fi  nd mysel f chasin g the market with my order, or worse yet, I for get about the rollover for a while, leavin g me temporarily doubly exposed, until I fi  x it. www.rasabourse.comwww.rasabourse.com Monitoring a Live Strategy                                                 P A R T  V I www.rasabourse.comwww.rasabourse.com205 In factories, when a machine makes parts, the operations are closely monitored and the dimensions closely checked. The idea is to ensure that the part‐makin g process is going smoothly, and to give an early warnin g signal when thin gs are be ginnin g to go bad. The same process holds true in evaluating live trading systems. I use a variety of tools to monitor strate gies I am tradin g or that I am incubatin g. The fi  rst chart I use is what I call a “bird’s‐eye view” chart, as shown in Fi gure   23.1   . It tells me, at a glance, how my strategy has performed historically and in real time. T o keep consistenc y, I use the same data source for all the data. In m y case, it is the Trade List provided by TradeStation. You can get similar data from just about every tradin g platform.  This is  not  actual real money data,t   which will b e covered in l ater charts and metrics . The point of this chart will be to gauge the general overall e ff ectiveness of real‐ time performance (the portion of the curve on the ri ght). Are the real‐time data consistent with the historical test and the incubation period data? If not, there ma y be somet hing amiss. May be the strate gy has stoppe d wor king correct ly, due to market conditions, for example. Or maybe the assumptions made in the strate gy about limit order fi  lls are not realistic. This could especially be true in scalpin g‐type strate gies, a lthough really you may nee d actua l real‐money resu lts to c heck that. Bad assumptions or strategy development tec hnique up front may not s how up in  The Ins an d Out s of Monitoring a Live Strate gy  g             CHAPTER   23 www.rasabourse.com206 THE IN S AND OUTS  OF MONITORING A LIVE STRATEGYhistorical or incubation tests, but the y certainl y will be revealed when real mone y is on the line. I update this chart every few weeks and quickly review it. This gives me a general feelin g whether my strate gy is performin g as expected. If it is, I can quickly move on to the next chart. If you don’t know how to create an equity chart as shown in Fi gure   23.1  , here is how to create it . ■ How to Build an Equit y Curve (and a Drawdown Curve , Too!) Sometimes, after 20‐plus years of tradin g, some tasks become so rote and routine to me that I for get that I had to learn them at one point. Such is the case with creatin g equit y and drawdown curves. It is simple to me, but to someone who has never done it before, it can be a dauntin g task. So, I ’ll go through the mat h behind creatin g an equit y curve and a drawdown curve. Equity Curve The equit y curve can be built on a closed trade‐b y‐trade basis, or on an y time scale you wish. I like usin g a daily equity chart, in part to eliminate the noise from intraday  FIGURE  23.1       Bird’s‐Eye Equit y Chart www.rasabourse.com207THE INS AND OU TS OF MONI TORING A LIVE S TRATEGYprice chan ges. You can use your daily account statement to get your current equity balance. Here is exact ly how to build an equity curve based on daily data: Day 0 equity = Initial startin g balance Day 1 equity = Day 0 equity + Change in equity during day 1 Day 2 equity = Day 1 equity + C hange in equity during day 2 A nd so on … Then, you simp ly plot the day X equity va lues, an d you have your equity curve. Drawdown Curve The drawdown curve is the di ff erence, on any given day, between that day’s equity, and the  maximum  equity up to t hat point. So, let’s say an account starts out wit h $10,000 on day 0. On day 1, it hits a new equity high of $10,500. T he drawdown on day 1, since it is a new equity hi gh, is $0. On day 2, let’s say the equity falls to $9,700. Now , the drawdown on day 2 is $10,500 − $9,700 = $800. And so it goes throu gh the rest of the days. On days where a new equity is reached, the drawdown will simpl y be $0. On all other da ys, the drawdown will be the diff  erence between that day’s equity and the maximum equity up until that point. D ay X drawdown = Minimum of $0 or (Da y X equit y − Max equit y from da y 0 to day X) A spreadsheet to create equit y and drawdown curves is included at the web site (www .wiley.com/go/algotradingsystems) and the resource web site for this book. ■Mont hly Summar y Chart When I used to work in aerospace (or the “real world,” as I sometimes refer to it), our small compan y ($250 million annual sales) would have a weekl y sales and pro - duction meeting called “How We Doin’.” Incorrect grammar aside, it was an excel- lent way for the mana gers of the company to quickly see how sales were for the month and quarter, what quality and production problems were occurrin g, and jus t a genera l sense o f where the company current ly stoo d. Now , fast‐forwar d a few years. I am tra ding full time, wor king a lone. Bu t I still want to see at a g lance “how I ’m doin’” with my strategies an d trading. Obvious ly, my account statements an d equity curve te ll the overa ll story, but that is not enoug h detail for me. W hat strategies are doing we ll? Which are underper forming? O f strategies I am incu bating, how do they look? Should I make some c hanges in w hat I am tra ding? T his “how I ’m doin’” report can help me answer a ll of these questions. www.rasabourse.com208 THE IN S AND OUTS  OF MONITORING A LIVE STRATEGY I developed a spreadsheet to help me with this task. It tells me at a glance how my strategies are per forming, an d I can easi ly drill down an d see detail if I nee d to. First, t here is a summary page, s hown in Figure   23.2   . I inc lude every strategy I am trading live on t his page. I a lso inc lude, in anot her section, t he strategies I am current ly incubatin g. This summary sheet collects all the data I am interested in (of course, if you did this yourself, you’d likely pick di ff erent metrics than I did). This summary shee t gets the data from the individual sheets, which I will describe a bit later. T o keep thin gs simple, I base everythin g on one contract bein g traded, even thou gh that is usually not what I am actually trading. Why? My goal with this spreadsheet is to see how my strate gies are doin g compared to how I thou ght (calculated) they’d be doing. If I included position sizin g, it would muddy up the view for me. Of all the numbers on this sheet, I am primarily interested in two columns: 1.   Return effi   cienc y.  How am I doin g, compared to my expectations? That is how I defi  ne return e ffi  ciency, and it is simply my actual return divided by my expected return. If my strate gy is performin g exactly as I had calculated, it will be 100 percent. Obviousl y, I want this to be close to or above 100 percent. Typically, when I take all the strategies together, I fi  nd my e ffi  ciency is some - where between 70 and 100 percent. So this says that if my historical testin g says I should make $10 a year, I am actually makin g somewhere between $7 and $10. 2.   Drawdown effi   cienc y.  This is how I am doing with regard to drawdown. Just like with return effi   cienc y, I calculate this as m y actual drawdown divided b y my expected drawdown. I then subtract the result from 1, to make the number 100 percent the ideal value. It is a bit backwards to do this, but I do it that way so that both effi   cienc y numbers have 100 percent as their ideal value. Then, the closer the e ffi  ciencies get to zero, the worse o ff  thin gs are. Once a month, I go throu gh and update each of the individual system sheets with performance data, an d that automatica lly updates t he main s heet. The monthly summary sheet reveals my current performance for all strate gies. It gets data from the individual strate gy sheets. I have one pa ge of my spreadsheet for each of the strate gies I am current ly tra ding or incu bating. Figure   23.3    s hows t he individual strate gy summary sheet. It is pretty simple, yet pretty eff  ective. I can see at a quick glance how a strate gy is performin g, compared to my expectations (which,  FIGURE 2 3.2       Mont hly Summary C hart www.rasabourse.com209 FIGURE 23.3       Individual System Monthly Chart www.rasabourse.com210THE IN S AND OUTS  OF MONITORING A LIVE STRATEGYof course, are based on historica l performance). W hen you have 30 to 50 strategies to keep track of, a quick summary like this is really invaluable. For many strate gies I tra de, that is a ll the information I nee d—a quic k view a t performance. I f somet hing catches my eye, I can a lways dig deeper. On a monthl y basis, the onl y number I have to update is in the “actual” column. This represents the actual profi  t or loss for the strate gy for that particular month. I t can be taken from tra ding statements, a fter adjusting for the num ber of contracts, or it can be taken from t he strategy per formance report. I typica lly do the latter. T he expected numbers can all be obtained from walk‐forward historical testin g. The max drawdown is o btaine d from t he strategy report. Note t hat this is an in - traday va lue, w here t he drawdown t he sprea dsheet ca lculates is on a mont hly basis. This obvious ly is not tota lly correct, as i deally you wou ld want to compare draw- downs over the same len gth of time. But for my purposes it is adequate. One way t hat the individual mont hly per formance c hart can be of great assistance is by identifying strategies that are performing too well. T oo well?  Yes, performance that is too good can be a bad thin g. An example is shown in Figure   23.4   . I started incubating this strategy a while back, and it took o ff . It was “too good to be true”—way above its historical norm. For that reason I decided to keep incubating it. The next few months are shown in Figure   23.5   . Now the strate gy is in line with historical norms, but the standard deviation o f monthl y performance is a killer  (look at the down‐month performances). I looked r into it further and saw that the system was not acting normal. So I decided to keep incubatin g. Figure   23.6    shows what happened. This is a good example of (1) performance that is too good bein g a bad thin g, (2) standard deviation of results (high degree of variability seen from visual inspection) being an early warnin g sign that thin gs were not quite ri ght, and (3) the monthly performance FIGURE  23.4       Super b Incu bation Per formance $14,000 $12,000 Expected results Incubation results May-11 Jun-11 Jul-11 Aug-11 Sep-11$10,000 $8,000 $6,000Profit ($)$4,000 $2,000 $0 −$2,000 −$4,000 www.rasabourse.com211THE INS AND OU TS OF MONI TORING A LIVE S TRATEGY FIGURE 2 3.5       Most Strategies Eventua lly Revert to T heir Mean Incubation resultsProfit ($) −$5,000 May-11 Jun-11Jul-11Aug-11 Sep-11 Oct-11Nov-11Dec-11 Jan-12Feb-12 Mar-12 Apr-12May-12 Jun-12Jul-12Aug-12 Sep-12 Oct-12$0$5,000$10,000$15,000$20,000$25,000 Expected results FIGURE 2 3.6     Incubatin g Even Lon ger $50,000 Expected results Incubation results$45,000 $40,000 $35,000 $30,000 $25,000 $20,000Profit ($) $15,000 $10,000 $5,000 $0 −$5,000 May-11Jul-11Sep-11 Nov-11 Jan-12 Mar-12 May-12Jul-12Sep-12 Nov-12 Jan-13 Mar-13 May-13Jul-13Sep-13 Nov-13 report showing all this information in an easy‐to‐digest format. As an epilogue: I am still incubatin g this particular strate gy but have not traded it with real money. So far, I have discussed a few diff  erent ways to track the performance of a strate gy. These tools are excellent for assessing the longer‐term performance of a system— over a si gnifi  cant period of time (months to years), is the strate gy performin g as it should? While this “view from 35,000 feet” is useful to have, you also need to have measurements at the weekly or daily level. This helps answer the question: is my new strate gy performin g to expectations? I use a couple of diff  erent methods to review the shorter‐term performance. There is a simple way and a complicated way. First, I’ll look at the simple way. www.rasabourse.com212THE IN S AND OUTS  OF MONITORING A LIVE STRATEGY The only data you nee d for this is t he average tra de or average daily resu lt. If you have the standard deviation of this value, then you can do even more. All you do is p lot your resu lts, along with the equation “ n*avg ” where nis the trade num ber/day, an d “ avg ” is the avera ge value. You ’ll get a c hart like the one s hown in Figure   23.7   . If you are above the avera ge line, your strate gy is doin g better than you thou ght. If you are below , your strategy is worse. This chart becomes rea lly use ful as time goes on. Over 30 or more perio ds, you ’d expect the strate gy to be ri ght around the avera ge line. That is how I use it. Then, at a quic k glance, I know t he genera l state o f the strategy. T his chart is very simi lar to the mont hly trac king c hart shown ear lier. It is nice, but it doesn’t convey a lot of information, especia lly ear ly on in t he life of a live strategy. T o get more insig ht, add two lines for the + /− standard deviation curves: Upper curve:  n  *  avg+  sqrt ( n ) * (std dev  ) * vX Avg curve: n  *  avg Lower curve : n  *  avg−  sqrt ( n ) * (std dev  ) * vX where n   =  Th e trade number avg   =  The avera ge profi  t per trade std de v   =  Standard deviation of the avg tradev X   =  Standard deviation multiplierX FIGURE 2 3.7  Daily Performance Review $5,000 Average expected Actual P/L$4,000 $3,000 $2,000Net Profit Day$1,000 $0 0 5 10 15 20 25 30 35 40 45 50−$1,000 www.rasabourse.com213THE INS AND OU TS OF MONI TORING A LIVE S TRATEGY What this tells you is that rou ghly 68 percent ( X  = 1) or 95 percent ( X X  = 2) of the time, X your equity curve s hould be wit hin the upper or lower bands. Most we ll‐performin g strategies wi ll have their equity curve wit hin the stan dard deviation bands. If the equity curve is outsi de of those bands, may be there is somet hing wron g with your strate gy. Figure   23.8    shows a sample strate gy, with  X  = 2 bands. The most interesting pointX here is the bottom curve, the −2 standard deviation line. Look as it starts ne gative and stays negative. Imagine t hat! A winning (positive expectancy) system can sti ll have negative resu lts for quite a w hile. Pure ran dom c hance (t he order of trade re- sults) can lead a winnin g system to appear to be a losin g system. Of course, over time, t he positive expectancy starts to dominate, an d the lower curve wi ll eventua lly turn positive. T his has huge  imp lications for the tra der w ho “twea ks” his met hod if, after fi ve tra des, he is not s howing a pro fi t. He may we ll have just chan ged a winnin g system! This lower curve really shows that it takes time for even a winning system to s how pro fi ts. Here is a great quote that explains it better than I can. It is from the book Trading Bases  by Joe Peta (Pen guin Books, 2013): Well, if you had the opportunity to invest in a venture with a positive expected value, like ownership of a roulette wheel, would you prefer to own it for one hour or nine and a half hours? Funn y things can happen in one hour; there is no guarantee of a profi  t even with the house ed ge. But over nine and a half hours, the natural fl  uctuations inherent in the game will smooth out, and the chances of losing money will be very small, approaching zero over time. FIGURE 2 3.8  Daily Performance Review with Performance Bands $10,000 Average expected Actual P/L−2 Sigma+2 Sigma$8,000 $4,000$6,000 $2,000Net Profit ($) Day$0 −$2,000 0 5 10 15 20 25 30 35 40 45 50−$4,000 www.rasabourse.com214THE IN S AND OUTS  OF MONITORING A LIVE STRATEGY Astute rea ders wi ll recognize t hat the grap h in Figure   23.8   uses stan dard devia- tion and therefore assumes the trade results have a normal distribution. In reality, most tra ding systems do not have a norma l distribution. Rat her, the distribution wi ll likely have a spi ke in ne gative territory, w here a stop loss mi ght be placed, and they will have an extended tail on the profi  t side, or a spike in positive territor y, corre- spondin g to a profi  t tar get. An example of a real tradin g system histo gram, versus the norma lly distributed version, is s hown in Figure   23.9   . Depen ding on t he speci fi cs of the actua l trades, assuming a norma l distribution may be a bad idea. T o alleviate this concern, we can simply take the Monte Carlo results from nu - merous runs an d use percenti les based on t hem. T his wi ll provide a more accurate representation o f the expecte d bounds of the trading system. A simp le examp le can help exp lain this approac h, before I app ly it to t he actua l tradin g data. Assume that we have a tradin g system that avera ges $100 per day, with a stan dard deviation o f plus or minus $50. Wit h two stan dard deviation bands, we expect roughly 95 percent of the values to fall in between the upper and lower curves, or the 97.7 percentile on the upper end and 2.3 percentile on the lower end. If we then run Monte Carlo analysis on a trade‐by‐trade basis, for each trading day we simply select the values at the 2.3 and 97.7 percentiles. Since these values use the actual data, not an assumed normal distribution, the y should be more accurate and representative of the actual trading system. The drawback is that the curves will not be smooth and could chan ge if the simulation is rerun. Such are the penalties for using Monte Carlo analysis. If we run the day‐by‐day Monte Carlo analysis on the euro trading system, how do the curves compare? There is a good, but not perfect, match between the standard FIGURE  23.9       Histogram o f a Typica l Real Trading System 100 90 80 70 60 50Frequency$425 stop-loss causes spike Daily Profit/Loss40 30 20 10 −1000−700−400−10020050080011001400170020000100 90 80 70 60 50 40 30 20 10 0 www.rasabourse.com215THE INS AND OU TS OF MONI TORING A LIVE S TRATEGYdeviation and the Monte Carlo lines. Either is probably acceptable for trackin g pur- poses. I persona lly like the Monte Car lo version, since it does not ma ke any assump - tions a bout t he underlying data. ■How to Use This Gra ph The daily trac king grap h can be use d to help you quit tra ding a system. For exam - ple, if the real‐time performance of your strate gy falls below the lower 10 percen t line, it cou ld mean t hat your system is no longer wor king. A fter all, the odds were 90 percent t hat your strategy s hould be per forming better t han this. An examp le of a rea l‐wor ld system s hould make this crysta l clear. Figure   23.10    shows a sample case of a real‐world system I traded with my own money . Curve 1:   The system per formance a fter 140 days. Bare ly positive, an d close to the −1 Sigma line. That means, at that point, only 16 percent of the randomly gener- ated equity curves, based on the historical back‐test trades, would have been worse than this. I’m sure most people would have stopped tradin g at this point. I did not, since I knew that even with the bad performance there was a chance that the system was not fundamentally broken. Curve 2:  The curve for the next 200+ days (Fi gure   23.11   ). I kept the system running, and now it is performing closer to its expected value. As I explained earlier, I use Monte Carlo simulation to determine if a strate gy is performin g to expectations. It is basically the same result as with usin g mean and FIGURE 2 3.10140‐Day Daily Performance www.rasabourse.com216THE IN S AND OUTS  OF MONITORING A LIVE STRATEGYstandard deviation, except that you can include “boundary condition” e ff ects with Monte Carlo (like quittin g after a certain percenta ge drawdown or quittin g when account gets blown out). ■ Trackin g Expected and Actual Per formance In all the exam ples I have shown in this cha pter, I have used the performance num - bers generated by the back‐testing software, which was TradeStation in my case. These numbers have built in certain assumptions about: ■   Amount of slippage per trade. ■   Amount of commissions per trade. ■   Fill lo gic for limit orders. ■   “Perfect” tradin g versus real‐world tradin g. Depen ding on your tra ding system an d the values you put in t he back‐test so ft- ware, you ma y or ma y not have a realistic view of how your s ystem will perform in the real world. I’m sure you’ve experienced this—you see a terrifi  c‐lookin g equity curve on ly to fi nd out later t hat the creator did not inc lude commissions or s lippage in the performance data. Or you discovered an unbeatable scalpin g system for the mini S&P , only to discover, upon further review , that your back‐test en gine assumed limit or der fi lls as soon as t he price was just touc hed, not w hen the limit or der price  FIGURE 23.11   200‐Day Daily Performance www.rasabourse.com217THE INS AND OU TS OF MONI TORING A LIVE S TRATEGYwas exceeded (this is a very common mistake, especially with many so‐called trad - ing simu lators out t here). Fina lly, you wi ll have Internet outa ges, data delays, an d all sorts o f other little grem lins. T he point is t hat the per formance you expect is not t he performance t hat you ’ll get. If you are treatin g your tradin g as a business, it is imperative that you track actual performance and compare it to predicted performance. After all, when your actual performance is below your expecte d performance, isn ’t that akin to somet hing or someone stea ling from you? It sure feels that way to me—I fully anticipate to ac hieve the predicted performance or better, and when I don’t, I search for and correct the reason. I trac k my actua l performance on t he daily trac king grap h. I also keep a running table of actua l versus pre dicted performance. Most o f the time, t he actua l perfor- mance does sli ghtly better than the predicted performance. This is a very good thin g, as it s hows t hat my assumptions for commissions, s lippage, an d the like were a bit on the conservative side. I’d rather be conservative in my estimates and be pleasantly surprised with actual performance, as opposed to underestimatin g slippa ge and later being disappointed. www.rasabourse.comwww.rasabourse.com219    When I take a new strate gy live, I like to review the performance on an on going basis, to make sure things are going more or less as expected. For my euro day and ni ght strate gy, which I started live tradin g in late Au gust 2013, here are my real‐time updates every three to four weeks of tradin g it, for the fi  rst four months, along with a discussion of a few interesting events that came up along the way. ■ Four-Week Review—Se ptember 13, 2013, End Date Week 4 of tradin g the euro day and ni ght system with actual money is now com- plete. For the fi  rst few months of live trading, every four weeks or so, I review the current performance of the system as shown in Fi gure   24.1   , and answer some standard questions. This information ma y be useful should the performance of the s ystem become erratic—maybe there was something I could have seen earlier, or something I just plain out missed. Summary :  Well, after four weeks of tradin g this system live, I am ri ght where I started—breakeven . Am I sur prised at this resu lt?  Absolutely not. It is we ll within expectations. Am I disa ppointed in the results so far?   Yes. Anytime I start a new strate gy I want to make money at the be ginnin g. Are results in line with expectations?  Yes. T he current pro fi t is below the avera ge I expect, and it is above the lower 10 percent line. So, while it is un- derperformin g currently, I see no reason for alarm. Also, I have had two win- ning weeks and two losing weeks. Over time, I expect a bout 60 percent o f my weeks to be pro fi table, so t he per formance is just as I expect. Real Time                                                       CHAPTER   24 www.rasabourse.com220REAL TIMEAre fi  lls and trades live comparable to TradeStation strate gy report? Yes, in fact, in most cases my fi  lls are better than what I had anticipated. Slippage is usually less than I had expected. Do I see any reason to stop tradin g this system? No . D o I see any reason to change my position‐sizing plan, that is, reduce or increase my risk?  No. ■ Update after Week 7 Seven weeks into trading this system live, and things went bad this week, with a couple of lar ge losin g days. The cumulative equity is hoverin g right around the 10 percent line, which is generally a good warnin g sign that the system is not work- ing the same as its historical test. If circumstances were di ff erent, I might consider stoppin g tradin g this system. The thin gs workin g against the “quit now” idea are: 1.  There are only 18 days of live tradin g data—too short, in my mind, to make a decision to quit. 2.  Most important, w hen I laid out t he criteria for stoppin g live tra ding, per for- mance relative to the dail y performance was not considered (sometimes I do consider this in my “when to quit” analysis). For this strate gy, thou gh, I used maximum drawdown as my stoppin g criteria. I will keep on tradin g, realizin g that thin gs need to improve. FIGURE  24.1       Daily Per formance, A fter Four Wee ks of Live Tra ding www.rasabourse.com221REAL TIME After seven weeks of live tradin g, is the system performin g as desi gned? First, let’s look at the num ber of trades it has taken. A s harp increase or decrease in t he number of trades, w hen compare d to the walk‐forwar d history, wou ld suggest t hat the market action is diff  erent than the historical market, causin g many more, or far fewer, trades to be taken than normal. After seven weeks, the s ystem has traded for 18 days, or 53 percent of possible days. Historically, it trades about 151 days per year, or 60 percent o f days. So t he system is tra ding less than the average. But some years it has tra ded as few as 130 days (51 percent) an d as many as 175 days (70 percent). Based on all this, I’d conclude that the number of trades is generally in line wit h expectations, a lthough at the low en d. Anec dotally, I have felt that the volatility has been lower t han usua l. There have been a handful of days w here an entry was misse d by only a few tic ks (the big Fe d move day, Septem ber 18, was a case in point). A little more volatility in the hours before the announcement and the system would have entere d a big winner. Second, let’s look at average performance versus actual performance. The average historical performance of the system gives $1,441 profi  t after 18 tradin g days. Actual performance, however, is at −$746. This is a hug e  discrepancy, and the conclusion obviously is that the system is not performin g as well as it should. But here is where is gets tricky. Take a coin and fl  ip it 100 times. If you get 60 heads, do you conclude tha t the coin is “broken,” that is, biased? What if you got 70 heads, or 80, or 90? Even i f you fl  ipped 100 heads in a row , could you absolutely conclude that the coin is biased? No! There is a chance, albeit ver y, very small, that a fair coin could be fl  ipped heads 100 consecutive times. It is the same way with a tradin g system. You can ask, “Is it broken?,” but the answer will always have some de gree of uncertainty. That uncertainty sometimes makes all the di ff erence to your conclusions and decisions. Some people take sta- tistics as gospel, but I’ll relate a little secret I learned. Back in my previous career, I had a statistician who worked for me. I assi gned a project to him that required a lot of data analysis and then some sort of conclusion. After he reviewed the details of the project, before he even started work, he asked me, “What conclusion would you like? I can make the data support your point of view , whatever it is.” I was astounded, but I never forgot the lesson—statistics can be manipulated very easily, so be careful makin g any conclusions based on them. Right now , t he actua l system per formance is at t he 10t h percenti le of what was expected. The 50th percentile would be ri ght at the avera ge, so the 10 percen t mark is prett y bad. But it is still within the realm of possible outcomes. If it were below t he 0 percenti le—let’s say t he system had lost $8,000 t hrough the fi rst 18 days—then the system obviously would not be performin g as expected. Tha t would be an easy decision. It is where there is uncertainty that thin gs get tou gh. There are statistica l tests t hat cou ld be run to s how w hether the current tra des could be part of the historical distribution of trades, but even such advanced www.rasabourse.com222REAL TIMEanalysis is not defi nitive. T here is a lways a gray area. So how do I navigate t he gray area? First, I try to determine the parameters that will cause me to quit trading a system. I cou ld certain ly use t he percenti le num ber approac h and have a quittin g rule that says, “If after X days the per formance is below t he Yth percenti le, I wi ll cease tradin g.” X and Y would be at my discretion, based on personal preferences. As lon g as I stick to the rule I create at the start, I’d be doin g fi  ne. For me, and for this particu lar system, ear lier I decided that I wou ld quit on ly when I hit a $5,000 drawdown. So I am not using t he data in t he trac king grap h to decide when to quit. Sometimes I do use it, thou gh. To summarize: Is the system performing as expected ?  No, not even c lose. It is per forming much worse t han expecte d. Is the system “broken? ”  Maybe, maybe not. It depends on how you defi  ne broken. One cannot say defi nitive ly it is broken or it is not broken. Am I going to quit ?  No. My quit point, established earlier, calls for a sin gle‐ contract drawdown of $5,000. This was a well‐thou ght‐out amount, and I can’t just toss it out the window . I’m going to stick to the plan. I realize, though, that stickin g to the plan mi ght be akin to the captain sinkin g with the ship. ■ Week 8 Review Week 8 of tradin g the euro day and ni ght system with actual money is now complete. Summar y:  First, let’s look at the bi g picture. I like to do this re gularly, because at a glance I can tell if things are going as planned or not. From looking at Figure   24.2   , a couple of thin gs are clear: 1.  Over the whole course of the s ystem histor y (walk‐forward, incubation, live), the system performance hasn’t changed much. I could draw a line from the star t of walk‐forward to the start of incubation, and then another line from the star t of incubation until the present time, and the slopes of those two lines would be about the same. This gives me some reassurance that the system is behavin g, subject to point 2. 2.  In Fi gure   24.3   , It is easy to see t hat the live tra ding (dark gray line wit h trian gles) has not been u p to par at all. The performance these past two months has been down, and while it has not crashed and burned, it certainl y has been a disappointment. After ei ght weeks of tradin g this system live, I am down about 5 percent from the start. www.rasabourse.com223REAL TIME FIGURE 24.2   Big Picture Equity Curve a fter Eig ht Wee ks FIGURE 24. 3  Daily Per formance a fter Eig ht Wee ks of Live Tra ding Am I sur prised at this resu lt?  Absolutel y not. It is well within expectations. Am I disa ppointed in the results so far?   Yes. After ei ght weeks, I had hoped to be making some money. The performance these past eight weeks is way behind the lon g‐term avera ge, so it is very disappointin g. Are results in line with ex pectations?  Yes. The current profi  t is below the average I expect, and it is right around lower 10 percent line. So it is www.rasabourse.com224REAL TIMEunderper forming current ly, and I will be concerne d if equity drops below that 10 percent line. A lso, I have had four winnin g wee ks and four losing wee ks. Over time, I expect a bout 60 percent o f my weeks to be pro fi table, so t he per - formance is a bit behind in that re gard. Plus, one week was really, really bad. Are fi  lls and trades live comparable to TradeStation strate gy report? Yes, in fact, in most cases my fi  lls are better than what I had anticipated. Slip - page is usua lly less than I had expecte d. Do I see any reason to stop tra ding this system ?  No. Do I see any reason to chan ge my position‐sizin g plan, that is, reduce or increase my risk?  No. After eig ht wee ks, I wi ll keep on tra ding per t he plan, but storm c louds are form- ing on the horizon. I need some sunshine instead! ■ Wee k 9—Automate d Trading Issues You’ve probably heard the phrase “automated trading does not mean unattended tradin g.”  You’ve also probably read all the disclaimers that the brokera ge throws at you before the y allow you to turn automation on. With TradeStation, for example, there are tons of disclaimers you have to sign when you open an account, and then if you want to automate a strate gy, there are two more disclaimers you have to clic k and accept. The fi  rst disclaimer is 397 words, and the second is a whoppin g 593 words. That is a lot of legalese to wade through just to automate your trading. But all those warnin gs are there for a reason. I gnore them at your own risk. That’s what happened to me in week 9 of live tradin g. Let me explain. My euro day and night strategies enter on limit orders, which are supposed to be active for the current bar only. After the bar closes, any open orders get canceled by the software. Dependin g on the strate gy logic, another limit order may be placed for the current bar. So, Monday ni ght durin g week 9, my euro ni ght strate gy placed a limit order to buy, well below the market. It did not get fi  lled durin g the bar, so it should have been canceled. For whatever reason, it was not canceled. This is the fi  rst time I have ever  seen this occur. The success rate of the software auto‐canceling orders, fromr my experience, has to be well over 99 percent. T hat is exce llent, but errors can an d do occur. Just look at the airline industry, for example. There are rou ghly 28,000 commercial fl  i ghts per day, and if even 99.99 percent had successful takeoff  s and landings, two or three planes would crash  per day  . That’s where claims of 99 percenty plus uptime, accuracy, whatever are meanin gless. Anythin g less than 100 percent perfection runs the risk of costin g you money. The order reste d at the exc hange unti l 5 a.m.  Tues day mornin g, when it was fi lled. I noticed this rou ge position Wednesday mornin g. Of course, with Murphy’s Law in www.rasabourse.com225REAL TIMEeff  ect here, I noticed it not when the position was profi  table, but after it had gone negative. T hen, to a dd insult to injury, w hile I investi gated the issue— before I exite d the position—I watc hed it drop anot her $125 or so. Once I con fi rme d that the posi- tion was wron g, I exite d with about a $550 loss. Who’s to blame here? Well, the software did not do its job, since it should have canceled the order. But, ultimately, I can blame no one, and no thin g (software, In- ternet connection, etc.), except myse lf for the error. I ’ll repeat t hat: I am to blame! I am t he careta ker, an d if things go wrong, as t hey occasiona lly will, it is up to me to be aware of it and fi  x it. I take full responsibility for this screw up, and I added some steps to ma ke sure it is not re peated: 1 .   C heck statements every day. If I had checked it that fi rst morning, I ’d have pro b- ably exited with a $300 profi  t, instead of a $550 loss. 2 .   C heck platform every few hours for uncance led orders. 3.  Improve c hecking o f positions. I norma lly check my positions every few hours, but some how this one s lipped by me. 4.  Make sure fi  lled orders show up on the chart. For some reason, this fi  ll did not—they usually do. Not a killer loss, but enough for me to getting pretty upset at the situation! Percenta ge‐wise, for this account, the losses were 7 percent, so that is pretty bad. Eventually, I want this strate gy to get to 10 contracts, and at that point it would be some serious money. I noticed the bad trade about 30 hours after I entered it. Then I exited at almost the worst time , with a $550 loss. Now , less than one hour later , I could have exited with less than a $100 loss. Is it just me, or does this kind of stu ff  happen to you, too? If I did no t know better, I’d swear that someone was controllin g prices, and watchin g my positions, and deliberately doin g things to maximize my losses! I can defi  nitely see why people feel this way—at times, it surely feels like the market is out to get me personally! I’ve thou ght a lot about this occasional paranoia‐type feelin g. I know why some o f this occurs. I tend to discount—not really notice or dwell on—every good thin g that happens to me (mistakes in my favor, excellent news reports right after I enter a po - sition, etc.). Money‐makin g anomalies become just a blip in the equity curve. They are nice, but I don’t really remem ber them too we ll. But I ten d to remem ber losses due to mistakes and keep them fi  led in my memory bank. Some of these “losin g les- sons” mi ght be good to remember—today’s automated issue is a good example—but most s hould be forgotten just as easi ly as t he money‐ma king mista kes. That doesn’t happen for me, at least not usuall y. Last year I actually did a study of this psycholo gical phenomenon. I added up all my winnin g mista kes an d all my losing mista kes. T he net impact, from a monetary basis, was just about zero. But from a psycholo gical standpoint, it defi  - nitely was not breakeven. One would think this feelin g (“the market is out to get www.rasabourse.com226REAL TIMEme”) wou ld have disappeare d after 20‐p lus years o f trading. But it hasn’t, an d I suspect it never will! By the end of the wee k, what should have been a decent winnin g week turne d out to be a losing wee k, due to t he entry “glitch” descri bed earlier. T hat cost me $550. I have taken some immediate steps to prevent it from happenin g again, and I think I am in the clear, at least for the time bein g. My actual performance now la gs the per- fect strategy per formance, an d the issue t his past wee k is to blame for that. The pro blem u ltimate ly comes down to t his: if I am depen ding on a computer to place, cancel, and replace orders, unless someone is monitorin g it at all times, there is a lways a possi bility of somet hing going haywire. T he question is how muc h of my limited resources (it is just me, after all) do I devote to the e ff ort to make the automation goof‐proof? Doing the usual amount of e ff ort hasn’t worked—since I just lost $550—but at what point will I be confi  dent that those issues will not occur? Plus, it is usua lly not t he issues you know a bout, but the issues you don’t know a bout. This case was one of them. After thousands of automated trades over the years, this particular issue had never come up before! Enough about that issue for now . Performance is still lagging, and the euro day system has not had a trade in two weeks (I think I can blame lower volatility for that). Regardless, I will “keep on tradin g!” ■ Week 9—Limit Order Fills (October 28 , 2013) One of the tricks unscrupulous s ystem vendors pla y is to assume that all limit orders are fi  lled as soon as the price is touched. You can recognize this by looking at a price charts of their trades. If the method shows trades bein g bought at the exact low o f a bar, and/or sold at the exact hi gh of a bar, you can bet this game is bein g played. Of course, the reality is that it is hard to buy the low and sell the high. My experi - ence is that, dependin g on the market and when your order is placed, you can prob - ably do this 5–20 percent of the time. The other 80–95 percent of the time, price has to trade through your price to get you a fi  ll at the limit price. This can be an issue with back testin g. If your back‐test en gine assumes that limi t orders are fi lled when touc hed, the resu lts wi ll be too optimistic. I f the back‐test engine assumes price must be penetrated to get a fi  ll, then the back‐test results will be a bit too pessimistic. I always go with the pessimistic approach. My actual results can t hen on ly be better t han the back test. Durin g tradin g for week 9, the euro day strate gy bou ght the exact low of the bar on a limit order. Of course, part of the reason I was fi  lled was that I was tradin g a 1 lot; if I were tra ding a 10 lot, I pro bably wou ld have receive d only a partia l fi ll. The interes tin g thing is that when I refreshed the chart, the trade went away, accordin g to the strate gy engine. Since the price did not go one tick below my limit price, the www.rasabourse.com227REAL TIMEstrate gy engine assumes there was no trade. But my real account says there was a trade because I was in deed fi lled. Since t he trade was a winner, it was a nice sur prise for once! So t his is roug hly a $400 tra de in my rea l account ’s favor, w hen compare d to the back‐test en gine. T his ma kes up for the order pro blem that cost me $500 in the previous week. ■Week 12 Review Summary :  First, let’s look at the big picture, as I a lways do. From a look at Figure   24.4   , a coup le of things are c lear: 1.  Over the whole course of the system history (walk‐forward, incubation, live), the system per formance hasn’t changed muc h. Just as a fter wee k 8, I cou ld draw a line from t he start o f walk‐forwar d to the start o f incu bation, an d then anot her line from t he start o f incu bation unti l the present time, an d the slopes o f those two lines would be about the same—with the slope from start of incubation to present bein g a little fl  atter. This gives me some reassurance that the system is behavin g well on a lon ger‐term basis. 2.  It is easy to see that the live trading has been lagging long‐term performance. The performance these past three months has been down, and while it has not crashed and burned, it certainl y has been a disappointment. FIGURE 24.4   Big Picture Equity Curve after 12 Weeks www.rasabourse.com228REAL TIME After 12 weeks of tradin g this system live, I am down about 10 percent from the start for the strategy‐calculated performance, and about 4.5 percent for the actual performance (Fi gure   24.5   ). Am I sur prised at this result ?   Yes. I had expected better, certainly close to breakeven by now—at the very worst. Am I disa ppointed in the results so far?  Ver y much so. The performance these past 12 weeks is way behind the long‐term average, so it is very disappointing. Are results in line with ex pectations ?  Just barel y. Results are around the lower 10 percent line, which means the system in real time is close to bein g a diff erent system than walk‐forward and incubation. Not quite di ff erent yet, but getting close. Are fi  lls and trades live comparable to TradeStation strate gy report? No, but it is a good thing! I am doing about $550 better live than the strategy predicts because of (1) less slippa ge than I had planned for and (2) a few trades where I was fi lled in rea l life when price just touc hed, but did not excee d, my limit price. Do I see any reason to stop tradin g this system ?  No. Do I see any reason to chan ge my position‐sizin g plan, that is, reduce or increase m y risk?  No . After 12 wee ks, I wi ll keep on tra ding per t he plan, but this system is just kind of fl  ounderin g. A couple of bi g winners, which is what the system is based on, are needed. FIGURE  24.5       Daily Per formance, A fter 12 Wee ks of Live Tra ding www.rasabourse.com229REAL TIME ■Week 13—Tim e Limi t Review As my strate gy continues to fl ounder aroun d breakeven, I start to won der: how long am I wi lling to put my capita l at ris k without any return? T he answer for me invo lves the “next best alternative. ” Every six mont hs or so, I look at every system I am tra ding, an d also the systems waiting in the wings (ready to be traded live, but currently not trading live). If I fi  nd a better system than the one I am tradin g, and I don’t have enou gh capital to trade both (or perhaps because of correlation issues I do not want to trade both), I will re place it. Thus, even if the euro trading strategy is performing decently (making money as opposed to its current situation of near breakeven), I still might replace it with the “next best alternative .” I do this exercise onl y two times a year, in part because it is involved (com - plicated correlation studies, etc), but mainl y because it is onl y fair to a new system going live to have some time to prove itself. Most people don’t have the patience to do this, and they jump from system to system, never giving any system a fair chance. It would almost like pullin g a pitcher in baseball from the game as soon as he gives up just one hit. As I showed earlier, even winning systems can be losers for quite a while, until the lon g‐term positive expectancy really shows itself . Of course, even with this twice‐a‐year analysis, my original quitting point is still in eff  ect. If I hit that, I am out, re gardless of the next best alternative (which may be cash ). ■Week 15 Review Summary :  After 15 weeks, the euro day and night trading strategies are fi  nally doing better, as depicted in Fi gures   24.6    and   24.7   . By lookin g at the bi g picture, it is clear that the performance of the past few weeks is getting the live results closer to the historical back test. The system still has to improve performance, but things are certainly lookin g better. After 15 weeks of tradin g this system live, I am up about 1 percent from the start for the strate gy‐calculated performance and about 9.0 percent for the actua l performance. Am I sur prised at this result ?  Obviously, I was hopin g for better, but I am thankful that the system is s howin g a pro fi t at t his point. Are results in line with expectations ?  Resu lts are defi nitely more in line with expectations, especially in the past few weeks. But the strate gy as a whole is sti ll underper formin g. As state d earlier, t his approac h relies on a handful of big pro fi t tra des per year, an d so far in live tra ding there have no t been an y. www.rasabourse.com230 REAL TIME FIGURE 24. 6       Big Picture Equity Curve after 12 Weeks FIGURE 24.7       Daily Performance after 15 Weeks of Live Tradin g Are fi  lls and trades live comparable to TradeStation strat - egy report ?  No, an d that is sti ll good! I am doing a bout $700 better live than the strategy pre dicts because o f (1) less slippage than planned and (2) mu ltiple trades where I was fi lled in rea l life but not in t he back‐test engine ( limit price penetration issues). www.rasabourse.com231REAL TIMEDo I see any reason to stop tra ding this system ?  No. Do I see any reason to c hange my pos ition‐s izing plan, t hat is, reduce or increase m y risk?  No . After 15 weeks, I will keep on tradin g per the plan, but this system is still under - performing, compared to original expectations.  That is one drawback to a trading approac h that requires large, but infrequent, winning tra des.  It mig ht be a long time before t his system rea lly shows its capa bility. ■Future Rev iews This runnin g diary will continue indefi  nitely, or until I stop tradin g the euro day and night system, at w hich point I ’ll explain any reasons I had to stop live tra ding. Updates can be found at the web site (www .wi ley.com/go/a lgotra dingsystems). www.rasabourse.comwww.rasabourse.com Cautionary T ales                                                 P A R T  V I I www.rasabourse.comwww.rasabourse.com235     Winning t he Wor ld Cup C hampions hip of Futures Tra ding has ma de me a (very) minor ce lebrity in t he sma ll world of trading, an d that is pretty neat. Both strugg ling an d accomp lished traders have gotten in touc h with me because o f my success, an d some great re lations hips an d trading discussions have resu lted. I’ve probably never had a better time ta lking tra ding than I did a few years ago in C hicago, as I spent t he day wit h four ot her Wor ld Cup C hampions hip of Futures Tra ding winners. I f only I had a tape recor der for those conversations an d discussions—pure gold! Being a top contest performer for three consecutive years opened quite a few doors for me. A ll things consi dered, participating in t he trading contest has been a very fun ri de. Of course, there is a downside to all the notoriety, too. Trading seems to attract peop le wit h what I’d descri be as “defective ” persona lities: t hese folks possess some persona lity fl aw , somet hing they cannot see ( but everyone e lse can), somet hing that probably impacts t heir tra ding. Be lieve it or not, seeing fl aws in ot her tra ders can be a big help to improvin g your tradin g. So I’d like to present some of the most outra- geous c haracters I ’ve come across w hile trading, many o f whom I’ve met because o f my notoriety. Many of these people I like and have sympathy for, so I have chan ged names and certain facts so as to not upset any fra gile psyches. Or, as they say in movie disclaimers, “names have been c hanged to protect t he innocent. Any resem blance to any person, livin g or dead, is purely coincidental. ”    Delusions o f Gran deur               CHAPTER   25 www.rasabourse.com236 DELU SIONS OF GRANDEUR ■ Don Demo I’ve known Don for quite a few years, an d he is a lways te lling me a bout his paper money demo account successes. His discretionary tra ding performance in demo mode is actua lly quite spectacu lar; he can ra ke in pro bably $1,500 per day tra ding two mini S&P contracts. P lus, he is consistent ly pro fi table, an d makes simu lator money 9 days out of 10. He’ll crow all day and all night about his trading prowess, except when I mention real‐money tradin g to him. Then, he grows silent, and after some prodding, Don will admit that his last foray into real‐money trading ended in disaster. I’ve counted at least fi  ve of these disasters over the years, and each one was followed b y even better demo account success. Don considers himself an excellen t trader who just suff  ers unspeakable bad luck in real‐money tradin g. Don’s Lesson :  Demo trading is not the same as real‐money trading. Winning at simulated trading, with a discretionary approach, has practically zero correlation with real‐money trading. Don’t assume demo success will lead to real‐money suc - cess, because it probabl y won’t. ■ Gus the Guru I’ve never met Gus. I’ve never s poken with Gus. I’ve never e‐mailed Gus. But I know a ton about him from struggling traders who’ve contacted me. According to these people, he is a guru’s guru. Gus times the market in exquisite fashion. He takes indi - cators, trend lines, Fibonacci numbers, and an y other technical tool and paints an al - most mystical story of market action. He easily explains why prices do what they do (note the past tense here). When I fi  rst heard about Gus, I thou ght, “He must be rich from trading, since everyone says he is top notch at analyzing the markets.”  Well, no t quite. It turns out that ri ght now Gus isn’t tradin g at all. It seems his last account ran down to zero. Broker malfeasance , he claims , but it is not the fi  rst time he has had no money to trade with. Either he must run across a lot of crooked brokers or the story is more involved. In any event, now he sells his advice on the Internet. His pupils, enamored with their guru, got very confrontational with me when I su ggested tha t maybe Gus wasn’t such a great trader. More than just on the hook, Gus has these fi  sh on ice, in the cooler, on the boat, fi  lleted, and ready to toss on the grill. Gus’s Lesson :  Beware of gurus who don’t trade. The reason most don’t is that they can’t. ■ Paul the Pre dictor If I gave out “outrageousness ” awar ds for peop le in t his chapter, Pau l wou ld take fi rst prize. Over the past six years, I probabl y received 1,000 e‐mails from Paul, as man y as 20 in one day. Pau l is convince d he has some innate a bility to pre dict the direction www.rasabourse.com237DELUSIONS OF GRANDEURof the mar ket—any mar ket. An d he had no qua lms about te lling me a bout his great- ness, over an d over an d over a gain. His super a bility was detailed in many e‐mai ls, when he wasn ’t tryin g to partner wit h me, tryin g to borrow money from me, or tryin g to get me to pay him for his tra ding “advice.” Paul was amaze d that Go ldman Sachs wasn’t pullin g out all stops to hire him (even thou gh he never applied for a job there, and had no real‐money tradin g experience), and he really got upset when popu lar tra ding forums banned him because o f boastful posting. For t he forums t hat did not ban him, Pau l left on his own accor d after rea lizing mem bers were apparent ly too dimwitted to appreciate his alle ged greatness. As far as I can tell, he may have a t one time tra ded a $5,000 account, but it did not last too long. I haven’t heard from him in a w hile, but my guess is he is a sna ke oil vendor in t he ma king. Paul’s Lesson :  No one can pre dict the mar ket. Beware o f those w ho claim suc h abilities. ■ Cal the Complication Kin g If I ask you what two plus two is, you’d quickl y and correctl y answer four. But i f you ask Cal the Complication King the same question, he’ll give an answer like this: “Two is the base of all exponential derivations, and when one puts it upon itsel f in the Euclidean number space—disre gardin g irrationality eff  ects, of course—the parameter space will increase by the same amount.” Huh? If you are like me, this guy makes no sense at all. Amazin gly, thou gh, answers like this have earned Cal a cultlike followin g on one or two popular Internet tradin g forums. He pops up in all sorts of trading topic threads, spews his unintelligible nonsense, and then leaves his sycophants to interpret and defend his “answers.” I’ve never been able to fi  gure out if this nut actuall y trades, but if he does, I’m sure it is unprofi  table—and complicated. Cal’s Lesson :  KISS—Keep It Simple, Stupid. Simple concepts sometimes work best in tradin g. Just because someone talks in riddles doesn’t mean he or she knows more than you. In fact, man y times it means the y know less than you! ■ Pay Me Peter I always like talkin g to system vendors, to see what they have and what they know . Occasionally, I’ll fi  nd some actual value behind the person. Typically, thou gh, there is not hing behind the curtain wit h these peop le. Just smo ke and mirrors, an d double talk. So it was with Pay Me Peter. He was off  erin g a system for sale, so I asked for details. He was sellin g his system for $2,500 outri ght, or $500 up front and $100 a mont h. Wit h those high prices, I assume d it had to be “Holy Grai l” good. So I as ked for the performance report. I can usuall y smell the fake reports a mile awa y, and tha t is what I suspected to receive: $100,000 profi  t per year, no drawdown, 90 percent www.rasabourse.com238 DELU SIONS OF GRANDEURwinning tra des—in ot her wor ds, typica l ridiculous resu lts. W hat he sent me was a shocker: a fi ve‐day back test t hat showed $290 net pro fi t! This seeme d crazy, so I asked for a longer back test. Peter t hen rep lied that if I wante d to as k more ques - tions, his rate was $100 per half hour, and if I sent money via PayPal he would gladly answer my questions. Who in their ri ght mind thinks this way? Peter’s Lesson :  An infl  ated sense of worth almost always spells doom in tradin g. The best tra ders I know are t he humblest ones. ■ Fran k Five Hun dred Frank e‐mai led me a few years ago an d exp lained he was new to tra ding. He wante d a forex ro bot that wor ked, and had only $500 to tra de wit h. “What do you recommend?” he asked. I re plied as I do to all new traders with limited cash. “Your best bet is to stu dy all you can, an d do whatever you have to in or der to get $10,000 or more to start tradin g. Anythin g less than this, and chances are you’ll lose it all. Take your time; the market will always be there.” Sa ge advice, if I do say so myself. I wish someone had given me that advice way back when. Frank, though, did not see it that way. He proceeded to swear up a blue storm at me, callin g me every name in the book, claimin g that I was tryin g to keep him from makin g money, and that he’d bankrupt me through his soon‐to‐be large‐scale trades. He was probably the angriest wannabe trader person I have ever come across. After burnin g all brid ges with me, he just ended up buyin g a robot from some Internet site. I found this out a few years later, when he admitted that he lost his $500 and a bunch more afterward. Frank’s Lesson :  If someone gives you general tradin g advice (not stock tips), and it does not involve buyin g somethin g from them, listen to them. They are tryin g to help you. Also, don’t start trading with only $500. ■ Billy the Boaster Where do I start with Billy the Boaster? He probably has every conceivable men - tal disorder around. Paranoia?  Yes, he believes government a gents follow him con - stant ly, tryin g to stea l his tra ding secrets. E gomania?  Yes, he constant ly tells me how brilliant he is, how he won a scholarship in hi gh school for bein g a math whiz, how he was accepted to both (two!) colle ges he applied to, and so on. Addictive person - ality?  Yes, a doobie‐smo king fi end, his pro‐marijuana vi deos were we ll receive d by potheads on YouTube, althou gh not by potential investors. Delusional?  Yes, he told me he did not want to enter a real‐money tradin g contest because his strate gies would turn $15,000 into over a billion dollars wit hin a year, so “what’s the point o f enterin g?” Oddly enou gh, he could be a decent trader once he cures himself of these issues. He’d rather live in a fantasy world, I guess. www.rasabourse.com239DELUSIONS OF GRANDEURBilly’s Lesson:  Live in rea lity. You are just anot her tra der stru ggling to succee d. Accept t he trut h, embrace your lot in life, and then success may just come your way. ■ Connie the Compounder Seven or ei ght years a go, I fi  rst ran into Connie over at Collective2.com, which, like any ot her tra ding site, has its s hare o f delusiona l folk hiding among goo d traders. Connie ’s big thing was compoun ding. S he’d go on an d on a bout compoun ding, an d how great compoundin g was with her tradin g systems. The problem was that her depth of knowledge en ded at compoun ding. S he knew not hing a bout investing or trading, besides knowing s he wante d to pursue t hat as a career. So Connie did what most unet hical system ven dors do: she poste d hypothetical resu lts that showed enor - mous growth due to compoundin g. She claimed she did the same thin g with her own money. Wrong! Un fortunate ly for her, she was expose d as a fraud when someone found an IRS tax court case a gainst her, where the jud ge decreed that to write o ff tradin g business expenses you actually have to do some tradin g (go fi  gure!). Connie’s Lesson:  Compounding is a great thing, but it is not the only thing. Learn about all aspects of tradin g before tryin g it yourself. ■ Ian versus the Illuminati The so‐called Illuminati (or some other such group) are out to get Ian, who runs a small trading web site. Apparently, Ian fi  gured out that these people have rigged all tradin g in the world, and he knows all their secrets. Of course, he’ll share these secrets with you for only a few hundred dollars. Instead of getting rich by tradin g his so‐called secret code, Ian prefers to harass and be harassed by all manner of online people, startin g fi ghts in every tradin g forum, and bein g banned from major sites like Facebook, Twitter, and StockTwits. I picture Ian sittin g in his grungy little apart - ment, wearing a tin foil hat to block radio signals from the Illuminati. Even though I believe he peddles garbage, I really feel sorry for Ian, as I think he is truly mentally ill and desperately needs professional help. Ian’s Lesso n:  Stay far away from vendors who want to fi  ght with you. They prob - ably have many issues going on, and chances are their product is worthless anyhow . ■ Suki the Spinner I met Suki on the TradeStation support forum. He was off  erin g a strate gy switch— his great strate gy for one of my strate gies. Unfortunately, I could never give him a walk‐forward strate gy (that actually worked well with real‐money tradin g, by the www.rasabourse.com240DELU SIONS OF GRANDEURway) t hat was anyw here c lose to his. I felt defl ated—how cou ld I not develop a strate gy as good as Su ki’s? Su ki repeate dly berate d me an d my tra ding skills. He won - dered, “How can you, Kevin, have suc h poor strate gies, w hile I, Su ki the great, have such fabulous ones? Perhaps you need a di ff erent career.”  Well, a few months passed, and then Suki let slip that all his strate gies were back tested up to the present day. No walk‐forward, no out‐of‐sample, no real‐money results. Naturally, he was a simula - tion mi llionaire, an d even s hared screens hots attesting to his simu lator balance. No wonder I cou ld not matc h him—everyt hing was a p lay‐money game to him. Suki’s Lesson :  Beware of back tests. Unless you developed them or fully trust t he developer, assume t he back test is a steaming pi le of . . . gar bage. Treat i t appropriate ly. ■ Paolo the Plagiarizer Some mental miscreants don’t actually trade but just provide advice. Paolo was such a character. A respected journalist for a forex tradin g web site, Paolo attracted a lo t of views and comments to his articles. He seemed very knowled geable, and I’m sure he earned a good living dispensing trading advice. The only problem was that mos t of his writin g was someone else’s. He pla giarized at least a half‐dozen tradin g writ- ers, includin g myself. This wasn’t an “oh, I for got to include quotation marks”–type off ense; it was plain out copy and paste of another’s work, passing it o ff  as his own. What is even worse is that he told me it was perfectly acceptable, since most of the articles he stole were free anyhow . He had a bi g mental block that stealin g is wron g. Paolo’s Lesson :  Before you become enamored with a trading expert, make sure he or she is the real deal fi  rst. Scam artists come in all shapes and sizes. ■ Slick Sam Slick Sam is a combination of every slimy system vendor and tradin g room operator out there. Sam will lure you in with a free pass to his trading room or a compli - mentary webinar. Then, he’ll slowly ti ghten the noose, getting you to buy expensive “educationa l” materia ls. You ’ll hear a bout his tra des, but you ’ll never see him ta ke any trades live. Even if you are watchin g him live, he’ll be fl  at in an uptrend and then suddenly announce, “I just got out of my lon g position for a profi  t.” Or he’ll claim that he can ’t show you his tra des, but you should still believe his fantastic resu lts. Once in a while, Sam will mess up, and you’ll see his tradin g platform says “demo.” Of course, whoever exposes that fact will quickl y be banned from the room. Sam’s Lesson:  Assume t hat eac h vendor you encounter is se lling his secrets be- cause he needs money, not because he is a do‐ gooder philanthropist, dedicated to helpin g newbie traders. This doesn’t mean he isn’t le gitimate, but if you realize his www.rasabourse.com241DELUSIONS OF GRANDEURtrue motivation (trans ferrin g your money from you to him), you ’ll at least enter any transaction wit h your eyes wi de open. In 20 years o f trading, I’ve pro bably purc hased less than 10 s ystems, courses, consu ltations, an d so on. I am ver y picky, and I’ve never been blatantl y ripped o ff . I’m proud of that fact. ■ The De lusion Conclusion No one is perfect, but many times even the sli ghtest personality issue can stop your trading success dead in its trac ks. The best advice I can give is to look at yourse lf in the mirror an d be tota lly honest a bout your tra ding. C hances are t hat you are not t he greatest tra der ever, you pro bably cannot pre dict the mar ket days in a dvance, you probably have not made millions of dollars tradin g and secret a gents are not tryin g to steal your tra ding strategies. I f you t hink you are invinci ble, rea l‐money tra ding wi ll certain ly put an en d to that thought. Tra ding is extreme ly toug h, and you must be mentally sharp to compete. If your nonperfect personality gets in the way, the best thing to do is to get professional help, or just stay away from trading. www.rasabourse.comwww.rasabourse.com243                                                                     CONCLUSION We’ve now reached the end of my trading journey. Twenty‐some odd years in the makin g, you’ve seen some extreme downs, some extreme hi ghs, and a lot of time spent in between both fl  ounderin g around. First and foremost, I hope this book serves as a warning to all the new traders out there. Learn from my experience: ■   Tradin g is tou gh. Exceedin gly tou gh. Part‐time folks tradin g from their home are up against professionals. The professionals are really great at taking your money. ■   There is no “Holy Grail” out there—no ma gic tradin g strate gy that you can buy for $100, $1,000, or even $10,000. There are decent ones for sale, but none is perfect. ■   Where there is potential reward, there is potential risk. The results equity curve might only show the reward side of the equation, but remember that risk is always there—it just ma y be hidden. ■   The best road to profi  ts is to fi  nd your own tradin g strate gy, one that meets all your goals and objectives. Just don’t expect the process to be easy. I learned all of these lessons, and many more, before I really understood how to trade. Even to day, I sti ll strugg le. No tra ding strategy lasts forever, an d I fi nd myse lf constantly reinventin g my tradin g, and creatin g new strate gies, in an attempt to stay ahead of the pack. If I relax for a while, I inevitabl y fi  nd m y performance su ff ers. The majority o f this book has focuse d on developing trading strate gies. W hile I certainly value the contribution of tradin g psycholo gy and position sizin g and money www.rasabourse.com244CONCLUSIONmanagement, I view t hem as icing on t he cake, wit h the trading strategy as t he cake. I look at tra ding this way for two reasons: ■   All the positive tra ding psyc hology in t he wor ld will not ma ke you pro fi table if your strategy is a loser. Positive t hinking, detailed journa ling, breathing exercises to ca lm your mind, and all other mental‐type activities are great, but they still do not take the place o f a solid strategy. Many peop le, and many tra ding psyc hology coac hes ou t there, seem to t hink that having t he proper min d‐set ensures pro fi ts. It is just not true. ■   Proper position sizing an d money management are important i f you have a win - ning strategy, but converse ly if you have a losing strategy, no position sizing or money management met hod will ever ma ke you pro fi table. It mig ht help you burn throu gh your account more slowly, but a losin g strate gy is a losin g strate gy, no matter how you dress it up. Just t hink of trading like casino gam bling—t he house wins because it has an e dge, an d gam blers lose because t hey don’t have an edge. C hanging bet sizes doesn’t alter the irre futable fact: wit hout an e dge, even - tually you will lose. For lon g‐term success, you really need to fi  nd a winnin g strate gy. This entails a lot of “grunt” work—fi  nding ideas, testing them, refi  ning them, and hopefully eventually tradin g them. A few years a go, I kept track of my tradin g strate gy de- velopment. I found out that I had to test about 100 to 200 tradin g ideas before I found something worth trading with my own money. Most people would likely abandon tradin g long before testin g 100 ideas. Others would say, “Yes, it takes Kevin 100 ideas, but he is a dullard. I am much smarter, so it will onl y take me less than 10 ideas.” Those same people, unfortunately, usually take shortcuts or chea t to get what appears to be an acceptable tradin g system. Shortcut takers, in the long run, usually lose. In the last sections of this book, I put everything together, and walked you throu gh the development of two tradin g strate gies for the euro currency futures. As of this writin g, I am tradin g these with my own money, but I keep a close eye on their performance. In the long term, they hopefully will succeed, and as they do, I’ll increase my position size accordin gly. If they do not succeed, then I’ll eventually swap them out with other strate gies. Althou gh I hope tha t every strate gy I create does well, I also know that is not always the case. Surely, the performance of these two euro strate gies so far bears that out. They are current ly ma king money but un derper formin g, and may be they wi ll continue to do so, or maybe they will return to their lon g‐term avera ges. One never knows, so I usuall y prepare for the worst, and hope for the best. Man y times, the end result is somew here in between. In closin g, I’ll leave you with one thou ght: if you put your mind to becomin g a good trader and follow that up with proper eff  ort, you can be successful. I am liv - www.rasabourse.com245CONCLUSIONing proo f of that, although hopefully your journey wi ll not ta ke as long as mine did. But, to succeed lon g term, plan on dedicatin g a lot of time, eff  ort, and money to the cause. Tra ding is like anyt hing else good in life; if it is good, it is wort h working for. Don’t be tempted by those o ff erin g shortcuts, easy fi  xes, ma gic formulas, or Holy Grail s ystems. Those folks will onl y sidetrack and derail your eff  ort. Put the time in, follow an approach that other successful traders use, and you’ll be much better off  . I wis hed I had taken that approach back in the late 1980s, w hen I fi rst learne d about futures tra ding from t he Cow boy Tra der. Good luck, and happy tradin g! www.rasabourse.comwww.rasabourse.com247 ■Strate gy 1: Baseline Strate gy (No Randomness) input: nContracts(1); var:ssl1 (1); var:ssl(2000); if date >= 1070316 and date < 1080314 then begin ssl1 = 0.75 ; end ; if date >= 1080314 and date < 1090311 then begin ssl1 = 0.75 ; end ; if date >= 10 90311 and date < 1100310 then begin ssl1 = 0.75 ; end ; if date >= 1100310 and date < 111030 9 then         M o nkey Tra ding Exam ple, TradeStation Easy Language Code                                                         APPENDIX A www.rasabourse.com248MONKEY  TRADING EXAMPLE , TRADESTATION EASY LANGUAGE CODE     begin ss l1 = 0.5 ; end ; if date >= 1110309 and date < 1120310 then begin ssl1 = 0.5 ; end ; if date >= 1120310 and date < 113030 8 then begin ssl1 = 1.25 ; end ; if date >= 113030 8 and date < 114030 8 then begin ssl1 = .75 ; end ; if date >= 1070316 then begin if close<close[1] and close[1]<close[2]  then beg in buy ncontracts Contracts next bar at market; End; if close>close[1] and close[1]>close[2]  then begin SellShort ncontracts Contracts  next bar at market; End; SetStopContract; setstoploss(minlist(ssl1*Bi gPointValue*av gtruerange(14),ssl)); end; www.rasabourse.com249MONKEY  TRADING EXAMPLE, TRADES TATION EASY LANGUAGE CODE ■        Strate gy 2: Random Entr y, Baseline Exit Strate gy input: iter(1),percentlong(.400),holdbars(2.5),exitclose(0),oddstradetoday(.47),be gindate(1070319); var:posstradetoday(0); //entry is random input: nContracts(1); var:ssl1(1); var:ssl(2000); if date >= 107031 6 and date < 10 80314 then begin ssl1 = 0.75 ; end ; if date >= 1080314 and date < 1090311 then begin ssl1 = 0.75 ; end ; if date >= 1090311 and date < 1100310 then begin ssl1 = 0.75 ; end ; if date >= 1100310 and date < 1110309 then begin ss l1 = 0.5 ; end ; if date >= 1110309 and date < 1120310 then begin ssl1 = 0.5 ; end ; if date >= 1120310 and date < 1130308 then begin ss l1 = 1.25 ; end ; if date >= 1130308 and date < 1130501 then begin ss l1 = .75 ; end ; www.rasabourse.com250 MONKEY  TRADING EXAMPLE , TRADESTATION EASY LANGUAGE CODE     if date >= 1070316 then be gin if close<close[1] and close[1]<close[2]  then beg in sell ncontracts Contracts next bar at mar ket; End; if close>close[1] and close[1]>close[2]  then be gin buytocover ncontracts Contracts  next bar at market; End; SetStopContract; setstoploss(minlist(ssl1*BigPointValue*avgtruerange(14),ssl)); end; posstradetoday=random(1); //random number for today’s trade If  date>beg indate then beg in If posstradetoda y<=oddstradetoda y then be gin //trade will occur toda y //enter trade If random(1)< percentlon g then bu y this bar at close Else sellshort this bar at close; end; end; www.rasabourse.com251MONKEY  TRADING EXAMPLE, TRADES TATION EASY LANGUAGE CODE ■      Strate gy 3: Baseline Entr y, Random Exit Strate gy input: iter(1),percentlong(.400),holdbars(2.5),exitclose(0),oddstradetoday(.47),be gindate(1070319); var:posstradetoday(0); //exit is random input: nContracts(1); var:ssl1(1); var:ssl(2000); if date >= 107031 6 and date < 10 80314 then begin ssl1 = 0.75 ; end ; if date >= 1080314 and date < 1090311 then begin ssl1 = 0.75 ; end ; if date >= 1090311 and date < 1100310 then begin ssl1 = 0.75 ; end ; if date >= 1100310 and date < 1110309 then begin ss l1 = 0.5 ; end ; if date >= 1110309 and date < 1120310 then begin ssl1 = 0.5 ; end ; if date >= 1120310 and date < 1130308 then begin ss l1 = 1.25 ; end ; if date >= 1130308 and date < 1140308 then begin ss l1 = .75 ; end ; www.rasabourse.com252 MONKEY  TRADING EXAMPLE , TRADESTATION EASY LANGUAGE CODE     if date >= 1070316 then be gin if close<close[1] and close[1]<close[2] and market position=0  then be gin buy ncontracts Contracts next bar at mar ket; End; if close>close[1] and close[1]>close[2] and market position=0   then be gin SellShort ncontracts Contracts  next bar at market; End; end; posstradetoday=random(1); //random number for today’s trade If barssinceentry>=random(2*holdbars) then begin Sell th is bar at close; Buytocover th is bar at close; end; If exitclose=1 then setexitonclose; ■ Strategy 4: Random Entry, Random Exit Strategy input: iter(1), percentlon g(.400),holdbars(2.5),exitclose(0),oddstradetoda y(.48),be gindate(1070319); var:posstradetoday(0); posstradetoday=random(1); //random number for today’s trade www.rasabourse.com253MONKEY  TRADING EXAMPLE, TRADES TATION EASY LANGUAGE CODE    If  date>be gindate then be gin If posstradetoda y<=oddstradetoda y then be gin //trade will occur toda y //enter trade If random(1)<percentlong then buy th is bar at close Else sellshort this bar at close; end; end; If barssinceentr y>=random(2*holdbars) then be gin Sell this bar at close; Buytocover this bar at close; end; If exitclose=1 then setexitonclose; www.rasabourse.comwww.rasabourse.com255 vars: FirstTime (1800), LastTime (2359), ATRmult (3), TRmult (.5), Nb (10), NATR (60), Stoplo (275); FirstTime = 1800 ; LastT ime = 2359 ; if date >= 1090721 and date < 1100104 then begin Nb = 9 ; NATR = 93 ; ATRmult = 3.15 ; TRmult = 0.51 ; Sto plo= 425 ; end ; if date >= 1100104 and date < 1100 617 then begin Nb = 9 ;         Euro Night Strategy, TradeStation Easyggg Language Forma t                                                       APPENDIX B www.rasabourse.com256 EURO NIGHT STRATEGY , TRADESTATION EASY LANGUAGE FORMAT       NATR = 93 ; ATRmu lt = 2.55 ; TRmult = 0.66 ; Sto plo= 375 ; end ; if date >= 1100617 and date < 1101129 then begin Nb = 14 ; NATR = 83 ; ATRmult = 2.75 ; TRmult = 0.71 ; Sto plo= 425 ; end ; if date >= 110112 9 and date < 1110515 then begin Nb = 14 ; NATR = 83 ; ATRmult = 2.75 ; TRmu lt = 0.66 ; Stop lo= 425 ; end ; if date >= 1110515 and date < 1111026 then begin Nb = 19 ; NATR = 93 ; ATRmu lt = 3.15 ; TRmult = 0.56 ; Stoplo= 425 ; end ; if date >= 1111026 and date < 1120412 then begin Nb = 14 ; NATR = 83 ; ATRmult = 2.95 ; TRmult = 0.61 ; Stop lo= 425 ; end ; if date >= 1120412 and date < 1120924 then begin Nb = 14 ; NATR = 93 ; ATRmu lt = 2.95 ; TRmu lt = 0.61 ; Sto plo= 425 ; end ; www.rasabourse.com257EURO NIGH T STRATEGY , TRADES TATION EASY LANGUAGE FORMA T   if date >= 1120 924 and date < 1130310 then begin Nb = 19 ; NATR = 73 ; ATRmult = 3.15 ; TRmu lt = 0.71 ; Sto plo= 425 ; end ; if date >= 1130310 and date < 1130 826 then begin Nb = 14 ; NATR = 93 ; ATRmult = 2.95 ; TRmult = 0.51 ; Sto plo= 425 ; end ; if date >= 1130826 and date < 1140101 then begin Nb = 14 ; NATR = 93 ; ATRmult = 2.55 ; TRmu lt = 0.71 ; Stop lo= 425 ; end ; Var:   LongPr ice(0), ShortPr ice(0), LongTarget(0), ShortTarget(0); //limit entry prices ShortPrice = Average(Low, Nb) + ATRmult * AvgTrueRange(NATR); LongPrice = Average(H igh, Nb) - ATRmult * AvgTrueRange(NATR); {code to ensure only 1 order is entered at each bar - order closest to price} var:diff1(0),diff2(0),Entr ytoPick(0); EntrytoPick=0; diff1=absvalue(close-LongPr ice); diff2=absvalue(close-ShortPrice) ; If diff1<=diff2 then Entr yToPick=1; If diff1>diff2 then EntryToP ick=2; if date >= 1090721 and MarketPosition = 0 and EntriesToday(Date) < 1  and Time >= FirstTime and Time < LastTime then be gin www.rasabourse.com258EURO NIGHT STRATEGY , TRADESTATION EASY LANGUAGE FORMA T   If  Entr yToPick=1 then be gin Buy(“Long Entry”) next bar at Lon gPrice limit; end; If  EntryToP ick=2 then beg in Sell short(“Short Entry”) next bar at ShortPrice limit; end; end; If MarketPosition=-1 then be gin ShortTar get = Entr yPrice - TRmult * TrueRan ge; Buy to cover(“Short Exit”) next bar at ShortTar get limit; end; If MarketPosition =1 then begin LongTarget = EntryPr ice + TRmult * TrueRange; Sell(“Long Ex it”) next bar at LongTarget l imit; end; Setstoppos ition; setstoploss (stoplo); SetExitOnClose; www.rasabourse.com259 var:xb(2),xb2(50),p ipadd(1),Stopl(400),proft(5000); if date >= 10 91118 and date < 1101025 then begin xb = 4 ; xb2 = 70 ; pipadd = 2 ; Stopl = 275 ; end ; if date >= 1101025 and date < 1110929 then begin xb = 4 ; xb2 = 72 ; pipadd = 5 ; Stopl = 225 ; end ; if date >= 1110929 and date < 1120904 then begin xb = 3 ; xb2 = 74 ; pipadd = 8 ; Sto pl = 425 ;         Euro Day Strategy, TradeStation Easyyg yy Language Forma t                                                       APPENDIX C www.rasabourse.com260 EURO DAY STRATEGY , TRADESTATION EASY LANGUAGE FORMA T   end ; if date >= 1120 904 and date < 1130 812 then begin xb = 3 ; xb2 = 74 ; pipadd = 11 ; Sto pl = 425 ; end ; if date >= 1130 812 and date < 11400101 then begin xb = 5 ; xb2 = 80 ; pipadd = 8 ; Sto pl = 425 ; end ; var:cs(0),tradestoday (0),startprof (0),starttrades (0),stoplo(0); cs=currentsess ion(0); If cs<>cs[1] then begin tradestoday=0; startprof=NetProf it + OpenPos itionProfit; starttrades=TotalTrades; Stoplo=stopl; end; If totaltrades<>starttrades or marketpos ition<>0 or startprof<>NetProf it + OpenPositionProfit then tradestoday=1; If tradestoday=0 and time<1500 and date >= 1091118 then begin //entry rules If (high>=highest(high,xb) and close<close[xb2] )   then beg in sellshort next bar at hi gh+pipadd/10000 limit; end; If low<=lowest(low,xb) and close>close[xb2]    then be gin buy next bar at low-pipadd /10000 limit; end; www.rasabourse.com261EURO DAY S TRATEGY , TRADES TATION EASY LANGUAGE FORMA T end; //exit rules Setstopposition; setstoploss(sto plo); setprofittar get(proft); setexitonclose; www.rasabourse.comwww.rasabourse.com263                                                                   ABOUT THE COMPANION WEB SITE Building Winning Algorithmic Trading Systems  comes with a companion web site at www .wiley.com/ go/algotradin gsystems (password: davey14). You will fi  nd fi  ve supplementary spreadsheets and other information to help you on your tradin g journey: ■   Daily Tracking Worksheet ■   Develo pment Workshee t ■   Equit y and Drawdown Curve Builder ■   Monte Carlo Simulator ■   Monthly Summary Sheets In addition, readers will fi  nd quarterly performance updates for the strate gies described in this book. (For more frequent performance updates, go to www .kjtradin gsystems.com/bookupdates.html.) For updates and additional resources, go to www .WileyTradin g.com. Click on “Free Trader Resources” and re gister to get access. www.rasabourse.comwww.rasabourse.com265INDEX A actua l performance, 25, 49, 216–17, 221, 226, 228–29 annua l rate o f return/ drawdown, 65, 165–66 , 168 annual return , 17, 23, 31, 62–63 , 65, 82, 155–56 , 165–66 , 168, 182–83 , 185 B back-test engine, 92, 100, 216, 226–27, 230 baseline strategy, 112–1 4 breakeven sto ps, 86, 8 8 brokers , 13, 20, 38, 46, 65, 99–100 , 180, 195–97 , 200 BS scale , 45–47 C capita l, 17, 25, 34–35, 63–64, 66, 133–34, 179–80, 196, 229 Carlo, Monte, 61–63, 69, 72, 129–30, 136, 149, 151, 165, 167, 169, 171–73, 182, 21 6 commissions, 14, 44, 53–5 6, 69, 94, 105, 108–9, 118, 123, 157, 198–201, 216–17 Commo dity Tra ding A dvisor. See CT Acontinuous contracts, 96–98, 118, 198–9 9 back-adjusted, 98, 198–99 contract data, 9 6 prices, 9 7 contracts, 10, 17–19, 25, 27–28, 53, 55–56, 63–65, 69, 96, 141–43, 172, 178, 180–82, 184–85, 198 data, 9 6 mont h, 96, 198 multiple, 64, 96, 178, 18 0 secon d, 17, 181, 183 single, 142–43, 18 0 Cook, Michael, 28–2 9 corre lation , 25, 135, 144, 171–7 2 serial, 62 CTA (Commo dity Tra ding A dvisor), 45–46, 73, 173 curve closed trade equit y, 57 linear equity, 123, 13 6 strategy equity, 61, 13 6 D Daily Performance Review , 212–13 Detailed Analysis, 61–6 9 developing trading strategies, 43, 45, 47, 72, 24 3 www.rasabourse.com266 INDEXdiscretionary tra ding, 46, 82, 86, 132, 187, 236 diversi fi cation, 72, 87, 133–37, 149, 152, 169 drawdown, 26–27, 57–58, 61–63, 66–68, 123, 133, 136, 140–41, 144–45, 169, 1 72, 178, 189, 206–8, 222–2 3 actual, 178, 208 inevita ble, 36 maximum intra day, 112–1 3 median maximum, 67–69, 155, 183 one-contract, 1 78 quitting point, 18 0 worst, 1 78 drawdown curves, 206–7 drawdown ratio, 68, 155–5 6 E edge, 35, 71, 73–76, 89, 105–6, 110–11, 114–15 , 130, 141–43 , 148, 150, 158, 160, 181, 244 electronic data, 93–95 , 99 emotions , 27, 132, 143, 181, 185, 187–9 3 entries , 16–17 , 24, 73, 75, 83–86 , 88, 93, 100–101 , 104–10 , 116, 131–35 , 150, 152, 157, 159–60 actual, 106–7 generate d, 109 good, 85–86, 104, 107 monke y, 109–1 0 no-edge, 10 7 reversal , 157–58 similar-a pproach, 106–7, 151, 16 0 entry rules, 83–85, 148, 150 equit y, 44, 51, 57–58, 61, 63, 67, 143–44, 164, 167, 169, 182, 184, 188–89 , 191, 206–7 drops, 63–65, 165–66, 16 8 peak, 27, 66, 188 equit y chart, 25–26, 30, 57–58, 20 6 equit y curve, 43, 57–59, 61–62, 64, 69, 71, 121, 123, 125, 136, 139–41 , 163, 188–90 , 206–7 , 213 daily, 58, 20 6 drawdown , 69 euro day strate gy, 157, 163, 165, 167, 22 6“Evaluation an d Optimization o f  Trading Strate gies,” 73 exchange sett lement price, 90–9 1 exit ru les, 83, 85, 148, 150, 152, 157 exits, 16–17, 19, 21, 24, 73, 75, 84–86, 88, 100, 104–10, 132–35, 13 7, 157, 159–60, 192–93 baseline, 112–13 fi xed-bar, 105, 160 monkey, 11 0 rules, 83, 85, 148, 150, 152, 157 testing, 106 expectations, 24, 1 74, 208, 211, 215, 219, 221–23, 228–2 9 expenses, living, 35–3 6 F factor y, 73–75, 133, 20 5 fi tness function , 121–25 , 151 fi xed fractiona l sizing, 143–46, 181–83, 185 G gambling, 30, 192–93 goals, 23–24, 30–31, 33, 72, 79–83, 110, 112, 125–26, 130, 132, 137, 147–48, 155–61, 164, 16 7 H head and shoulders patterns, 1 1 high-frequency tra ding fi rms, 88–89, 9 9 historica l data, 51, 90–91, 95, 97, 108, 150, 15 7 history, wa lk-forwar d, 109–11, 151, 163, 169, 178, 22 1 Holy Grail, 134, 237, 24 3 I ideas, 39, 45, 74, 81, 84, 133, 152, 244 incubatin g, 131, 205, 207–8, 210–11 incubation , 72, 75, 129–32 , 143, 149, 151, 163, 165, 167, 169–73 , 188–89 , 206, 211, 222, 227–28 inputs, walk-forward, 121–22, 125 www.rasabourse.com267INDEXL limite d testing, 72, 103, 148, 150, 159–6 0 two- year test, 1 04 limite d two-year test, 104 limit orders, 57, 101, 131–32, 157, 197, 200–201, 205, 216, 224, 22 6 losing systems, 126, 140–41, 21 3 M MAE (maximum a dverse excursion), 10 7 margin, 25–26, 141, 180, 196 initial, 63, 180 required, 123, 180 market or ders, 57, 100–101, 193, 199–20 0 Martinga le betting strategy, 14 2 Massachusetts Institute of T echnolo gy (MIT), 9 maximum drawdown , 24, 57, 65–69 , 80–82 , 110, 113, 123, 125, 129, 136, 144, 164, 178–80, 182–83, 185 maximum favora ble excursion (MFE), 107 median, 63, 65, 67–69, 165–66, 168, 182, 184 median drawdown, 63, 65–66, 68, 144–45, 165–66, 168, 182, 184 median return, 63–65, 6 8 Michigan, University o f, 9 money management, 58, 73, 139–43, 145, 244 monkey exit strategy, 11 0 monkey tests, 105, 108–1 3 Monte Car lo ana lysis, 61–62, 64, 68, 73, 129–31, 136, 140, 149, 151, 163, 166–69, 1 73, 181, 214 Monte Car lo simu lator, 5, 62–63, 65, 69, 129, 133, 144, 151, 155, 164–66, 168, 178–79, 21 5 moving averages, 11–14, 85, 95, 191 multi ple brokers, 38, 19 5 multiple systems, 134, 136, 144–45, 167, 195 N net pro fi t, 54–55, 57, 107–8, 110, 112–13, 117–18, 123, 125, 206, 212–13, 215–16, 220, 223, 22 7–28, 230 NinjaTra der, 43, 71–72, 90, 196O objectives, 24, 30, 68, 79–82, 89, 125, 127, 130, 164, 169, 173, 182, 243 online t-test , 170 open profi  t, 190, 199–20 0 optimization, 48–49, 72–73, 86, 96, 103, 106, 116, 119, 121, 123–24, 126, 152, 157, 160–61 optimize d resu lts, 48–51, 119–21, 125–26 optimum, 123, 139–40, 143, 185 out-o f-samp le, 47, 49–51, 115, 118, 120–22, 24 0 overo ptimization, 21, 4 7–48, 5 8 P packages, 71–72 parameters, 48, 85–86, 94, 110, 112, 115–17, 119, 121–23, 126, 164, 183, 198, 222 Pardo, Ro bert, 7 3 pattern, can dlestick, 85, 116 performance, 23–29, 47, 58–59, 88–89, 111, 114, 120, 130–31 , 163, 210–11 , 217, 219, 222–23 , 226–29 , 243–4 4 current , 208, 219 edge, 37 hurdles, 61, 75 metrics , 43, 53, 80, 125, 185 mont hly, 210 predicted, 217 real-time , 132, 215 report, 43, 47, 53, 56–57, 62, 69, 112, 23 7 strategy-ca lculated, 228–29 performance metrics, 43, 53, 80, 125, 185 performance re port, 43, 47, 53, 56–57, 62, 69, 112, 23 7 pit, 90, 94–95, 99 plan, 14, 25–26, 29, 46, 150, 152, 161, 179, 190, 19 7, 222, 224, 228, 231, 245 portfolio, 25, 109, 142–43, 174 position size, 59, 139–43, 1 77, 244 position sizing, 53, 58, 64, 72, 123, 130, 135, 139–43, 145–46, 152, 163–64, 1 71–72, 177–82, 185, 243–44 www.rasabourse.com268 INDEXpreliminar y analysis, 53–59 price, ne gative, 9 7–98 probability, 45, 64, 66, 69, 130, 136–37, 164, 167, 169, 182 profi t actual, 107, 210 average tra de net, 55–5 6 closed, 199–200 current, 219, 22 3 small, 17, 135 total net, 55, 69 profi tability, 84–85, 107, 17 3 profi table systems, 92, 17 2 profi  t/loss, 63, 65, 165–66, 16 8 profi  t target, 17, 24, 86, 88, 116, 157, 190, 198–99, 214 pullback, 189–90 Q quitting, 65, 111, 151, 177, 179–80, 215–16 , 222 R random entry, 84, 105–7, 109–10, 112–13, 148, 16 0 random exit , 84, 105, 110, 112–13 , 148, 160 random strategies, 112–13 ratios return/ drawdown, 68, 144, 164, 167, 169, 183 rewar d-to-ris k, 190 real-money tra ding, 236, 239, 241 relative strengt h index (RSI), 10 7 return, 17, 24, 26–28, 30, 62–66, 68, 123–25, 136, 140, 144–45, 155–56, 164–66, 168–69, 180–81, 184 return/drawdown, 26, 28, 30, 63, 65, 68, 136, 144–45, 165–66, 168, 184 risk, 46, 56, 58, 62, 68–69, 129–30, 135–36, 140, 146, 150, 189–90, 192, 224, 228–29, 23 1 risk of ruin, 64–66, 144–45, 18 2 ruin, risk of, 10, 62, 64–66, 144, 164, 167, 182–83S Sakaeda, Kurt, 27 scale tradin g, 17–18, 20, 19 8 settlement price, 90–91, 9 5 shoulders patterns, 11 simulator, 63–64 slippage, 13, 16, 53–57, 69, 94, 101, 105, 108–9, 118, 123, 134, 216–1 7, 220, 228, 23 0 SMART goa l, 81–82, 155–5 6 software, strategy-testing, 91, 10 0 sprea d, bid/ask, 198, 20 0 standard deviation bands, 213–14 start equit y, 63, 65–66, 149, 165–66, 168, 184 stop loss, 116, 198–99, 214 stop-losses, 16, 86, 101, 105, 116–17, 190, 198–99 , 214 stop orders, 57, 100–101, 197 strate gy, 61–62, 71–77, 87–91, 93–99, 103–5, 107–14, 116–19, 125–33, 150–52, 155–61, 166–6 7, 169– 74, 189–92, 205–8, 210–13 adding-to- losers, 1 8 algorit hmic, 84, 188, 19 9 bad, 53, 11 1 breakeven, 3 5 breakout, 15 0 core, 29 day-tra ding, 87 developing, 3 9 high-spee d scalping, 197 incubated, 130 indepen dent, 155 intraday, 155–5 6 live, 203, 205, 207, 212, 21 7 mean-reverting, 8 7 monke y, 112 optimization-less, 116 optimize d, 116, 127, 15 6 real-time, 5 7 uncorre lated, 169 walk-forwar d history, 127–28, 161, 23 9 strategy back-test engine, 13 1 strategy development, 34, 72–75, 130, 134, 157 strategy engine, 48, 5 7, 132, 226–2 7 strategy ru les, 55, 131, 192 System Deve lopment Process C hecklist, 148–49 www.rasabourse.com269INDEXT testing forex data, 10 0 testin g phase, walk-forward, 151 test period, 52, 55, 112–13, 120, 148, 157 Tharp, Dr. Van, 30, 56, 84, 139, 18 0 Tharp Expectancy, 56, 17 2 time frame contraction, 89 TradeStation, 21, 44, 48, 51, 58, 84, 90, 150, 159, 188, 19 7, 200, 205, 216, 22 4 TradeStation Easy Language, 112, 19 6 trading contest, 23–24, 30, 34, 23 5 trading so ftware, 16, 45, 71–72, 100 trading strategies, 23, 37, 47, 53, 57, 61, 73, 85, 96, 100, 104, 133, 140, 241, 243–44 developin g new , 38 optimizin g, 140U Unger, An drea, 14 2 V Vince, Ralph, 139, 14 4 W walk-forwar d, 50, 115, 120–21, 124, 155, 171, 223, 22 7, 230 analysis, 21, 50–51, 115–22, 124, 126–2 7, 161 results, 110, 119–21, 126, 169, 188 test, 53, 104, 12 7, 171, 188 wheat, price of, 17–19, 4 3 World Cup Championship of Futures Tradin g, 23, 87, 142, 235 www.rasabourse.comWILEY END USER LICENSE AGREEMENT Go to www.wiley.com/go/eula to access Wiley’s ebook EULA. www.rasabourse.com
